<!DOCTYPE html>
<html lang='en-US' xml:lang='en-US'>
<head><title></title>
<meta charset='utf-8' />
<meta content='TeX4ht (https://tug.org/tex4ht/)' name='generator' />
<meta content='width=device-width,initial-scale=1' name='viewport' />
<link href='book.css' rel='stylesheet' type='text/css' />
<meta content='book.tex' name='src' />
</head><body>
<!-- l. 25 --><p class='noindent'><span class='ec-lmbx-10'>Jac and Jaseci</span>                                         <br />
<span class='ec-lmbx-10'>Bible</span>                    <br />
<span class='ec-lmbx-10'>Jason Mars
v1.3</span>






</p><!-- l. 59 --><p class='noindent'><span class='ec-lmbx-12x-x-120'>I welcome you to embark on the journey of becoming a true
Jac Ninja!</span>









</p>
<h2 class='likechapterHead' id='contents'><a id='x1-1000'></a>Contents</h2>
<div class='tableofcontents'>
<span class='chapterToc'>1 <a href='#introduction-reimagining-software-for-a-new-era' id='QQ2-1-4'>Introduction: Reimagining Software for a New Era</a></span>
<br /><span class='sectionToc'>1.1 <a href='#the-pain-of-modern-software-development' id='QQ2-1-5'>The Pain of Modern Software Development</a></span>
<br /><span class='sectionToc'>1.2 <a href='#the-jacjaseci-ecosystem-language-and-stack-united' id='QQ2-1-6'>The Jac-Jaseci Ecosystem: Language and Stack United</a></span>
<br /><span class='sectionToc'>1.3 <a href='#a-vision-for-integrated-language-and-runtime-design' id='QQ2-1-8'>A Vision for Integrated Language and Runtime Design</a></span>
<br /><span class='sectionToc'>1.4 <a href='#learning-from-five-years-of-coevolution' id='QQ2-1-9'>Learning from Five Years of Co-Evolution</a></span>
<br /><span class='sectionToc'>1.5 <a href='#what-youll-learn-in-this-book' id='QQ2-1-10'>What You’ll Learn in This Book</a></span>
<br /><span class='sectionToc'>1.6 <a href='#a-living-language-and-community' id='QQ2-1-11'>A Living Language and Community</a></span>
<br /><span class='sectionToc'>1.7 <a href='#the-journey-ahead' id='QQ2-1-12'>The Journey Ahead</a></span>
<br /><span class='partToc'>I  <a href='#the-jac-programming-language' id='QQ2-1-13'>The Jac Programming Language</a></span>
<br /><span class='chapterToc'>2 <a href='#jac-supersets-python-natively' id='QQ2-1-15'>Jac Supersets Python Natively</a></span>
<br /><span class='sectionToc'>2.1 <a href='#jac-is-transpiled-and-compiled' id='QQ2-1-16'>Jac is Transpiled (...and compiled)</a></span>
<br /><span class='sectionToc'>2.2 <a href='#jac-and-python-are-friends-no-need-to-choose' id='QQ2-1-19'>Jac and Python are Friends (no need to choose)</a></span>
<br /><span class='subsectionToc'>2.2.1 <a href='#jac-in-your-python-codebase' id='QQ2-1-20'>Jac in your Python Codebase</a></span>
<br /><span class='subsectionToc'>2.2.2 <a href='#python-in-your-jac-codebase' id='QQ2-1-23'>Python in your Jac Codebase</a></span>
<br /><span class='subsectionToc'>2.2.3 <a href='#jac-as-a-python-library' id='QQ2-1-24'>Jac as a Python Library</a></span>
<br /><span class='subsectionToc'>2.2.4 <a href='#inlining-python-code-inside-jac-code' id='QQ2-1-25'>Inlining Python code inside Jac code</a></span>
<br /><span class='sectionToc'>2.3 <a href='#a-well-organized-codebase' id='QQ2-1-26'>A Well Organized Codebase</a></span>
<br /><span class='chapterToc'>3 <a href='#from-pythonic-to-jactastic-the-basics-of-jac' id='QQ2-1-31'>From Python-ic to Jac-tastic: The Basics of Jac</a></span>
<br /><span class='sectionToc'>3.1 <a href='#what-a-jac-module-looks-like' id='QQ2-1-32'>What a Jac Module Looks Like</a></span>
<br /><span class='subsectionToc'>3.1.1 <a href='#whitespace-and-comments' id='QQ2-1-33'>Whitespace and Comments</a></span>


<br /><span class='subsectionToc'>3.1.2 <a href='#import-and-include-statements' id='QQ2-1-34'>Import and Include Statements</a></span>
<br /><span class='subsectionToc'>3.1.3 <a href='#explicit-module-initialization-with-entry-blocks' id='QQ2-1-35'>Explicit Module Initialization with Entry Blocks</a></span>
<br /><span class='sectionToc'>3.2 <a href='#functions-classes-and-enums' id='QQ2-1-38'>Functions, Classes, and Enums</a></span>
<br /><span class='sectionToc'>3.3 <a href='#loops-conditionals-and-lambdas' id='QQ2-1-45'>Loops, Conditionals, and Lambdas</a></span>
<br /><span class='sectionToc'>3.4 <a href='#operators-and-expressions' id='QQ2-1-49'>Operators and Expressions</a></span>
<br /><span class='sectionToc'>3.5 <a href='#concurrency-with-flow-and-wait' id='QQ2-1-54'>Concurrency with <span class='ec-lmtt-10'>flow </span>and <span class='ec-lmtt-10'>wait</span></a></span>
<br /><span class='sectionToc'>3.6 <a href='#comprehensions' id='QQ2-1-57'>Comprehensions</a></span>
<br /><span class='subsectionToc'>3.6.1 <a href='#filter-comprehensions-jac-feature' id='QQ2-1-58'>Filter comprehensions (Jac feature)</a></span>
<br /><span class='subsectionToc'>3.6.2 <a href='#assign-comprehensions-jac-feature' id='QQ2-1-59'>Assign comprehensions (Jac feature)</a></span>
<br /><span class='sectionToc'>3.7 <a href='#tests' id='QQ2-1-60'>Tests</a></span>
<br /><span class='sectionToc'>3.8 <a href='#inlining-python' id='QQ2-1-61'>Inlining Python</a></span>
<br /><span class='chapterToc'>4 <a href='#native-ai-integration-with-by-and-sem-keywords' id='QQ2-1-62'>Native AI Integration with ‘by’ and ‘sem’ Keywords</a></span>
<br /><span class='sectionToc'>4.1 <a href='#the-by-keyword-delegating-implementation-to-ai' id='QQ2-1-63'>The ‘by’ Keyword: Delegating Implementation to AI</a></span>
<br /><span class='subsectionToc'>4.1.1 <a href='#basic-function-delegation' id='QQ2-1-64'>Basic Function Delegation</a></span>
<br /><span class='subsectionToc'>4.1.2 <a href='#method-delegation-in-objects' id='QQ2-1-65'>Method Delegation in Objects</a></span>
<br /><span class='subsectionToc'>4.1.3 <a href='#advanced-configuration-options' id='QQ2-1-66'>Advanced Configuration Options</a></span>
<br /><span class='subsectionToc'>4.1.4 <a href='#complex-return-types-and-structured-output' id='QQ2-1-67'>Complex Return Types and Structured Output</a></span>
<br /><span class='sectionToc'>4.2 <a href='#the-sem-keyword-semantic-annotations-and-context' id='QQ2-1-68'>The ‘sem’ Keyword: Semantic Annotations and Context</a></span>
<br /><span class='subsectionToc'>4.2.1 <a href='#function-documentation-with-semantic-context' id='QQ2-1-69'>Function Documentation with Semantic Context</a></span>
<br /><span class='subsectionToc'>4.2.2 <a href='#data-structure-semantics' id='QQ2-1-70'>Data Structure Semantics</a></span>
<br /><span class='subsectionToc'>4.2.3 <a href='#examples-and-training-data' id='QQ2-1-71'>Examples and Training Data</a></span>
<br /><span class='subsectionToc'>4.2.4 <a href='#tool-and-function-semantics' id='QQ2-1-72'>Tool and Function Semantics</a></span>
<br /><span class='sectionToc'>4.3 <a href='#multimodal-ai-images-video-and-beyond' id='QQ2-1-73'>Multimodal AI: Images, Video, and Beyond</a></span>
<br /><span class='subsectionToc'>4.3.1 <a href='#image-processing' id='QQ2-1-74'>Image Processing</a></span>
<br /><span class='subsectionToc'>4.3.2 <a href='#video-analysis' id='QQ2-1-75'>Video Analysis</a></span>
<br /><span class='sectionToc'>4.4 <a href='#advanced-ai-patterns' id='QQ2-1-76'>Advanced AI Patterns</a></span>
<br /><span class='subsectionToc'>4.4.1 <a href='#tool-integration-and-function-calling' id='QQ2-1-77'>Tool Integration and Function Calling</a></span>
<br /><span class='subsectionToc'>4.4.2 <a href='#reasoning-methods' id='QQ2-1-78'>Reasoning Methods</a></span>
<br /><span class='subsectionToc'>4.4.3 <a href='#multiagent-systems' id='QQ2-1-79'>Multi-Agent Systems</a></span>


<br /><span class='sectionToc'>4.5 <a href='#best-practices-and-patterns' id='QQ2-1-80'>Best Practices and Patterns</a></span>
<br /><span class='subsectionToc'>4.5.1 <a href='#type-safety-and-error-handling' id='QQ2-1-81'>Type Safety and Error Handling</a></span>
<br /><span class='subsectionToc'>4.5.2 <a href='#context-management' id='QQ2-1-82'>Context Management</a></span>
<br /><span class='subsectionToc'>4.5.3 <a href='#testing-ai-functions' id='QQ2-1-83'>Testing AI Functions</a></span>
<br /><span class='subsectionToc'>4.5.4 <a href='#performance-considerations' id='QQ2-1-84'>Performance Considerations</a></span>
<br /><span class='chapterToc'>5 <a href='#objectspatial-programming-going-beyond-oop' id='QQ2-1-85'>Object-Spatial Programming: Going Beyond OOP</a></span>
<br /><span class='sectionToc'>5.1 <a href='#the-limitations-of-traditional-oop' id='QQ2-1-86'>The Limitations of Traditional OOP</a></span>
<br /><span class='subsectionToc'>5.1.1 <a href='#the-graph-structure-problem' id='QQ2-1-87'>The Graph Structure Problem</a></span>
<br /><span class='subsectionToc'>5.1.2 <a href='#the-traversal-and-computation-problem' id='QQ2-1-88'>The Traversal and Computation Problem</a></span>
<br /><span class='subsectionToc'>5.1.3 <a href='#the-architectural-mismatch' id='QQ2-1-89'>The Architectural Mismatch</a></span>
<br /><span class='sectionToc'>5.2 <a href='#introducing-objectspatial-programming' id='QQ2-1-90'>Introducing Object-Spatial Programming</a></span>
<br /><span class='subsectionToc'>5.2.1 <a href='#the-four-archetypes' id='QQ2-1-91'>The Four Archetypes</a></span>
<br /><span class='subsectionToc'>5.2.2 <a href='#from-datatocomputation-to-computationtodata' id='QQ2-1-92'>From Data-to-Computation to Computation-to-Data</a></span>
<br /><span class='sectionToc'>5.3 <a href='#nodes-locations-in-data-space' id='QQ2-1-93'>Nodes: Locations in Data Space</a></span>
<br /><span class='subsectionToc'>5.3.1 <a href='#basic-node-declaration' id='QQ2-1-94'>Basic Node Declaration</a></span>
<br /><span class='subsectionToc'>5.3.2 <a href='#node-abilities-and-contextual-computation' id='QQ2-1-95'>Node Abilities and Contextual Computation</a></span>
<br /><span class='subsectionToc'>5.3.3 <a href='#node-connectivity' id='QQ2-1-96'>Node Connectivity</a></span>
<br /><span class='sectionToc'>5.4 <a href='#edges-firstclass-relationships' id='QQ2-1-97'>Edges: First-Class Relationships</a></span>
<br /><span class='subsectionToc'>5.4.1 <a href='#edge-declaration-and-data' id='QQ2-1-98'>Edge Declaration and Data</a></span>
<br /><span class='subsectionToc'>5.4.2 <a href='#typed-connections' id='QQ2-1-99'>Typed Connections</a></span>
<br /><span class='subsectionToc'>5.4.3 <a href='#edge-abilities-and-transition-logic' id='QQ2-1-100'>Edge Abilities and Transition Logic</a></span>
<br /><span class='sectionToc'>5.5 <a href='#walkers-computation-in-motion' id='QQ2-1-101'>Walkers: Computation in Motion</a></span>
<br /><span class='subsectionToc'>5.5.1 <a href='#basic-walker-declaration' id='QQ2-1-102'>Basic Walker Declaration</a></span>
<br /><span class='subsectionToc'>5.5.2 <a href='#walker-spawning-and-activation' id='QQ2-1-103'>Walker Spawning and Activation</a></span>
<br /><span class='subsectionToc'>5.5.3 <a href='#complex-traversal-patterns' id='QQ2-1-104'>Complex Traversal Patterns</a></span>
<br /><span class='subsectionToc'>5.5.4 <a href='#walker-abilities-and-location-context' id='QQ2-1-105'>Walker Abilities and Location Context</a></span>
<br /><span class='sectionToc'>5.6 <a href='#spatial-references-and-navigation' id='QQ2-1-106'>Spatial References and Navigation</a></span>
<br /><span class='subsectionToc'>5.6.1 <a href='#basic-spatial-reference-syntax' id='QQ2-1-107'>Basic Spatial Reference Syntax</a></span>
<br /><span class='subsectionToc'>5.6.2 <a href='#filtered-spatial-references' id='QQ2-1-108'>Filtered Spatial References</a></span>


<br /><span class='subsectionToc'>5.6.3 <a href='#typed-navigation' id='QQ2-1-109'>Typed Navigation</a></span>
<br /><span class='sectionToc'>5.7 <a href='#practical-example-social-network-analysis' id='QQ2-1-110'>Practical Example: Social Network Analysis</a></span>
<br /><span class='subsectionToc'>5.7.1 <a href='#domain-model-definition' id='QQ2-1-111'>Domain Model Definition</a></span>
<br /><span class='subsectionToc'>5.7.2 <a href='#analysis-walkers' id='QQ2-1-112'>Analysis Walkers</a></span>
<br /><span class='subsectionToc'>5.7.3 <a href='#orchestrating-the-analysis' id='QQ2-1-113'>Orchestrating the Analysis</a></span>
<br /><span class='sectionToc'>5.8 <a href='#benefits-and-use-cases' id='QQ2-1-114'>Benefits and Use Cases</a></span>
<br /><span class='subsectionToc'>5.8.1 <a href='#agentbased-systems' id='QQ2-1-115'>Agent-Based Systems</a></span>
<br /><span class='subsectionToc'>5.8.2 <a href='#distributed-systems' id='QQ2-1-116'>Distributed Systems</a></span>
<br /><span class='subsectionToc'>5.8.3 <a href='#graph-algorithms' id='QQ2-1-117'>Graph Algorithms</a></span>
<br /><span class='subsectionToc'>5.8.4 <a href='#neural-network-architectures' id='QQ2-1-118'>Neural Network Architectures</a></span>
<br /><span class='sectionToc'>5.9 <a href='#integration-with-existing-code' id='QQ2-1-119'>Integration with Existing Code</a></span>
<br /><span class='subsectionToc'>5.9.1 <a href='#gradual-migration' id='QQ2-1-120'>Gradual Migration</a></span>
<br /><span class='subsectionToc'>5.9.2 <a href='#hybrid-architectures' id='QQ2-1-121'>Hybrid Architectures</a></span>
<br /><span class='sectionToc'>5.10 <a href='#performance-and-optimization' id='QQ2-1-122'>Performance and Optimization</a></span>
<br /><span class='subsectionToc'>5.10.1 <a href='#automatic-parallelization' id='QQ2-1-123'>Automatic Parallelization</a></span>
<br /><span class='subsectionToc'>5.10.2 <a href='#data-locality' id='QQ2-1-124'>Data Locality</a></span>
<br /><span class='subsectionToc'>5.10.3 <a href='#distributed-execution' id='QQ2-1-125'>Distributed Execution</a></span>
<br /><span class='sectionToc'>5.11 <a href='#looking-forward-the-future-of-programming' id='QQ2-1-126'>Looking Forward: The Future of Programming</a></span>
<br /><span class='chapterToc'>6 <a href='#constructs-for-infinite-scale-the-root-keyword' id='QQ2-1-127'>Constructs for Infinite Scale: the ‘root’ keyword</a></span>
<br /><span class='sectionToc'>6.1 <a href='#the-root-node-a-persistent-anchor-in-topological-space' id='QQ2-1-128'>The Root Node: A Persistent Anchor in Topological Space</a></span>
<br /><span class='subsectionToc'>6.1.1 <a href='#global-accessibility-and-automatic-persistence' id='QQ2-1-129'>Global Accessibility and Automatic Persistence</a></span>
<br /><span class='subsectionToc'>6.1.2 <a href='#topological-persistence' id='QQ2-1-130'>Topological Persistence</a></span>
<br /><span class='subsectionToc'>6.1.3 <a href='#multiuser-context-through-root-isolation' id='QQ2-1-131'>Multi-User Context Through Root Isolation</a></span>
<br /><span class='sectionToc'>6.2 <a href='#walkers-as-entry-points-from-traversals-to-apis' id='QQ2-1-132'>Walkers as Entry Points: From Traversals to APIs</a></span>
<br /><span class='subsectionToc'>6.2.1 <a href='#entry-point-registration-and-parameter-mapping' id='QQ2-1-133'>Entry Point Registration and Parameter Mapping</a></span>
<br /><span class='subsectionToc'>6.2.2 <a href='#execution-context-management' id='QQ2-1-134'>Execution Context Management</a></span>
<br /><span class='sectionToc'>6.3 <a href='#scaleagnostic-programming-in-practice' id='QQ2-1-135'>Scale-Agnostic Programming in Practice</a></span>
<br /><span class='subsectionToc'>6.3.1 <a href='#development-scale-single-user-local-execution' id='QQ2-1-136'>Development Scale: Single User, Local Execution</a></span>
<br /><span class='subsectionToc'>6.3.2 <a href='#production-scale-multiuser-distributed-execution' id='QQ2-1-137'>Production Scale: Multi-User, Distributed Execution</a></span>


<br /><span class='subsectionToc'>6.3.3 <a href='#global-scale-geographic-distribution' id='QQ2-1-138'>Global Scale: Geographic Distribution</a></span>
<br /><span class='sectionToc'>6.4 <a href='#advanced-patterns-with-scale-constructs' id='QQ2-1-139'>Advanced Patterns with Scale Constructs</a></span>
<br /><span class='subsectionToc'>6.4.1 <a href='#crossuser-interactions' id='QQ2-1-140'>Cross-User Interactions</a></span>
<br /><span class='subsectionToc'>6.4.2 <a href='#distributed-computation-patterns' id='QQ2-1-141'>Distributed Computation Patterns</a></span>
<br /><span class='subsectionToc'>6.4.3 <a href='#eventdriven-architectures' id='QQ2-1-142'>Event-Driven Architectures</a></span>
<br /><span class='sectionToc'>6.5 <a href='#performance-and-optimization-considerations' id='QQ2-1-143'>Performance and Optimization Considerations</a></span>
<br /><span class='subsectionToc'>6.5.1 <a href='#automatic-caching-and-preloading' id='QQ2-1-144'>Automatic Caching and Preloading</a></span>
<br /><span class='subsectionToc'>6.5.2 <a href='#distributed-execution-optimization' id='QQ2-1-145'>Distributed Execution Optimization</a></span>
<br /><span class='subsectionToc'>6.5.3 <a href='#storage-optimization' id='QQ2-1-146'>Storage Optimization</a></span>
<br /><span class='sectionToc'>6.6 <a href='#migration-strategies-and-best-practices' id='QQ2-1-147'>Migration Strategies and Best Practices</a></span>
<br /><span class='subsectionToc'>6.6.1 <a href='#migrating-existing-applications' id='QQ2-1-148'>Migrating Existing Applications</a></span>
<br /><span class='subsectionToc'>6.6.2 <a href='#designing-scaleagnostic-applications' id='QQ2-1-149'>Designing Scale-Agnostic Applications</a></span>
<br /><span class='chapterToc'>7 <a href='#building-an-agentic-ai-application-with-jac' id='QQ2-1-150'>Building an Agentic AI Application with Jac</a></span>
<br /><span class='sectionToc'>7.1 <a href='#project-architecture-overview' id='QQ2-1-151'>Project Architecture Overview</a></span>
<br /><span class='subsectionToc'>7.1.1 <a href='#system-design-using-objectspatial-programming' id='QQ2-1-152'>System Design Using Object-Spatial Programming</a></span>
<br /><span class='subsectionToc'>7.1.2 <a href='#agent-orchestration-through-walkers' id='QQ2-1-153'>Agent Orchestration Through Walkers</a></span>
<br /><span class='subsectionToc'>7.1.3 <a href='#ai-integration-architecture' id='QQ2-1-154'>AI Integration Architecture</a></span>
<br /><span class='sectionToc'>7.2 <a href='#codebase-organization' id='QQ2-1-155'>Codebase Organization</a></span>
<br /><span class='subsectionToc'>7.2.1 <a href='#directory-structure' id='QQ2-1-156'>Directory Structure</a></span>
<br /><span class='subsectionToc'>7.2.2 <a href='#file-responsibilities' id='QQ2-1-157'>File Responsibilities</a></span>
<br /><span class='subsectionToc'>7.2.3 <a href='#module-dependencies' id='QQ2-1-158'>Module Dependencies</a></span>
<br /><span class='subsectionToc'>7.2.4 <a href='#getting-started' id='QQ2-1-159'>Getting Started</a></span>
<br /><span class='sectionToc'>7.3 <a href='#stepbystep-implementation' id='QQ2-1-160'>Step-by-Step Implementation</a></span>
<br /><span class='subsectionToc'>7.3.1 <a href='#step-setting-up-the-foundation' id='QQ2-1-161'>Step 1: Setting up the Foundation</a></span>
<br /><span class='subsectionToc'>7.3.2 <a href='#step-building-the-objectspatial-foundation' id='QQ2-1-162'>Step 2: Building the Object-spatial Foundation</a></span>
<br /><span class='subsectionToc'>7.3.3 <a href='#step-creating-the-agent-core' id='QQ2-1-163'>Step 3: Creating the Agent Core</a></span>
<br /><span class='subsectionToc'>7.3.4 <a href='#step-implementing-aipowered-toolboxes' id='QQ2-1-164'>Step 4: Implementing AI-Powered Toolboxes</a></span>
<br /><span class='subsectionToc'>7.3.5 <a href='#step-advanced-ai-integration-with-semantic-annotations' id='QQ2-1-165'>Step 5: Advanced AI Integration with Semantic Annotations</a></span>
<br /><span class='subsectionToc'>7.3.6 <a href='#step-email-automation-with-error-handling' id='QQ2-1-166'>Step 6: Email Automation with Error Handling</a></span>


<br /><span class='subsectionToc'>7.3.7 <a href='#step-walker-orchestration-and-system-integration' id='QQ2-1-167'>Step 7: Walker Orchestration and System Integration</a></span>
<br /><span class='sectionToc'>7.4 <a href='#key-jac-features-demonstrated' id='QQ2-1-168'>Key Jac Features Demonstrated</a></span>
<br /><span class='sectionToc'>7.5 <a href='#understanding-the-architecture-choices' id='QQ2-1-169'>Understanding the Architecture Choices</a></span>
<br /><span class='subsectionToc'>7.5.1 <a href='#why-objectspatial-programming' id='QQ2-1-170'>Why Object-Spatial Programming?</a></span>
<br /><span class='subsectionToc'>7.5.2 <a href='#why-ai-delegation' id='QQ2-1-171'>Why AI Delegation?</a></span>
<br /><span class='subsectionToc'>7.5.3 <a href='#why-semantic-annotations' id='QQ2-1-172'>Why Semantic Annotations?</a></span>
<br /><span class='sectionToc'>7.6 <a href='#production-considerations-and-extensions' id='QQ2-1-173'>Production Considerations and Extensions</a></span>
<br /><span class='subsectionToc'>7.6.1 <a href='#security-and-authentication' id='QQ2-1-174'>Security and Authentication</a></span>
<br /><span class='subsectionToc'>7.6.2 <a href='#error-handling-and-monitoring' id='QQ2-1-175'>Error Handling and Monitoring</a></span>
<br /><span class='subsectionToc'>7.6.3 <a href='#extension-possibilities' id='QQ2-1-176'>Extension Possibilities</a></span>
<br /><span class='sectionToc'>7.7 <a href='#conclusion' id='QQ2-1-177'>Conclusion</a></span>
<br /><span class='partToc'>II  <a href='#the-jaseci-stack' id='QQ2-1-178'>The Jaseci Stack</a></span>
</div><p id=''><span id='5'></span><span id='4'></span><span id='3'></span><span id='2'></span><span id='1'></span><a id='Q1-1-2'></a><a id='x1-1001'></a><a id='x1-1002'></a><a id='Q1-1-3'></a><a id='x1-1003'></a><a id='x1-1004'></a>




</p><h2 class='chapterHead' id='introduction-reimagining-software-for-a-new-era'><span class='titlemark'>Chapter 1</span><br /><a id='x1-20001'></a>Introduction: Reimagining Software for a New Era</h2>
<hr />
<!-- l. 4 --><p class='noindent'><!-- tex4ht:inline --></p><div class='tabular'> <table class='tabular' id='TBL-1'><colgroup id='TBL-1-1g'><col id='TBL-1-1' /></colgroup><tr id='TBL-1-1-'><td class='td00' id='TBL-1-1-1' style='white-space:normal; text-align:left;'>
<!-- l. 4 --><p class='noindent'><span class='ec-lmbx-12'>Contents</span>                                                                             </p></td>
</tr></table></div><p><br />
     <br />
       <span class='ec-lmr-9'>3.1   What a Jac Module Looks Like  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .   </span><span class='ec-lmbx-9'>30
            </span><span class='ec-lmr-9'>3.1.1   Whitespace and Comments  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    31
            3.1.2   Import and Include Statements .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    31
            3.1.3   Explicit Module Initialization with Entry Blocks  .  .  .  .  .  .  .  .    32
       3.2   Functions, Classes, and Enums   .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .   </span><span class='ec-lmbx-9'>34
       </span><span class='ec-lmr-9'>3.3   Loops, Conditionals, and Lambdas   .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .   </span><span class='ec-lmbx-9'>37
       </span><span class='ec-lmr-9'>3.4   Operators and Expressions .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .   </span><span class='ec-lmbx-9'>39
       </span><span class='ec-lmr-9'>3.5   Concurrency with </span><span class='ec-lmtt-9'>flow </span><span class='ec-lmr-9'>and </span><span class='ec-lmtt-9'>wait  </span><span class='ec-lmr-9'>.  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .   </span><span class='ec-lmbx-9'>41
       </span><span class='ec-lmr-9'>3.6   Comprehensions .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .   </span><span class='ec-lmbx-9'>42
            </span><span class='ec-lmr-9'>3.6.1   Filter comprehensions (Jac feature)   .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    43
            3.6.2   Assign comprehensions (Jac feature)  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    43
       3.7   Tests  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .   </span><span class='ec-lmbx-9'>44
       </span><span class='ec-lmr-9'>3.8   Inlining Python  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .   </span><span class='ec-lmbx-9'>45</span>
</p><!-- l. 4 --><p class='noindent'><br /></p><!-- l. 4 --><p class='noindent'>
<hr />
</p><!-- l. 5 --><p class='noindent'>In the year 2020, with 20/20 vision, this journey began with a simple observation: the way we
build software has not fundamentally evolved to meet the challenges of our time. While the
computing landscape has transformed dramatically—with artificial intelligence becoming
ubiquitous, applications scaling to millions of users across thousands of servers, and software
systems growing in complexity—our programming interfaces remain largely unchanged since the
1980s and 1990s. This disconnect between our tools and our needs inspired the creation of
Jac, a programming language designed for modern software challenges, and Jaseci, the
comprehensive software stack that brings Jac to life. Together, they form an integrated
ecosystem for reimagining how we express, build, and deploy software for the modern
era.
</p>
<h3 class='sectionHead' id='the-pain-of-modern-software-development'><span class='titlemark'>1.1   </span> <a id='x1-30001.1'></a>The Pain of Modern Software Development</h3>
<!-- l. 9 --><p class='noindent'>Today’s software developers face challenges that would have seemed like science fiction
just a generation ago. We routinely build systems that must seamlessly scale from a
single user to millions, coordinate computation across distributed networks spanning


continents, integrate sophisticated AI models as naturally as we once called simple functions,
and maintain coherent architectures across codebases that dwarf anything imagined in
computing’s early days. Yet we approach these monumental tasks with programming
languages and paradigms designed for a simpler time—when programs ran on single
machines, data lived in local files, and the most complex abstraction was often a class
hierarchy.
</p><!-- l. 11 --><p class='noindent'>The symptoms of this mismatch manifest everywhere in modern software development.
Teams spend more time managing accidental complexity than solving actual problems.
Architectural patterns that should be first-class concepts are instead buried in layers of
boilerplate code. The semantic intent of our programs—what we’re actually trying to
accomplish—gets lost in the mechanical details of how we’re forced to express it. Simple
conceptual changes require touching hundreds of files. Testing becomes a herculean
effort as we struggle to reason about distributed state and asynchronous behavior.
And perhaps most tellingly, the cognitive load of understanding even modestly-sized
systems has grown beyond what any individual developer can reasonably hold in their
mind.
</p><!-- l. 13 --><p class='noindent'>This isn’t a failure of developers or existing languages—Python, JavaScript, Java, and others are
remarkable achievements that have enabled incredible innovation. Rather, it’s a recognition that
the nature of software itself has fundamentally changed. The ubiquity of cloud computing, the
prevalence of AI, the expectation of global scale, and the complexity of modern user experiences
demand new abstractions that directly address these realities. Just as high-level languages
abstracted away assembly code and automatic memory management freed us from manual
allocation, we now need abstractions that handle the patterns and challenges unique to our
era.
</p><!-- l. 15 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='the-jacjaseci-ecosystem-language-and-stack-united'><span class='titlemark'>1.2   </span> <a id='x1-40001.2'></a>The Jac-Jaseci Ecosystem: Language and Stack United</h3>
<!-- l. 17 --><p class='noindent'>Before diving deeper into the solutions we’ve developed, it’s crucial to understand the relationship
between two closely related but distinct components of our ecosystem: Jac and Jaseci. Their
similar names often cause confusion, but their roles are complementary and equally essential to
addressing modern software challenges.
</p>
<figure class='figure'>





<!-- l. 21 --><p class='noindent' id='-the-relationship-between-jac-the-programming-language-and-jaseci-the-comprehensive-software-stack'><img alt='eeCCxxooprecDmRSynceuepunstepsstevJiltieSetesdelJaermmSymuaiboasTesnalnypceeESotantFecchngftxicrarinoiwsmlnearewogseoyrk
 IdPSeroaofsgt &amp;rwaaImrnmetiennStgtack
   Language   ' src='book0x.svg' />
<a id='x1-4001r1'></a>
</p>
<figcaption class='caption'><span class='id'><span class='ec-lmri-8'>Figure 1.1:  </span></span><span class='content'><span class='ec-lmri-8'>The  relationship  between  Jac,  the  programming  language,  and  Jaseci,  the  comprehensive
software stack</span>
</span></figcaption><!-- tex4ht:label?: x1-4001r1  -->


</figure>
<!-- l. 66 --><p class='noindent'><span class='ec-lmbx-10'>Jac </span>is the programming language—the expressive medium through which developers articulate
their ideas. It provides the syntax for writing code, the semantics that give meaning to that code,
and the conceptual framework that shapes how we think about modern software problems. Jac
introduces new abstractions like Object-Spatial Programming, native AI integration, and
constructs designed for distributed systems, all while maintaining compatibility with Python’s
familiar syntax and ecosystem.
</p><!-- l. 68 --><p class='noindent'><span class='ec-lmbx-10'>Jaseci </span>is the comprehensive software stack that transforms Jac code into running systems. It
encompasses the compiler technology that translates Jac programs into executable code, the
runtime engines that execute this code efficiently across distributed environments, and the systems
software that manages scaling, AI model integration, and the complex orchestration required by
modern applications. Jaseci handles the “how” of execution while Jac focuses on the “what” of
expression.
</p><!-- l. 70 --><p class='noindent'>This division of responsibilities is intentional and powerful. Jac allows developers to express
complex distributed, AI-integrated systems using intuitive abstractions, while Jaseci automatically
handles the intricate details of making those abstractions work efficiently at scale. When you
write Jac code that spawns walkers across a distributed graph, Jaseci manages the
network communication, load balancing, and fault tolerance. When you use Jac’s AI
integration features, Jaseci handles model loading, token management, and response
parsing.
</p><!-- l. 72 --><p class='noindent'>The symbiotic relationship between language and stack enables a level of abstraction that
wouldn’t be possible with either component alone. Traditional programming languages must
remain agnostic about their execution environment, limiting their ability to provide high-level
abstractions. By co-designing the language and its execution stack, we can offer abstractions that
are both more powerful and more efficient than what’s possible in general-purpose
environments.
</p>
<h3 class='sectionHead' id='a-vision-for-integrated-language-and-runtime-design'><span class='titlemark'>1.3   </span> <a id='x1-50001.3'></a>A Vision for Integrated Language and Runtime Design</h3>
<!-- l. 76 --><p class='noindent'>The Jac-Jaseci ecosystem emerged from years of research and practical experience building
large-scale systems, working from the hardware level up through the entire stack. This full-stack
perspective revealed opportunities for abstraction that aren’t visible when viewing
programming languages in isolation from their execution environments. By co-designing the
language and its runtime stack—considering how modern software actually executes across
distributed systems, with AI models as computational primitives, managing complex
state spaces—we can create language constructs that directly express these patterns
while providing runtime systems with the semantic information needed for automatic
optimization.


</p><!-- l. 78 --><p class='noindent'>The goal was never to create yet another programming language and runtime for their own sake.
Instead, the Jac-Jaseci ecosystem represents a deliberate attempt to identify the higher-level
abstractions necessary for modern software and provide them through an integrated
language-and-stack approach. Jac’s abstractions serve a dual purpose: they make it
simpler for developers to articulate solutions to ubiquitous problems, while simultaneously
providing Jaseci’s runtime systems with enough semantic information to automatically
optimize, parallelize, and manage aspects of computation that shouldn’t require manual
intervention.
</p><!-- l. 80 --><p class='noindent'>This integrated approach enables capabilities that neither component could achieve alone. When
Jac provides spatial programming constructs for graph traversal, Jaseci can optimize these
operations across distributed systems because it understands the semantic intent. When Jac offers
native AI integration primitives, Jaseci can manage model lifecycle, caching, and resource
allocation because the language constructs carry explicit semantic information about AI usage
patterns.
</p><!-- l. 82 --><p class='noindent'>Consider how we currently handle AI integration. In most languages, calling an AI model involves
extensive boilerplate: managing API clients, handling tokens, parsing responses, implementing
retry logic, and maintaining context. Yet conceptually, we’re just asking a question or
requesting a transformation. Jac’s native AI integration through keywords like <span class='ec-lmtt-10'>by </span>and <span class='ec-lmtt-10'>sem</span>
reduces this to its essential form—expressing intent rather than implementation. The
language runtime handles the mechanical details, just as garbage collectors handle memory
management.
</p><!-- l. 84 --><p class='noindent'>Similarly, the shift from Object-Oriented Programming to Object-Spatial Programming
acknowledges that modern software is fundamentally about relationships and transformations
across connected entities, not just encapsulated objects exchanging messages. When your
application’s core abstraction is a graph of interconnected services, users, and data, why should
you encode this in a paradigm designed for isolated objects? Jac’s spatial primitives—nodes,
edges, walkers—directly express these relationships, making architectural patterns visible in the
code itself.
</p><!-- l. 86 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='learning-from-five-years-of-coevolution'><span class='titlemark'>1.4   </span> <a id='x1-60001.4'></a>Learning from Five Years of Co-Evolution</h3>
<!-- l. 88 --><p class='noindent'>This book captures the Jac-Jaseci ecosystem in its current form, but this form is the
result of five years of co-evolution, experimentation, and hard-won lessons learned from
developing both language and runtime stack in tandem. The language and execution
environment you’ll learn in these pages have been refined through real-world use in both
research projects and production systems at scale. Features that seemed clever but proved
confusing have been removed. Abstractions that looked good in theory but failed in
practice have been redesigned. Runtime optimizations that worked in isolation but


caused issues in integrated systems have been reconsidered. What remains is a carefully
curated ecosystem where language constructs and runtime capabilities reinforce each
other.
</p><!-- l. 90 --><p class='noindent'>The early versions of the ecosystem were more radical in their departure from existing languages
and runtimes. They required developers to completely rethink their approach to programming,
abandoning familiar patterns for entirely new paradigms while also adopting unfamiliar
deployment and execution models. While philosophically pure, this approach created
unnecessary barriers to adoption. Through iterative refinement and feedback from actual
users, the ecosystem evolved to its current position where Jac serves as a superset of
Python—preserving everything valuable about Python while adding new capabilities—and Jaseci
provides seamless interoperability with existing Python infrastructure and deployment
patterns.
</p><!-- l. 92 --><p class='noindent'>The decision to make Jac a Python superset while ensuring Jaseci could execute standard Python
code exemplifies this pragmatic evolution. Python’s ecosystem is too valuable to abandon, its
syntax too familiar to replace, its community too vibrant to leave behind, and its deployment
patterns too well-established to ignore. By transpiling to Python and maintaining full
interoperability at both the language and runtime levels, the ecosystem allows developers to adopt
new abstractions incrementally. You can start by using Jac for new architectural components
while keeping existing business logic in Python, deploy on familiar infrastructure while gradually
adopting Jaseci’s distributed capabilities, and migrate at your own pace as you become
comfortable with the new abstractions.
</p><!-- l. 94 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='what-youll-learn-in-this-book'><span class='titlemark'>1.5   </span> <a id='x1-70001.5'></a>What You’ll Learn in This Book</h3>
<!-- l. 96 --><p class='noindent'>This book is structured to guide you from familiar Python concepts through Jac’s most advanced
language features and Jaseci’s powerful runtime capabilities, with each chapter building upon the
previous ones. You’ll start by understanding how the Jac-Jaseci ecosystem relates to Python—not
as a replacement but as a comprehensive enhancement that spans both language and execution
environment. Then you’ll learn how to make your Python code more "Jac-tastic," adopting Jac’s
idioms and patterns while understanding how Jaseci’s runtime optimizes and scales your
applications automatically.
</p><!-- l. 98 --><p class='noindent'>The heart of the book explores Object-Spatial Programming, a paradigm shift that recognizes
modern software as networks of interconnected entities rather than collections of isolated
objects. You’ll learn to think in terms of graphs and traversals, expressing complex
architectural patterns with remarkable clarity while understanding how Jaseci’s distributed
execution engine makes these patterns work efficiently across multiple machines. The native
AI integration chapters will show you how artificial intelligence becomes just another
computational primitive in Jac, as natural to use as a function call but infinitely more powerful,


while Jaseci handles the complex orchestration of AI models, caching, and resource
management.
</p><!-- l. 100 --><p class='noindent'>As you progress to advanced topics, you’ll discover language constructs designed for infinite
scale—patterns that work whether your application serves ten users or ten million—and learn how
Jaseci’s runtime architecture automatically handles the scaling, distribution, and fault tolerance
that makes this possible. The <span class='ec-lmtt-10'>root </span>keyword and related abstractions provide a foundation for
building systems that can grow without architectural rewrites, while Jaseci’s execution model
ensures that growth happens seamlessly. Throughout, you’ll see how Jac’s higher-level
abstractions don’t just make code shorter and more expressive; they also provide Jaseci with
the semantic information needed to automatically optimize, parallelize, and scale your
applications in ways that wouldn’t be possible with general-purpose languages and
runtimes.
</p><!-- l. 102 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='a-living-language-and-community'><span class='titlemark'>1.6   </span> <a id='x1-80001.6'></a>A Living Language and Community</h3>
<!-- l. 104 --><p class='noindent'>One of the most important lessons from these five years has been recognizing that a programming
language is more than its syntax and semantics—it’s a community of practitioners who
discover new patterns, push boundaries, and find innovative applications the language
designers never imagined. While this book presents Jac from my perspective as its
creator, I’ve already witnessed developers using these tools in ways that surprise and
delight me. Their insights continue to enrich our collective understanding of what’s
possible.
</p><!-- l. 106 --><p class='noindent'>This book represents a snapshot of the Jac-Jaseci ecosystem as it exists today, but
both the language and runtime stack continue to evolve through the contributions and
feedback of their growing community. The patterns and practices described here have been
validated through real use, but they’re not the final word. As you work with Jac and
Jaseci, you’ll likely discover new idioms, elegant solutions, and powerful patterns that
extend beyond what’s documented here. This ongoing discovery is part of what makes
working with a new paradigm exciting—you’re not just learning a language and runtime,
you’re participating in the exploration of new ways to think about, build, and deploy
software.
</p><!-- l. 108 --><p class='noindent'>The resistance to writing this book for many years came from a belief that documentation and
community contributions could capture everything necessary to understand the Jac-Jaseci
ecosystem. What became clear, however, was the need for a coherent vision—a single narrative
that explains not just what Jac and Jaseci are individually, but why they exist as an integrated
ecosystem and how their pieces fit together to address modern software challenges. This
book provides that narrative while acknowledging that it’s just the beginning of the
conversation.


</p><!-- l. 110 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='the-journey-ahead'><span class='titlemark'>1.7   </span> <a id='x1-90001.7'></a>The Journey Ahead</h3>
<!-- l. 112 --><p class='noindent'>As you embark on learning the Jac-Jaseci ecosystem, remember that you’re not abandoning your
existing knowledge—you’re extending it. Every Python skill you’ve developed remains valuable.
Every architectural pattern you’ve learned still applies. Every deployment practice you’ve
mastered continues to work. Jac simply provides new tools to express these patterns more directly,
new abstractions to handle modern complexity, and new ways to think about the software you
build, while Jaseci provides the runtime foundation that makes these abstractions work efficiently
at any scale.
</p><!-- l. 114 --><p class='noindent'>The chapters ahead will take you on a journey from the familiar to the revolutionary.
You’ll start with Python code that looks almost identical to what you write today,
running on infrastructure that feels familiar, then gradually incorporate Jac’s features
and Jaseci’s capabilities as you discover their power. By the end, you’ll be writing and
deploying software that would be impractical or impossible to express clearly and scale
efficiently using traditional languages and runtimes—not because the ecosystem is more
complex, but because it provides the right abstractions and execution model for modern
problems.
</p><!-- l. 116 --><p class='noindent'>Software development is at an inflection point. The challenges we face—scale, distribution, AI
integration, architectural complexity—require us to evolve our tools and thinking. The Jac-Jaseci
ecosystem represents one path forward, born from practical experience and refined through
real-world use. Whether you’re building the next generation of AI-powered applications,
architecting systems for global scale, or simply looking for better ways to express your ideas in
code and deploy them reliably, this ecosystem offers language abstractions and runtime
capabilities designed for the problems you face today and the opportunities you’ll encounter
tomorrow.
</p><!-- l. 118 --><p class='noindent'>Welcome to this journey of reimagining how we build and deploy software. The future of
programming isn’t just about writing code—it’s about expressing intent, managing complexity,
and building systems that can evolve with our rapidly changing world. Let’s explore how Jac and
Jaseci make this possible, together.


</p>
<h1 class='partHead' id='the-jac-programming-language'><span class='titlemark'>Part I<br /></span><a id='x1-10000I'></a>The Jac Programming Language</h1>
<!-- l. 17 --><p class='noindent' id='6'><span id='8'></span><span id='7'></span>


<a id='Q1-1-14'></a>
<a id='x1-10001'></a>
<a id='x1-10002'></a>


</p>
<h2 class='chapterHead' id='jac-supersets-python-natively'><span class='titlemark'>Chapter 2</span><br /><a id='x1-110002'></a>Jac Supersets Python Natively</h2>
<hr />
<!-- l. 4 --><p class='noindent'><!-- tex4ht:inline --></p><div class='tabular'> <table class='tabular' id='TBL-2'><colgroup id='TBL-2-1g'><col id='TBL-2-1' /></colgroup><tr id='TBL-2-1-'><td class='td00' id='TBL-2-1-1' style='white-space:normal; text-align:left;'>
<!-- l. 4 --><p class='noindent'><span class='ec-lmbx-12'>Contents</span>                                                                             </p></td>
</tr></table></div><p><br />
     <br />
       <span class='ec-lmr-9'>5.1   The Limitations of Traditional OOP   .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .   </span><span class='ec-lmbx-9'>58
            </span><span class='ec-lmr-9'>5.1.1   The Graph Structure Problem   .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    58
            5.1.2   The Traversal and Computation Problem  .  .  .  .  .  .  .  .  .  .  .  .    58
            5.1.3   The Architectural Mismatch   .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    59
       5.2   Introducing Object-Spatial Programming .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .   </span><span class='ec-lmbx-9'>60
            </span><span class='ec-lmr-9'>5.2.1   The Four Archetypes   .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    60
            5.2.2   From Data-to-Computation to Computation-to-Data .  .  .  .  .  .    60
       5.3   Nodes: Locations in Data Space  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .   </span><span class='ec-lmbx-9'>61
            </span><span class='ec-lmr-9'>5.3.1   Basic Node Declaration  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    61
            5.3.2   Node Abilities and Contextual Computation   .  .  .  .  .  .  .  .  .  .    61
            5.3.3   Node Connectivity  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    62
       5.4   Edges: First-Class Relationships .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .   </span><span class='ec-lmbx-9'>62
            </span><span class='ec-lmr-9'>5.4.1   Edge Declaration and Data  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    62
            5.4.2   Typed Connections   .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    63
            5.4.3   Edge Abilities and Transition Logic   .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    63
       5.5   Walkers: Computation in Motion   .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .   </span><span class='ec-lmbx-9'>64
            </span><span class='ec-lmr-9'>5.5.1   Basic Walker Declaration  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    64
            5.5.2   Walker Spawning and Activation  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    64
            5.5.3   Complex Traversal Patterns .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    65
            5.5.4   Walker Abilities and Location Context .  .  .  .  .  .  .  .  .  .  .  .  .  .    65
       5.6   Spatial References and Navigation   .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .   </span><span class='ec-lmbx-9'>66
            </span><span class='ec-lmr-9'>5.6.1   Basic Spatial Reference Syntax  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    66
            5.6.2   Filtered Spatial References   .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    67
            5.6.3   Typed Navigation   .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    67
       5.7   Practical Example: Social Network Analysis  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .   </span><span class='ec-lmbx-9'>68
            </span><span class='ec-lmr-9'>5.7.1   Domain Model Definition  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    68
            5.7.2   Analysis Walkers  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    68
            5.7.3   Orchestrating the Analysis   .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    70
       5.8   Benefits and Use Cases  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .   </span><span class='ec-lmbx-9'>71
            </span><span class='ec-lmr-9'>5.8.1   Agent-Based Systems   .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    71
            5.8.2   Distributed Systems  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    71
            5.8.3   Graph Algorithms  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    72
            5.8.4   Neural Network Architectures .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    72


       5.9   Integration with Existing Code   .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .   </span><span class='ec-lmbx-9'>73
            </span><span class='ec-lmr-9'>5.9.1   Gradual Migration  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    73
            5.9.2   Hybrid Architectures   .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    73
       5.10  Performance and Optimization   .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .   </span><span class='ec-lmbx-9'>74
            </span><span class='ec-lmr-9'>5.10.1  Automatic Parallelization  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    74
            5.10.2  Data Locality .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    74
            5.10.3  Distributed Execution  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .    74
       5.11  Looking Forward: The Future of Programming   .  .  .  .  .  .  .  .  .  .  .  .  .   </span><span class='ec-lmbx-9'>74</span>
</p><!-- l. 4 --><p class='noindent'><br /></p><!-- l. 4 --><p class='noindent'>
<hr />
</p><!-- l. 5 --><p class='noindent'>At its core, Jac represents a natural evolution of Python—not a replacement, but an enhancement.
For Python developers accustomed to the language’s expressiveness and ecosystem, Jac offers a
familiar foundation with powerful extensions for modern software architecture. This chapter
explores how Jac achieves this delicate balance: preserving everything that makes Python
productive while introducing higher-level abstractions that address common architectural
patterns and complexity management challenges that Python developers face in large-scale
systems.
</p><!-- l. 7 --><p class='noindent'>The relationship between Jac and Python is fundamentally different from typical language
interoperability stories. Rather than building bridges between separate runtime environments or
maintaining foreign function interfaces, Jac operates as a true superset that compiles down to
native Python. This design philosophy ensures that your existing Python knowledge, tools, and
libraries remain directly applicable while gaining access to Jac’s advanced features for
object-spatial programming, architectural patterns, and semantic clarity.
</p>
<h3 class='sectionHead' id='jac-is-transpiled-and-compiled'><span class='titlemark'>2.1   </span> <a id='x1-120002.1'></a>Jac is Transpiled (...and compiled)</h3>
<!-- l. 11 --><p class='noindent'>Understanding Jac’s compilation model is incredibly helpful for leveraging its full potential. When
we say Jac is a superset of Python, we mean something specific and powerful: Jac’s grammar
strictly extends Python’s grammar, adding higher-level constructs and object–spatial
features while preserving Python’s semantics. This relationship differs from a simple
syntactic extension—“superset” here does not mean every valid Python source file is also a
valid Jac source file. Instead, it means Jac provides the full expressivity of Python and
then adds more. You can express any Python program logic in Jac, enhanced with
idiomatic Jac features, and the resulting program behaves as a native Python program at
runtime.
</p><!-- l. 13 --><p class='noindent'>The architectural choice to build Jac as a transpiled language brings significant advantages. Unlike
languages that require their own runtime environments, virtual machines, or interpreters, Jac


programs execute on the standard Python runtime. This means you inherit Python’s mature
ecosystem: its garbage collector, memory management, threading model, and crucially, its vast
library ecosystem. Every Python package on PyPI, every internal library your team has built,
every deployment tool and monitoring solution you use—they all work seamlessly with Jac
code.
</p><!-- l. 15 --><p class='noindent'>Conceptually, Jac plays a similar role to how TypeScript or CoffeeScript relates to JavaScript: as
TypeScript or CoffeeScript is JavaScript with wings, Jac is Python with wings. However, Jac goes
beyond simple syntactic sugar. It introduces semantic constructs that fundamentally change how
you think about program organization and data flow, while ensuring these constructs compile
down to efficient Python implementations.
</p>
<figure class='figure'>





<!-- l. 19 --><p class='noindent' id='9'><img alt='CPPyatrsheo tno compiler
PPEyyxttehhtocoounnbte S AytoSeuTcrcodee  ' src='book1x.svg' />
<a id='x1-12001r1'></a>
</p>
<figcaption class='caption'><span class='id'><span class='ec-lmri-8'>Figure 2.1: </span></span><span class='content'><span class='ec-lmri-8'>Baseline Python pipeline: source </span><img alt='→ ' class='math' src='book5x.svg' /> <span class='ec-lmri-8'>AST </span><img alt='→ ' class='math' src='book6x.svg' /> <span class='ec-lmri-8'>CPython bytecode </span><img alt='→ ' class='math' src='book7x.svg' /> <span class='ec-lmri-8'>execute.</span>
</span></figcaption><!-- tex4ht:label?: x1-12001r1  -->


</figure>
<!-- l. 39 --><p class='noindent'>To appreciate how Jac integrates with Python, let’s first review Python’s own compilation model,
illustrated in Figure <a href='#9'>2.1<!-- tex4ht:ref: fig:py-pipeline  --></a>. At runtime, Python compiles <span class='uline'>module by module</span>. When you import a
module, Python parses its source into an Abstract Syntax Tree (AST), compiles this AST to a
code object containing bytecode instructions, then executes the module body once. The
interpreter caches the resulting bytecode under <span class='ec-lmtt-10'>__pycache__ </span>for faster subsequent
imports, recompiling only when the source file changes. Executing a script follows the
same process for the entry module. Function and class bodies are compiled when their
definitions are encountered during module execution; their code objects become attributes
of the module namespace. The unit of compilation and execution is thus the Python
module—a design that provides predictable import semantics and enables incremental
development.
</p><!-- l. 41 --><p class='noindent'>This module-centric compilation model has profound implications for how Python programs are
structured and executed. Each module maintains its own namespace, imports create references
between these namespaces, and the execution order follows the dependency graph of imports.
Python developers intuitively understand these semantics: they know that module-level code
runs once at import time, that circular imports can cause problems if not carefully
managed, and that changes to mutable module-level state persist across the program’s
lifetime.
</p>
<figure class='figure'>





<!-- l. 45 --><p class='noindent' id='10'><img alt='  TrJaacnJspahicigle lh tev loeevlel
PCaPrPGyseyetatnhatonheonnaonraallytcysAeomsiisS Pps aTyi antlndherdon
JJo(SoEaap+opxccti ruttie S AmurcomcuoSine bituTzati Cyzaerctmott /eioedecioneonPsho (d (ac (ooeokokppaptstitigi)ooeonnnaalall)))  ' src='book8x.svg' />
<a id='x1-12002r2'></a>
</p>
<figcaption class='caption'><span class='id'><span class='ec-lmri-8'>Figure 2.2: </span></span><span class='content'><span class='ec-lmri-8'>Compilation pipeline from Jac to native Python execution.</span>
</span></figcaption><!-- tex4ht:label?: x1-12002r2  -->


</figure>
<!-- l. 74 --><p class='noindent'>Jac’s compilation pipeline, shown in Figure <a href='#10'>2.2<!-- tex4ht:ref: fig:jac-pipeline  --></a>, elegantly extends Python’s model while
preserving its semantics. The pipeline operates through several well-defined stages, each serving a
specific purpose in the translation from high-level Jac constructs to executable Python
bytecode. As shown in the figure, under the hood, the compilation pipeline works like
this:
</p>
     <ul class='itemize1'>
     <li class='itemize'>Jac source is parsed into a Jac-specific AST.
     </li>
     <li class='itemize'>Optional high-level analysis and optimization passes run over the Jac AST.
     </li>
     <li class='itemize'>The Jac AST is mechanically transpiled into a pure Python AST, with well-defined
     callbacks into the Jac runtime for Jac-only semantics.
     </li>
     <li class='itemize'>Optional code generation is performed to produce Python source code.
     </li>
     <li class='itemize'>The Python AST is compiled to CPython bytecode using Python’s internal compiler
     pipeline.
     </li>
     <li class='itemize'>Optional low-level analysis/optimization and metadata attachment are applied to the
     resulting bytecode/module artifacts.
     </li>
     <li class='itemize'>The resulting artifact is executed directly or packaged like ordinary Python code.</li></ul>
<!-- l. 86 --><p class='noindent'>Each stage in this pipeline serves a deliberate purpose. The Jac-specific AST stage allows the
language to implement its own syntax and semantic rules without being constrained by Python’s
parser. The optional optimization passes can perform Jac-aware transformations that would be
impossible at the Python level—for instance, optimizing walker traversal patterns or


pre-computing node connectivity metadata. The transpilation to Python AST is where the magic
happens: Jac’s high-level constructs are systematically transformed into equivalent Python code,
with calls to a lightweight runtime library handling Jac-specific semantics like object-spatial
operations and architectural patterns.
</p><!-- l. 88 --><p class='noindent'>The optional Python source generation capability deserves special attention. While Jac code can
execute directly through the compilation pipeline, the ability to emit readable Python
source provides tremendous value for debugging, integration with existing tools, and
building trust with teams adopting Jac incrementally. You can inspect exactly what your
Jac code becomes, understand the performance characteristics, and even check the
generated Python into version control if needed for deployment scenarios where Jac isn’t
available.
</p><!-- l. 90 --><p class='noindent'>Jac mirrors Python’s module-by-module behavior with remarkable fidelity. When you import a
Jac module or run a Jac program, the Jac importer intercepts the import request and transpiles
that single <span class='ec-lmtt-10'>.jac </span>module to a Python AST on demand. It then compiles this AST using the
standard CPython compiler, executes the resulting module body once, and exposes regular Python
module objects to the rest of your program. Downstream imports repeat this per-module process.
The option to emit pure Python sources or cache intermediate artifacts makes subsequent runs as
fast and predictable as native Python, eliminating any runtime overhead from the transpilation
process.
</p><!-- l. 92 --><p class='noindent'>This module-by-module approach has several advantages. First, it maintains Python’s lazy loading
semantics—modules are only compiled when actually imported, reducing startup time for large
applications. Second, it enables incremental adoption—you can convert modules to Jac one at a
time without affecting the rest of your codebase. Third, it preserves Python’s development
workflow—you can modify a Jac file and see the changes on the next run, just like with
Python.
</p><!-- l. 94 --><p class='noindent'>The consequence is powerful: you can reason about Jac as a natively Pythonic language. You get
Python’s ecosystem, tooling, and predictable runtime model, while writing in a language that
raises the level of abstraction for architecture, dataflow, and object–spatial programming. Your
IDE’s Python debugger works with Jac code. Your unit test framework runs Jac tests. Your
deployment pipeline handles Jac applications. This isn’t just interoperability—it’s genuine unity
at the execution level.
</p><!-- l. 96 --><p class='noindent'>Here’s a tiny Jac example that demonstrates the key language constructs:

</p>
 <!-- l. 98 --><pre class='listings' id='listing-1'><span class='label'><a id='x1-12003r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>foo</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-12004r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Hello</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-12005r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-12006r4'></a><span class='ec-lmr-5'>4</span></span>
<span class='label'><a id='x1-12007r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>obj</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>vehicle</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-12008r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Car</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-12009r7'></a><span class='ec-lmr-5'>7</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-12010r8'></a><span class='ec-lmr-5'>8</span></span>
<span class='label'><a id='x1-12011r9'></a><span class='ec-lmr-5'>9</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>enum</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Size</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-12012r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Small</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=1,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Medium</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=2,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Large</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=3</span></span>
<span class='label'><a id='x1-12013r11'></a><span class='ec-lmr-5'>11</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-12014r12'></a><span class='ec-lmr-5'>12</span></span>
<span class='label'><a id='x1-12015r13'></a><span class='ec-lmr-5'>13</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-12016r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>car</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>vehicle</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-12017r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>foo</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-12018r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>car</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-12019r17'></a><span class='ec-lmr-5'>17</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Size</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Medium</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>value</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-12020r18'></a><span class='ec-lmr-5'>18</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-12021r19'></a><span class='ec-lmr-5'>19</span></span></pre>
<!-- l. 119 --><p class='noindent'>This example showcases several Jac features: function definitions with brace-delimited blocks,
object archetypes with the <span class='ec-lmtt-10'>obj </span>keyword, enumerations with explicit values, and the <span class='ec-lmtt-10'>with
entry </span>construct for module entry points. Each of these constructs has clear semantics
that map to Python equivalents while providing more expressive syntax and clearer
intent.


</p><!-- l. 121 --><p class='noindent'>The Jac compiler will transpile this into a pure Python module with calls into the Jac runtime for
Jac-specific semantics. While the actual generated code includes additional machinery for Jac’s
features, a very rough Python shape might look like the following (greatly simplified for
readability):
</p>
<!-- l. 123 -->

 <pre class='lstlisting' id='listing-2'><span class='label'><a id='x1-12022r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>from</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>enum</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Enum</span></span>
<span class='label'><a id='x1-12023r2'></a><span class='ec-lmr-5'>2</span></span>
<span class='label'><a id='x1-12024r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>foo</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-12025r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Hello</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span>
<span class='label'><a id='x1-12026r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-12027r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>class</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>vehicle</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-12028r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>__init__</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>None</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-12029r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Car</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span>
<span class='label'><a id='x1-12030r9'></a><span class='ec-lmr-5'>9</span></span>
<span class='label'><a id='x1-12031r10'></a><span class='ec-lmr-5'>10</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>class</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Size</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Enum</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-12032r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Small</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 1;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Medium</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 2;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Large</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 3</span>
</span><span class='label'><a id='x1-12033r12'></a><span class='ec-lmr-5'>12</span></span>
<span class='label'><a id='x1-12034r13'></a><span class='ec-lmr-5'>13</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>__name__</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>==</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>__main__</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-12035r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>car</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>vehicle</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span>
<span class='label'><a id='x1-12036r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>foo</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span>
<span class='label'><a id='x1-12037r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>car</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span>
<span class='label'><a id='x1-12038r17'></a><span class='ec-lmr-5'>17</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Size</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Medium</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>value</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span></pre>

<!-- l. 143 --><p class='noindent'>This simplified view helps illustrate the fundamental principle: Jac code becomes Python code.
The actual transformation is more sophisticated, handling Jac’s advanced features like walker
protocols, node connections, and ability decorators, but the essence remains—every Jac construct
has a well-defined Python representation.
</p>
<div class='tcolorbox nerd' id='tcolobox-1'>
<div class='tcolorbox-title'>
<!-- l. 147 --><p class='noindent'>Nerd Alert 1</p></div>
<div class='tcolorbox-content'><!-- l. 146 --><p class='noindent'><span class='ec-lmbx-10'>Under  the  hood   </span>Jac’s  transpiler  maintains  a  one-to-one  mapping  from  Jac  AST
nodes to Python AST nodes wherever possible. Where Jac introduces new semantics, the
transpiler emits calls into a compact Jac execution library. The Python AST is compiled
using  the  same  CPython  compiler  that  compiles  ordinary  Python,  yielding  standard
bytecode that the Python VM executes. Because the compiler still holds references to that
bytecode, it can attach metadata (for tooling, debugging, or optimization) before handing
off to the runtime. This architecture is why Jac feels native in Python ecosystems. </p>
</div>
</div>
<!-- l. 149 --><p class='noindent'>The transpiler’s design philosophy emphasizes predictability and debuggability. When you
write a Jac function, it becomes a Python function. When you define a Jac object,
it becomes a Python class. This direct mapping means that Python’s introspection
capabilities work naturally with Jac code—you can use <span class='ec-lmtt-10'>dir()</span>, <span class='ec-lmtt-10'>help()</span>, <span class='ec-lmtt-10'>inspect</span>, and other
familiar tools to explore Jac modules and their contents. Error messages and stack traces
reference your original Jac source locations, maintaining the debugging experience you
expect.
</p>
<h3 class='sectionHead' id='jac-and-python-are-friends-no-need-to-choose'><span class='titlemark'>2.2   </span> <a id='x1-130002.2'></a>Jac and Python are Friends (no need to choose)</h3>
<!-- l. 153 --><p class='noindent'>The relationship between Jac and Python transcends typical language interoperability. Rather
than viewing them as separate languages that need to communicate, think of Jac as Python with
enhanced expressive power. This fundamental unity manifests in practical ways that eliminate the
friction typically associated with polyglot development.
</p><!-- l. 155 --><p class='noindent'>Jac and Python interoperate seamlessly because they share the same runtime, object model, and
execution semantics. Unlike languages that bolt on a foreign function interface or require complex
marshaling between different memory representations, Jac is natively Python: the output is pure


Python modules with a thin, principled runtime library written in pure Python. This runtime
library doesn’t introduce a new virtual machine or execution model—it simply provides a small set
of primitives needed to realize Jac-specific semantics like object-spatial operations and walker
protocols.
</p><!-- l. 157 --><p class='noindent'>This deep integration means:
</p>
     <ul class='itemize1'>
     <li class='itemize'>You can import Jac modules from Python with familiar syntax. (thanks to PEP 302)
     </li>
     <li class='itemize'>You can import Python modules from Jac with familiar syntax.
     </li>
     <li class='itemize'>You can embed native Python blocks directly inside Jac files for specialized needs.
     </li>
     <li class='itemize'>You can emit pure Python from any Jac program and import it from Python code
     without glue.
     </li>
     <li class='itemize'>Library elements that the Jac transpiler would generate (e.g., decorators and helper
     classes) are regular Python artifacts you can use directly in any Python code. (That
     is if for some reason you wanted to avoid using Jac’s language syntax but still wanted
     to use Jac’s semantics as a python library.)</li></ul>
<!-- l. 167 --><p class='noindent'>Each of these capabilities opens up different integration strategies. You might start by writing new
modules in Jac while keeping your existing Python codebase intact. Or you might identify
architectural components that would benefit from Jac’s abstractions and gradually migrate them.
You could even use Jac as a design language, prototyping architectures in Jac and then generating
Python for production deployment. The choice is yours, and you can change strategies as your
needs evolve.
</p><!-- l. 169 --><p class='noindent'>
</p>


<h4 class='subsectionHead' id='jac-in-your-python-codebase'><span class='titlemark'>2.2.1   </span> <a id='x1-140002.2.1'></a>Jac in your Python Codebase</h4>
<!-- l. 171 --><p class='noindent'>Integrating Jac modules into existing Python projects requires minimal setup. The key insight is
that Jac modules become Python modules at runtime, making them indistinguishable from native
Python code to the rest of your application. This seamless integration is possible because Jac
leverages Python’s import hook mechanism (PEP 302) to intercept import statements and
transparently compile Jac source files.
</p><!-- l. 173 --><p class='noindent'>Jac modules are importable from Python like regular modules. When you import <span class='ec-lmtt-10'>jaclang</span>, it
installs a meta importer so that <span class='ec-lmtt-10'>.jac </span>files can be loaded natively by Python’s import system. This
meta importer integrates with Python’s import machinery at a fundamental level, ensuring that
all import-related features work as expected: relative imports, package structures, namespace
packages, and even import-time side effects.
</p><!-- l. 175 --><p class='noindent'>
</p>
<h5 class='subsubsectionHead' id='native-import-recommended'><span class='titlemark'>2.2.1.1   </span> <a id='x1-150002.2.1.1'></a>Native import (recommended)</h5>
<!-- l. 177 --><p class='noindent'>The simplest and most Pythonic approach uses standard import statements after enabling Jac
support:
</p>
<!-- l. 179 -->

 <pre class='lstlisting' id='listing-3'><span class='label'><a id='x1-15001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>jaclang</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>enable .jac imports</span>
</span><span class='label'><a id='x1-15002r2'></a><span class='ec-lmr-5'>2</span></span>
<span class='label'><a id='x1-15003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>If your project has a package "app/" with a Jac module app/logic.jac</span>
</span><span class='label'><a id='x1-15004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>app</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>logic</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>loads app/logic.jac</span>
</span><span class='label'><a id='x1-15005r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-15006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Use exported classes/functions from the Jac module as usual</span>
</span><span class='label'><a id='x1-15007r7'></a><span class='ec-lmr-5'>7</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>app</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>logic</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>__name__</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span></pre>

<!-- l. 189 --><p class='noindent'>This approach requires no changes to your existing import statements or project structure. Once
<span class='ec-lmtt-10'>jaclang </span>is imported, the Python interpreter treats <span class='ec-lmtt-10'>.jac </span>files as first-class modules. Your IDE’s
autocomplete, type checking, and refactoring tools continue to work, though they may need
plugins to fully understand Jac syntax within <span class='ec-lmtt-10'>.jac </span>files.
</p>
<div class='tcolorbox nerd' id='tcolobox-2'>
<div class='tcolorbox-title'>


<!-- l. 193 --><p class='noindent'>Nerd Alert 2</p></div>
<div class='tcolorbox-content'><!-- l. 192 --><p class='noindent'><span class='ec-lmbx-10'>How native </span><span class='ec-lmtk-10'>.jac </span><span class='ec-lmbx-10'>import works (PEP 302)   </span>This feature takes advantage of Python’s
elegant, extensible import machinery that is realized through PEP 302’s import hook
model. Importing <span class='ec-lmtt-10'>jaclang </span>registers a meta path finder on <span class='ec-lmtt-10'>sys.meta_path </span>that recognizes
modules resolving to <span class='ec-lmtt-10'>.jac </span>sources and provides a <span class='ec-lmtt-10'>ModuleSpec </span>with a custom loader. That
loader resolves the <span class='ec-lmtt-10'>.jac </span>file using Python’s normal package rules, parses it to a Jac AST,
transpiles to a Python <span class='ec-lmtt-10'>ast.AST</span>, compiles the AST to a code object via the CPython
compiler, creates a module object while setting <span class='ec-lmtt-10'>__file__</span>, <span class='ec-lmtt-10'>__package__</span>, <span class='ec-lmtt-10'>__loader__</span>,
and  <span class='ec-lmtt-10'>__spec__</span>,  executes  the  code  object  in  the  module’s  namespace,  and  installs  the
module into <span class='ec-lmtt-10'>sys.modules</span>. This adheres to PEP 302’s import hook model and PEP 451’s
<span class='ec-lmtt-10'>ModuleSpec </span>refinement, so relative imports, packages and namespace packages, caching
in <span class='ec-lmtt-10'>__pycache__/</span>, and reload semantics behave exactly like any Python module; caches
are invalidated when the <span class='ec-lmtt-10'>.jac </span>source changes, and if a request isn’t for <span class='ec-lmtt-10'>.jac </span>the finder
simply defers to the rest of <span class='ec-lmtt-10'>sys.meta_path</span>. </p>
</div>
</div>
<!-- l. 195 --><p class='noindent'>
</p>
<h5 class='subsubsectionHead' id='programmatic-import-explicit-control'><span class='titlemark'>2.2.1.2   </span> <a id='x1-160002.2.1.2'></a>Programmatic import (explicit control)</h5>
<!-- l. 197 --><p class='noindent'>For scenarios requiring finer control over the import process—such as dynamically loading
modules, handling multiple versions, or implementing custom resolution logic—use the Jac
API:
</p>
<!-- l. 199 -->

 <pre class='lstlisting' id='listing-4'><span class='label'><a id='x1-16001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>from</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>jaclang</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>JacMachine</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>as</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Jac</span></span>
<span class='label'><a id='x1-16002r2'></a><span class='ec-lmr-5'>2</span></span>
<span class='label'><a id='x1-16003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Import a Jac module by name relative to a base path (dir or __file__)</span>
</span><span class='label'><a id='x1-16004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>mod</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Jac</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>jac_import</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>target</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>hello_world</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>base_path</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>__file__</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span>
<span class='label'><a id='x1-16005r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-16006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Work with exported archetypes (nodes, edges, walkers) and functions</span>
</span><span class='label'><a id='x1-16007r7'></a><span class='ec-lmr-5'>7</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>dir</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>mod</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span></pre>

<!-- l. 209 --><p class='noindent'>This programmatic approach provides additional capabilities beyond standard imports.
You can specify custom search paths, control compilation options, and even modify
the transpilation process for specific modules. This level of control proves valuable in
complex deployment scenarios or when building development tools that work with Jac
code.
</p><!-- l. 211 --><p class='noindent'>Notes: </p>
     <ul class='itemize1'>
     <li class='itemize'><span class='ec-lmtt-10'>target </span>is the module name without <span class='ec-lmtt-10'>.jac</span>; <span class='ec-lmtt-10'>base_path </span>is a directory or file path used
     to resolve relative imports.
     </li>
     <li class='itemize'>You can also import specific items with Python imports from Jac packages, e.g., <span class='ec-lmtt-10'>from


     mypkg.mymod import MyWalker </span>once the meta importer is active.</li></ul>
<!-- l. 217 --><p class='noindent'>The import system also handles edge cases gracefully. If a Jac module has compilation errors, you
get standard Python <span class='ec-lmtt-10'>SyntaxError </span>exceptions with proper line numbers. If a Jac module depends
on Python packages that aren’t installed, you get normal <span class='ec-lmtt-10'>ImportError </span>exceptions. This
consistency means your existing error handling and logging infrastructure works without
modification.
</p><!-- l. 219 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='python-in-your-jac-codebase'><span class='titlemark'>2.2.2   </span> <a id='x1-170002.2.2'></a>Python in your Jac Codebase</h4>
<!-- l. 221 --><p class='noindent'>From Jac’s perspective, Python modules are just modules. The import syntax in Jac intentionally
mirrors Python’s with minor enhancements for clarity and convenience. This symmetry means
Python developers can immediately understand and write import statements in Jac without
learning new concepts.
</p><!-- l. 223 --><p class='noindent'>Import Python packages and symbols directly from Jac using familiar syntax. Non-<span class='ec-lmtt-10'>.jac </span>imports
are forwarded to Python’s importer, ensuring that all Python packages—whether from the
standard library, third-party packages from PyPI, or your own internal modules—work identically
in Jac code.

</p>
 <!-- l. 225 --><pre class='listings' id='listing-5'><span class='label'><a id='x1-17001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>whole-module and aliased imports</span>
</span><span class='label'><a id='x1-17002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>math</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-17003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>datetime</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>as</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>dt</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-17004r4'></a><span class='ec-lmr-5'>4</span></span>
<span class='label'><a id='x1-17005r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>selective imports with braces</span>
</span><span class='label'><a id='x1-17006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>from</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>typing</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Optional</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Tuple</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>};</span>
</span><span class='label'><a id='x1-17007r7'></a><span class='ec-lmr-5'>7</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>from</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>math</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>sqrt</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>as</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>square_root</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>};</span>
</span><span class='label'><a id='x1-17008r8'></a><span class='ec-lmr-5'>8</span></span>
<span class='label'><a id='x1-17009r9'></a><span class='ec-lmr-5'>9</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>include-style import (bring public names into scope)</span>
</span><span class='label'><a id='x1-17010r10'></a><span class='ec-lmr-5'>10</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>include</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>os</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>path</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-17011r11'></a><span class='ec-lmr-5'>11</span></span>
<span class='label'><a id='x1-17012r12'></a><span class='ec-lmr-5'>12</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-17013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>square_root</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(16)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-17014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>dt</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>datetime</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>now</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-17015r15'></a><span class='ec-lmr-5'>15</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-17016r16'></a><span class='ec-lmr-5'>16</span></span></pre>
<!-- l. 243 --><p class='noindent'>The brace syntax for selective imports provides a cleaner alternative to Python’s comma-separated
imports, especially when importing multiple symbols. The <span class='ec-lmtt-10'>include </span>statement offers functionality
similar to Python’s <span class='ec-lmtt-10'>from module import * </span>but with better semantics and tooling support. These
syntactic improvements maintain full compatibility with Python’s import semantics while
providing clearer intent and better readability.
</p><!-- l. 245 --><p class='noindent'>Module resolution mirrors Python’s rules with support for relative paths and package layouts; Jac
detects <span class='ec-lmtt-10'>.jac </span>vs Python modules automatically. The import system respects <span class='ec-lmtt-10'>PYTHONPATH</span>, virtual
environments, and package installations, ensuring that your dependency management tools and
workflows continue to function normally. Whether you use pip, poetry, conda, or custom package
management, Jac code has access to the same packages as Python code in the same
environment.
</p><!-- l. 247 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='jac-as-a-python-library'><span class='titlemark'>2.2.3   </span> <a id='x1-180002.2.3'></a>Jac as a Python Library</h4>


<!-- l. 249 --><p class='noindent'>One of Jac’s most powerful features is that its runtime semantics are accessible from pure Python.
This means you can adopt Jac’s architectural patterns and abstractions without changing your file
extensions or build processes. This capability proves invaluable for teams that want to experiment
with Jac’s concepts or need to maintain compatibility with tools that don’t yet support <span class='ec-lmtt-10'>.jac</span>
files.
</p><!-- l. 251 --><p class='noindent'>You can use Jac’s runtime primitives from pure Python—no Jac syntax required. Define
archetypes by subclassing Jac’s base classes and annotate abilities with decorators provided by the
API. This approach gives you access to Jac’s semantic model while writing what looks like
idiomatic Python code:
</p>
<!-- l. 253 -->

 <pre class='lstlisting' id='listing-6'><span class='label'><a id='x1-18001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>from</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>jaclang</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>JacMachineInterface</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>as</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>_</span></span>
<span class='label'><a id='x1-18002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>from</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>jaclang</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>runtimelib</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>archetype</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>NodeArchetype</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>WalkerArchetype</span></span>
<span class='label'><a id='x1-18003r3'></a><span class='ec-lmr-5'>3</span></span>
<span class='label'><a id='x1-18004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>class</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>NodeArchetype</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-18005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span>
<span class='label'><a id='x1-18006r6'></a><span class='ec-lmr-5'>6</span></span>
<span class='label'><a id='x1-18007r7'></a><span class='ec-lmr-5'>7</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>class</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Greeter</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>WalkerArchetype</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-18008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>@_</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>entry</span></span>
<span class='label'><a id='x1-18009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>start</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>n</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-18010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>f</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Hello</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>n</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}!</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span>
<span class='label'><a id='x1-18011r11'></a><span class='ec-lmr-5'>11</span></span>
<span class='label'><a id='x1-18012r12'></a><span class='ec-lmr-5'>12</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>__name__</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>==</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>__main__</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-18013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>alice</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Alice</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span>
<span class='label'><a id='x1-18014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>walker</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Greeter</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span>
<span class='label'><a id='x1-18015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>_</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>spawn</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>walker</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>alice</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span></pre>

<!-- l. 271 --><p class='noindent'>This example demonstrates several key concepts. The <span class='ec-lmtt-10'>NodeArchetype </span>and <span class='ec-lmtt-10'>WalkerArchetype</span>
base classes provide the foundation for Jac’s object-spatial programming model. The
<span class='ec-lmtt-10'>@_.entry </span>decorator marks methods that execute when a walker enters a node. The <span class='ec-lmtt-10'>_.spawn</span>
function initiates a walker’s traversal from a specific node. These primitives compose
naturally, allowing you to build complex graph-based architectures using familiar Python
syntax.
</p><!-- l. 273 --><p class='noindent'>Highlights: </p>
     <ul class='itemize1'>
     <li class='itemize'>Subclass <span class='ec-lmtt-10'>NodeArchetype</span>, <span class='ec-lmtt-10'>EdgeArchetype</span>, and <span class='ec-lmtt-10'>WalkerArchetype </span>to model graphs
     and behaviors.
     </li>
     <li class='itemize'>Use <span class='ec-lmtt-10'>@_.entry </span>and <span class='ec-lmtt-10'>@_.exit </span>to declare abilities; utilities like <span class='ec-lmtt-10'>_.connect</span>, <span class='ec-lmtt-10'>_.spawn</span>,
     <span class='ec-lmtt-10'>_.report</span>, and <span class='ec-lmtt-10'>_.printgraph </span>are available.
     </li>
     <li class='itemize'>Mix this with programmatic imports to load Jac modules and interact with them from
     Python.</li></ul>
<!-- l. 280 --><p class='noindent'>This library approach enables gradual adoption strategies. You might start by using Jac’s
archetypes in a single module, then expand to more modules as your team becomes
comfortable with the concepts. You can even mix styles within a single module—using Jac’s
runtime for architectural components while keeping business logic in traditional Python
classes.


</p><!-- l. 282 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='inlining-python-code-inside-jac-code'><span class='titlemark'>2.2.4   </span> <a id='x1-190002.2.4'></a>Inlining Python code inside Jac code</h4>
<!-- l. 284 --><p class='noindent'>Sometimes you need to drop down to raw Python within a Jac module. Perhaps you’re working
with a Python library that uses advanced metaprogramming, or you need to use Python syntax
that doesn’t have a Jac equivalent yet, or you’re gradually migrating Python code to Jac. For
these scenarios, Jac provides the <span class='ec-lmtt-10'>::py:: </span>directive.
</p><!-- l. 286 --><p class='noindent'>For specialized needs, embed native Python directly within a Jac module using the <span class='ec-lmtt-10'>::py::</span>
directive. The enclosed block is treated as Python and shares the module’s namespace. This isn’t a
separate execution context or a foreign function interface—it’s Python code that becomes part of
the compiled module:

</p>
 <!-- l. 288 --><pre class='listings' id='listing-7'><span class='label'><a id='x1-19001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-19002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>hello</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-19003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-19004r4'></a><span class='ec-lmr-5'>4</span></span>
<span class='label'><a id='x1-19005r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>::</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>py</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>::</span></span>
<span class='label'><a id='x1-19006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>foo</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-19007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>world</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span>
<span class='label'><a id='x1-19008r8'></a><span class='ec-lmr-5'>8</span></span>
<span class='label'><a id='x1-19009r9'></a><span class='ec-lmr-5'>9</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>foo</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span>
<span class='label'><a id='x1-19010r10'></a><span class='ec-lmr-5'>10</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>::</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>py</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>::</span></span>

<span class='label'><a id='x1-19011r11'></a><span class='ec-lmr-5'>11</span></span></pre>
<!-- l. 301 --><p class='noindent'>The Python block has full access to the module’s namespace. Functions, classes, and variables
defined in Jac code are visible to the Python block, and vice versa. This bidirectional visibility
enables powerful integration patterns. You can define a class structure in Jac and add
method implementations in Python, or define Python helper functions that Jac code
calls.
</p><!-- l. 303 --><p class='noindent'>Inline Python is ideal for leveraging Python-only libraries, quick interop, or migrating code
incrementally. Symbols defined in a Python block are available to subsequent Jac code in the same
module. This feature proves particularly valuable when working with Python libraries that use
decorators, context managers, or other Python-specific constructs that might not have direct Jac
equivalents. Rather than waiting for Jac to support every Python feature, you can use Python
blocks as escape hatches while keeping the majority of your code in Jac’s more expressive
syntax.
</p><!-- l. 305 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='a-well-organized-codebase'><span class='titlemark'>2.3   </span> <a id='x1-200002.3'></a>A Well Organized Codebase</h3>
<!-- l. 307 --><p class='noindent'>Software architecture isn’t just about runtime behavior—it’s equally about code organization,
maintainability, and team collaboration. Jac recognizes this by providing first-class support for
separating interfaces from implementations, enabling codebases that scale both technically and
organizationally.


</p><!-- l. 309 --><p class='noindent'>Jac encourages clean separation between interfaces and implementations through its
declaration syntax and compiler support. You declare the shape of your module (functions,
objects, enums, tests) once, and you may provide the bodies elsewhere. This separation
isn’t merely a convention—the compiler understands and enforces it, automatically
discovering implementation files and ensuring consistency between declarations and
implementations.
</p><!-- l. 311 --><p class='noindent'>This is similar in spirit to “header files” in languages like C++ or interface definitions in languages
like TypeScript, but without manual include wiring or duplicate maintenance burden—the
compiler discovers implementation bodies automatically when you follow conventions. The
conventions are designed to be intuitive and flexible, supporting both small projects
where everything lives in one file and large enterprise codebases with thousands of
modules.
</p><!-- l. 313 --><p class='noindent'>
</p>
<h4 class='likesubsectionHead' id='separate-interface-and-implementation'><a id='x1-21000'></a>Separate interface and implementation</h4>
<!-- l. 315 --><p class='noindent'>The declaration syntax is concise and focuses on the what rather than the how:

</p>
 <!-- l. 317 --><pre class='listings' id='listing-8'><span class='label'><a id='x1-21001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>foo</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-21002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>obj</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>vehicle</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-21003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>enum</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Size</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-21004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>test</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>check_vehicle</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-21005r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-21006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>implementations can live in the same file or elsewhere</span>
</span><span class='label'><a id='x1-21007r7'></a><span class='ec-lmr-5'>7</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>impl</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>foo</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Hello</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>}</span>
</span><span class='label'><a id='x1-21008r8'></a><span class='ec-lmr-5'>8</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>impl</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>vehicle</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Car</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>}</span>
</span><span class='label'><a id='x1-21009r9'></a><span class='ec-lmr-5'>9</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>impl</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Size</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Small</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=1,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Medium</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=2,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Large</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=3</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>}</span>

</span><span class='label'><a id='x1-21010r10'></a><span class='ec-lmr-5'>10</span></span></pre>
<!-- l. 329 --><p class='noindent'>The <span class='ec-lmtt-10'>can </span>keyword declares that a function exists without providing its body. The <span class='ec-lmtt-10'>obj </span>and
<span class='ec-lmtt-10'>enum </span>keywords similarly declare types without their full definitions. The <span class='ec-lmtt-10'>test </span>keyword
declares test cases that can be implemented separately. This declaration syntax serves
multiple purposes: it documents the module’s API, enables forward references, and
allows parallel development where different team members can work on implementations
independently.
</p><!-- l. 331 --><p class='noindent'>
</p>
<h4 class='likesubsectionHead' id='keep-implementations-beside-or-under-modules'><a id='x1-22000'></a>Keep implementations beside or under modules</h4>
<!-- l. 333 --><p class='noindent'>Jac supports three project layouts that cater to different scales and preferences. Each
layout has its strengths, and you can even mix approaches within a single project—using
simple layouts for stable modules and more structured layouts for actively developed
components.
</p><!-- l. 335 --><p class='noindent'>Three project layouts are common and supported:
</p><!-- l. 337 --><p class='noindent'><span class='ec-lmbx-10'>1) Same file as the declarations</span>


</p><!-- l. 339 --><p class='noindent'>Simple modules can keep declarations and bodies together for local readability. This approach
works well for small utilities, single-purpose modules, and exploratory code where the interface
and implementation are tightly coupled.
</p><!-- l. 341 --><p class='noindent'><span class='ec-lmbx-10'>2) Sibling “.impl.jac” and “.test.jac” files</span>
</p>
<!-- l. 343 -->

 <pre class='lstlisting' id='listing-9'><span class='label'><a id='x1-22001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>base</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>/</span></span>
<span class='label'><a id='x1-22002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>|-</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>main</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>jac</span></span>
<span class='label'><a id='x1-22003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>|-</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>main</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>impl</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>jac</span></span>
<span class='label'><a id='x1-22004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>|-</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>main</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>test</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>jac</span></span></pre>

<!-- l. 350 --><p class='noindent'>The compiler automatically discovers these sibling files. No extra imports are required. This layout
provides a good balance between organization and simplicity. The main file contains the public
interface, the implementation file contains the bodies, and the test file contains test cases. The
naming convention makes the relationships clear, and tools can easily identify which files belong
together.
</p><!-- l. 352 --><p class='noindent'><span class='ec-lmbx-10'>3) Dedicated “.impl/” and “.test/” folders</span>
</p>
<!-- l. 354 -->

 <pre class='lstlisting' id='listing-10'><span class='label'><a id='x1-22005r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>base</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>/</span></span>
<span class='label'><a id='x1-22006r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>|-</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>main</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>jac</span></span>
<span class='label'><a id='x1-22007r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>|-</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>main</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>impl</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>/</span></span>
<span class='label'><a id='x1-22008r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>|</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>|-</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>foo</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>impl</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>jac</span></span>
<span class='label'><a id='x1-22009r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>|</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>|-</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>vehicle</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>impl</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>jac</span></span>
<span class='label'><a id='x1-22010r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>|</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>|-</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>size</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>impl</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>jac</span></span>
<span class='label'><a id='x1-22011r7'></a><span class='ec-lmr-5'>7</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>|-</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>main</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>test</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>/</span></span>
<span class='label'><a id='x1-22012r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>  </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>|-</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>check_vehicle</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>test</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>jac</span></span></pre>

<!-- l. 365 --><p class='noindent'>This layout scales well for large codebases where modules have many implementations or where
different team members own different components. You can even place all implementations across
the project under a single top-level directory (for example, <span class='ec-lmtt-10'>src/impl/</span>) while keeping
your public interfaces minimal and readable. This extreme separation works well for
projects where the interface stability is paramount and implementation details change
frequently.
</p><!-- l. 367 --><p class='noindent'>
</p>
<h4 class='likesubsectionHead' id='why-this-matters'><a id='x1-23000'></a>Why this matters</h4>
<!-- l. 369 --><p class='noindent'>The benefits of this organizational approach compound over time and team size:
</p>
     <ul class='itemize1'>
     <li class='itemize'><span class='ec-lmbx-10'>Interface clarity</span>: Readers see what a module exposes without implementation noise.


     </li>
     <li class='itemize'><span class='ec-lmbx-10'>Team  velocity</span>:  Different  contributors  can  implement  features  without  touching
     interface files.
     </li>
     <li class='itemize'><span class='ec-lmbx-10'>Test hygiene</span>: Tests live beside modules but away from interfaces.
     </li>
     <li class='itemize'><span class='ec-lmbx-10'>Refactoring  safety</span>:  Changing  implementations  rarely  changes  consumer-facing
     interfaces.</li></ul>
<!-- l. 378 --><p class='noindent'>Interface clarity is particularly valuable for large teams. When you’re trying to understand how to
use a module, you can read its interface file without being distracted by implementation details.
The interface file becomes living documentation that’s guaranteed to be accurate because the
compiler verifies that implementations match declarations.
</p><!-- l. 380 --><p class='noindent'>Team velocity improves because developers can work in parallel without merge conflicts. One
developer can design the interface while another implements it. A third developer can write tests
against the interface before the implementation is complete. This parallelization is
especially valuable in microservice architectures or when building libraries with stable
APIs.
</p><!-- l. 382 --><p class='noindent'>Test hygiene benefits from having a designated place for tests that’s separate from both interfaces
and implementations. Tests can be comprehensive without cluttering the main codebase,
and test utilities can be shared within test directories without leaking into production
code.
</p><!-- l. 384 --><p class='noindent'>Refactoring safety comes from the compiler’s enforcement of the interface-implementation
contract. If you change a function signature in the interface, the compiler will flag all
implementations that need updating. If you add a new required method to an object, the compiler
ensures all implementations provide it. This safety net enables confident refactoring even in large
codebases.
</p><!-- l. 386 --><p class='noindent'>
</p>
<h4 class='likesubsectionHead' id='a-quick-checklist'><a id='x1-24000'></a>A quick checklist</h4>
<!-- l. 388 --><p class='noindent'>When organizing a Jac project, follow these guidelines to maximize clarity and maintainability:
</p>


     <ul class='itemize1'>
     <li class='itemize'>Declare public functions, objects, enums, and tests in your <span class='ec-lmtt-10'>.jac </span>module.
     </li>
     <li class='itemize'>Place bodies in <span class='ec-lmtt-10'>.impl.jac </span>siblings or an <span class='ec-lmtt-10'>.impl/ </span>folder.
     </li>
     <li class='itemize'>Keep tests in <span class='ec-lmtt-10'>.test.jac </span>files or a <span class='ec-lmtt-10'>.test/ </span>folder.
     </li>
     <li class='itemize'>Import Python libraries directly from Jac where helpful; prefer Jac idioms elsewhere.
     </li>
     <li class='itemize'>Emit pure Python when distributing to Python-only consumers.</li></ul>
<!-- l. 398 --><p class='noindent'>These guidelines are defaults, not rigid rules. Small scripts might keep everything in a single file.
Prototype code might mix declarations and implementations freely. The key is choosing the
organization that matches your project’s needs and your team’s workflow. Jac’s flexibility means
you can start simple and add structure as your project grows, without rewriting existing
code.
</p><!-- l. 400 --><p class='noindent'>The ability to emit pure Python deserves special emphasis. When you need to share code with
teams that haven’t adopted Jac, or when deploying to environments where Jac isn’t available, you
can compile your Jac modules to standalone Python files. These generated files are readable,
maintainable Python code that preserves your program’s behavior while removing the Jac
dependency. This capability provides an escape hatch that reduces the risk of adopting
Jac—you’re never locked in.
</p><!-- l. 402 --><p class='noindent'>Through this compilation model, interoperability design, and organizational philosophy, Jac
demonstrates that enhancing a language doesn’t require abandoning its ecosystem.
Instead, Jac shows how a language can evolve to meet new challenges while preserving the
foundations that made it successful. For Python developers, this means you can adopt Jac’s
powerful abstractions without leaving behind your tools, libraries, or hard-won Python
expertise.


</p>
<h2 class='chapterHead' id='from-pythonic-to-jactastic-the-basics-of-jac'><span class='titlemark'>Chapter 3</span><br /><a id='x1-250003'></a>From Python-ic to Jac-tastic: The Basics of Jac</h2>
<!-- l. 3 --><p class='noindent'>Coming from the previous chapter where we saw how Jac cleanly supersets Python and compiles
to native Python, this chapter focuses on what it feels like to write everyday Jac. We
walk through modules, definitions, control flow, and core expressions with side-by-side
intuitions for Python developers. This chapter focuses on the key differences between
Jac and Python, anything not covered can be assumed to work exactly the same as in
Python.
</p><!-- l. 5 --><p class='noindent'>The transition from Python to Jac is deliberately gentle. Rather than forcing you to learn an
entirely new syntax, Jac preserves Python’s expressiveness while introducing clearer structural
elements and more powerful abstractions. The most visible changes—braces for blocks and
semicolons for statements—might seem like a step backward to Python purists, but
they serve a crucial purpose: they make program structure explicit and unambiguous,
enabling better tooling, clearer error messages, and more sophisticated compile-time
analysis.
</p><!-- l. 7 --><p class='noindent'>As you work through this chapter, you’ll notice that Jac doesn’t just change syntax for the sake of
being different. Each modification addresses a specific pain point in Python development. Type
annotations become mandatory where they matter most, eliminating entire classes of runtime
errors. Module initialization becomes explicit through entry blocks, solving Python’s sometimes
confusing top-level execution model. New operators like pipes and concurrent execution primitives
make common patterns more expressive. By the end of this chapter, you’ll understand not just
how to write Jac, but why these design choices lead to more maintainable and scalable
code.
</p>
<h3 class='sectionHead' id='what-a-jac-module-looks-like'><span class='titlemark'>3.1   </span> <a id='x1-260003.1'></a>What a Jac Module Looks Like</h3>
<!-- l. 11 --><p class='noindent'>Understanding Jac’s module structure is your gateway to productive Jac development. While the
surface syntax differs from Python with its braces and semicolons, the underlying module model
remains familiar. Jac modules are still files, imports still create a module graph, and execution still
follows predictable rules. What changes is how you express these concepts—more explicitly, more
clearly, and with better separation of concerns.
</p><!-- l. 13 --><p class='noindent'>A minimal Jac module uses familiar Pythonic elements with a few clear syntactic conventions
(braces for blocks, semicolons to terminate statements), plus Jac’s entry block for top-level
execution. Let’s examine a complete module that demonstrates the key elements:

</p>
 <!-- l. 15 --><pre class='listings' id='listing-11'><span class='label'><a id='x1-26001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>An</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>optional</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>module</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>docstring</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span>
<span class='label'><a id='x1-26002r2'></a><span class='ec-lmr-5'>2</span></span>
<span class='label'><a id='x1-26003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>math</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-26004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>datetime</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>as</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>dt</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-26005r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>from</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>typing</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Optional</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Tuple</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>};</span>
</span><span class='label'><a id='x1-26006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>include</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>os</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>path</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-26007r7'></a><span class='ec-lmr-5'>7</span></span>
<span class='label'><a id='x1-26008r8'></a><span class='ec-lmr-5'>8</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>let</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>priv</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>mode</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>development</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-26009r9'></a><span class='ec-lmr-5'>9</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>glob</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>pub</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>API_VERSION</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>2.1</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-26010r10'></a><span class='ec-lmr-5'>10</span></span>
<span class='label'><a id='x1-26011r11'></a><span class='ec-lmr-5'>11</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>circle_area</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>r</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-26012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>math</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>pi</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>*</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>r</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>*</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>r</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-26013r13'></a><span class='ec-lmr-5'>13</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-26014r14'></a><span class='ec-lmr-5'>14</span></span>
<span class='label'><a id='x1-26015r15'></a><span class='ec-lmr-5'>15</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>obj</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-26016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Alice</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ts1-lmtti10-x-x-70'>`</span><span class='ec-lmtti-10x-x-70'>has</span><span class='ts1-lmtti10-x-x-70'>` </span><span class='ec-lmtti-10x-x-70'>fields must be typed</span>
</span><span class='label'><a id='x1-26017r17'></a><span class='ec-lmr-5'>17</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-26018r18'></a><span class='ec-lmr-5'>18</span></span>
<span class='label'><a id='x1-26019r19'></a><span class='ec-lmr-5'>19</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>enum</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Size</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Small</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=1,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Medium</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=2,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Large</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=3</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>}</span>
</span><span class='label'><a id='x1-26020r20'></a><span class='ec-lmr-5'>20</span></span>
<span class='label'><a id='x1-26021r21'></a><span class='ec-lmr-5'>21</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-26022r22'></a><span class='ec-lmr-5'>22</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>who</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-26023r23'></a><span class='ec-lmr-5'>23</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>f</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Hello</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>who</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}!</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Today</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>is</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>dt</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>datetime</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>now</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>date</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-26024r24'></a><span class='ec-lmr-5'>24</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>circle_area</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(3.0)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-26025r25'></a><span class='ec-lmr-5'>25</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>f</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Mode</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>={</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>mode</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>},</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>API</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>={</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>API_VERSION</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-26026r26'></a><span class='ec-lmr-5'>26</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-26027r27'></a><span class='ec-lmr-5'>27</span></span></pre>
<!-- l. 44 --><p class='noindent'>This module showcases several fundamental Jac concepts. The docstring works exactly as in


Python, becoming the module’s <span class='ec-lmtt-10'>__doc__ </span>attribute. Imports demonstrate Jac’s enhanced syntax
while maintaining Python’s semantics. The <span class='ec-lmtt-10'>let </span>and <span class='ec-lmtt-10'>glob </span>declarations introduce module-level
constants and variables with explicit visibility modifiers. Functions, objects, and enums show Jac’s
approach to defining types and behavior. Finally, the <span class='ec-lmtt-10'>with entry </span>block contains the executable
code that runs when the module loads.
</p><!-- l. 46 --><p class='noindent'>The structure enforces a clean separation between declaration and execution. In Python, top-level
code executes as the module loads, which can lead to initialization order problems and makes it
harder to reason about when side effects occur. Jac’s entry blocks make execution points
explicit—you always know exactly what code runs at module load time and in what
order.
</p><!-- l. 48 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='whitespace-and-comments'><span class='titlemark'>3.1.1   </span> <a id='x1-270003.1.1'></a>Whitespace and Comments</h4>
<!-- l. 50 --><p class='noindent'>The shift from significant whitespace to explicit delimiters represents one of Jac’s most visible
departures from Python. This change isn’t arbitrary—it enables more robust tooling, clearer error
recovery, and easier code generation while maintaining readability through conventional
indentation.
</p><!-- l. 52 --><p class='noindent'>Jac uses braces to delimit blocks and semicolons to terminate statements. Indentation is for
readability, not structure. Two comment forms are supported:
</p>
     <ul class='itemize1'>
     <li class='itemize'>Line comments start with <span class='ec-lmtt-10'># </span>and continue to end of line
     </li>
     <li class='itemize'>Block comments are delimited with <span class='ec-lmtt-10'>#* </span>and <span class='ec-lmtt-10'>*#</span></li></ul>

 <!-- l. 59 --><pre class='listings' id='listing-12'><span class='label'><a id='x1-27001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>This is a line comment</span>
</span><span class='label'><a id='x1-27002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>*</span></span>
<span class='label'><a id='x1-27003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>This</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>is</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>a</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>block</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>comment</span></span>
<span class='label'><a id='x1-27004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>spanning</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>multiple</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>lines</span></span>
<span class='label'><a id='x1-27005r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>*</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span>
<span class='label'><a id='x1-27006r6'></a><span class='ec-lmr-5'>6</span></span>
<span class='label'><a id='x1-27007r7'></a><span class='ec-lmr-5'>7</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-27008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>1 &lt; 2 {</span>
</span><span class='label'><a id='x1-27009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>yes</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>trailing comment</span>
</span><span class='label'><a id='x1-27010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-27011r11'></a><span class='ec-lmr-5'>11</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-27012r12'></a><span class='ec-lmr-5'>12</span></span></pre>
<!-- l. 73 --><p class='noindent'>The addition of block comments addresses a long-standing Python limitation. While Python
developers have learned to work around the lack of multi-line comments using triple-quoted strings
or editor features, having true block comments makes it easier to temporarily disable code
sections, write longer explanations, or include structured documentation that shouldn’t become
docstrings.


</p><!-- l. 75 --><p class='noindent'>Modules may optionally begin with a top-level string literal which acts like a module docstring
and is preserved through compilation. This docstring becomes accessible through the
module’s <span class='ec-lmtt-10'>__doc__ </span>attribute, maintaining compatibility with Python documentation
tools.
</p><!-- l. 77 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='import-and-include-statements'><span class='titlemark'>3.1.2   </span> <a id='x1-280003.1.2'></a>Import and Include Statements</h4>
<!-- l. 79 --><p class='noindent'>Jac’s import system extends Python’s with ergonomic improvements that address common
pain points. The brace syntax for selective imports eliminates ambiguity in complex
import lists, while the ‘include‘ statement provides a cleaner alternative to wildcard
imports.
</p><!-- l. 81 --><p class='noindent'>Imports mirror Python with a couple of ergonomic enhancements. You can import whole modules,
alias them, selectively import symbols with braces, or <span class='uline'>include</span> all public names into the current
scope:

</p>
 <!-- l. 83 --><pre class='listings' id='listing-13'><span class='label'><a id='x1-28001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>whole-module and aliased imports</span>
</span><span class='label'><a id='x1-28002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>math</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-28003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>datetime</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>as</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>dt</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-28004r4'></a><span class='ec-lmr-5'>4</span></span>
<span class='label'><a id='x1-28005r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>selective imports with braces (from one module)</span>
</span><span class='label'><a id='x1-28006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>from</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>typing</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Optional</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Tuple</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>};</span>
</span><span class='label'><a id='x1-28007r7'></a><span class='ec-lmr-5'>7</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>from</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>math</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>sqrt</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>as</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>square_root</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>};</span>
</span><span class='label'><a id='x1-28008r8'></a><span class='ec-lmr-5'>8</span></span>
<span class='label'><a id='x1-28009r9'></a><span class='ec-lmr-5'>9</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>include-style import (bring public names into scope)</span>
</span><span class='label'><a id='x1-28010r10'></a><span class='ec-lmr-5'>10</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>include</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>os</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>path</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-28011r11'></a><span class='ec-lmr-5'>11</span></span>
<span class='label'><a id='x1-28012r12'></a><span class='ec-lmr-5'>12</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>relative selective import ("from ..pkg import {...}")</span>
</span><span class='label'><a id='x1-28013r13'></a><span class='ec-lmr-5'>13</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>from</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>..</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>utils</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>helper</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>};</span>

</span><span class='label'><a id='x1-28014r14'></a><span class='ec-lmr-5'>14</span></span></pre>
<!-- l. 99 --><p class='noindent'>The brace syntax for selective imports solves several problems with Python’s comma-separated
lists. It’s visually clearer, especially with many imports. It eliminates the ambiguity between
importing multiple items and importing a single item with multiple names. It also works better
with automatic formatting tools, which can more easily manage additions and deletions to the
import list.
</p><!-- l. 101 --><p class='noindent'>Jac automatically resolves whether a target is a Jac or Python module and uses the right
importer. The brace form avoids ambiguities of comma-heavy import lists, and ‘include‘ behaves
like Python’s ‘from target import *‘, while still cooperating with tooling. The ‘include‘ statement
makes the intent explicit—you’re deliberately bringing all public names into scope, not
accidentally using a wildcard import. This clarity helps both human readers and static analysis
tools understand the code’s dependencies.
</p><!-- l. 103 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='explicit-module-initialization-with-entry-blocks'><span class='titlemark'>3.1.3   </span> <a id='x1-290003.1.3'></a>Explicit Module Initialization with Entry Blocks</h4>
<!-- l. 105 --><p class='noindent'>Python’s module loading behavior can be confusing: code at the module level runs
immediately when imported, while the <span class='obeylines-h'><code class='verb'>if __name__ == "__main__"</code></span> idiom creates
script-specific behavior. This mixing of declarations and executable code makes it unclear


what runs when, especially in complex import scenarios. Jac separates these concerns
explicitly.
</p><!-- l. 107 --><p class='noindent'>Instead of scattered top-level statements, Jac uses <span class='obeylines-h'><code class='verb'>with entry { ... }</code></span> blocks to clearly mark
executable code. This makes module initialization explicit and intentional—you can immediately
see what code will run during import versus what runs only when the module is executed as a
script.

</p>
 <!-- l. 109 --><pre class='listings' id='listing-14'><span class='label'><a id='x1-29001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-29002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Module</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>initializing</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>...</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-29003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>setup_logging</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-29004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-29005r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-29006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>__main__</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-29007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Running</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>as</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>main</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>script</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-29008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>main</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-29009r9'></a><span class='ec-lmr-5'>9</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-29010r10'></a><span class='ec-lmr-5'>10</span></span></pre>
<!-- l. 121 --><p class='noindent'>Unnamed entry blocks compile to top-level Python statements (running on import), while named
blocks like <span class='obeylines-h'><code class='verb'>entry:__main__</code></span> become the familiar <span class='obeylines-h'><code class='verb'>if __name__ == "__main__":</code></span> guard. The above
compiles to:
</p>
<!-- l. 123 -->

 <pre class='lstlisting' id='listing-15'><span class='label'><a id='x1-29011r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>from: with entry { ... }</span>
</span><span class='label'><a id='x1-29012r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Module</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>initializing</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>...</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span>
<span class='label'><a id='x1-29013r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>setup_logging</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span>
<span class='label'><a id='x1-29014r4'></a><span class='ec-lmr-5'>4</span></span>
<span class='label'><a id='x1-29015r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>from: with entry:__main__ { ... }</span>
</span><span class='label'><a id='x1-29016r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>__name__</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>==</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>__main__</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-29017r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Running</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>as</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>main</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>script</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span>
<span class='label'><a id='x1-29018r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>main</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span></pre>

<!-- l. 134 --><p class='noindent'>This explicit separation eliminates guesswork about execution timing. Multiple entry blocks
execute in source order, letting you organize initialization into logical phases without relying on
statement positioning.
</p>
<!-- l. 136 --><p class='noindent'><span class='paragraphHead' id='explicit-modulelevel-variables'><a id='x1-30000'></a><span class='ec-lmbx-10'>Explicit Module-Level Variables</span></span>
</p><!-- l. 138 --><p class='noindent'>The same principle of explicitness extends to module-level variables. Rather than implicit globals
created by assignment, Jac requires explicit declaration with <span class='obeylines-h'><code class='verb'>let</code></span> (immutable) or <span class='obeylines-h'><code class='verb'>glob</code></span> (mutable),
making scope and mutability clear at first glance.

</p>
 <!-- l. 140 --><pre class='listings' id='listing-16'><span class='label'><a id='x1-30001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>let</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>priv</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>config</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>development</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>module-private constant</span>
</span><span class='label'><a id='x1-30002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>glob</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>pub</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>shared_counter</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 0;</span> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>public mutable global</span>
</span><span class='label'><a id='x1-30003r3'></a><span class='ec-lmr-5'>3</span></span>
<span class='label'><a id='x1-30004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-30005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>f</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Config</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>config</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-30006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>shared_counter</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+= 1;</span>
</span><span class='label'><a id='x1-30007r7'></a><span class='ec-lmr-5'>7</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-30008r8'></a><span class='ec-lmr-5'>8</span></span></pre>
<!-- l. 150 --><p class='noindent'>The <span class='obeylines-h'><code class='verb'>let</code></span> keyword creates immutable bindings (the name cannot be reassigned), while <span class='obeylines-h'><code class='verb'>glob</code></span> creates
mutable module-level variables. Access modifiers (<span class='obeylines-h'><code class='verb'>:priv</code></span>, <span class='obeylines-h'><code class='verb'>:protect</code></span>, <span class='obeylines-h'><code class='verb'>:pub</code></span>) control visibility across
module boundaries, making the intended scope explicit rather than relying on naming
conventions.


</p>
<!-- l. 152 --><p class='noindent'><span class='paragraphHead' id='entry-blocks-in-class-bodies'><a id='x1-31000'></a><span class='ec-lmbx-10'>Entry Blocks in Class Bodies</span></span>
</p><!-- l. 154 --><p class='noindent'>Entry blocks also work within class and object definitions, providing explicit initialization that
runs when the class is defined—not when instances are created:

</p>
 <!-- l. 156 --><pre class='listings' id='listing-17'><span class='label'><a id='x1-31001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>obj</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Registry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-31002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>static</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>let</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>priv</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>instances</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [];</span>
</span><span class='label'><a id='x1-31003r3'></a><span class='ec-lmr-5'>3</span></span>
<span class='label'><a id='x1-31004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>static</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>register</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>instance</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>None</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-31005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Registry</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>instances</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>append</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>instance</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-31006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-31007r7'></a><span class='ec-lmr-5'>7</span></span>
<span class='label'><a id='x1-31008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-31009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Runs when the class is defined, not instantiated</span>
</span><span class='label'><a id='x1-31010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Registry</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>class</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>loaded</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-31011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>setup_registry_hooks</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-31012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-31013r13'></a><span class='ec-lmr-5'>13</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-31014r14'></a><span class='ec-lmr-5'>14</span></span>
<span class='label'><a id='x1-31015r15'></a><span class='ec-lmr-5'>15</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>class</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>DataModel</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-31016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-31017r17'></a><span class='ec-lmr-5'>17</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>DataModel</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>class</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>initialized</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-31018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-31019r19'></a><span class='ec-lmr-5'>19</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-31020r20'></a><span class='ec-lmr-5'>20</span></span></pre>
<!-- l. 178 --><p class='noindent'>This explicit model eliminates the subtle differences between Python’s class body execution and
instance initialization. Code in entry blocks clearly runs at class definition time, while regular
methods run on instance creation or method calls.
</p><!-- l. 180 --><p class='noindent'>The key insight is separation of concerns: <span class='obeylines-h'><code class='verb'>let</code></span>/<span class='obeylines-h'><code class='verb'>glob</code></span> declare names and their properties, while
<span class='obeylines-h'><code class='verb'>with entry</code></span> contains executable initialization code. This prevents the common Python pitfall
where declaration order affects execution behavior, making module loading predictable and
explicit.
</p><!-- l. 182 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='functions-classes-and-enums'><span class='titlemark'>3.2   </span> <a id='x1-320003.2'></a>Functions, Classes, and Enums</h3>
<!-- l. 184 --><p class='noindent'>Jac’s approach to defining functions, classes, and enumerations balances familiarity for Python
developers with improvements in type safety and expressiveness. The requirement for type
annotations isn’t just about catching errors—it’s about making code’s intent explicit and enabling
better tooling and optimization.
</p><!-- l. 186 --><p class='noindent'>Jac supports traditional functions, Python-like classes via the ‘obj‘ archetype, and enumerations.
Signatures are explicit and type-annotated. This explicitness serves multiple purposes: it
documents intent, enables better IDE support, allows for more aggressive optimization, and
catches entire categories of errors at compile time rather than runtime.
</p>
<!-- l. 188 --><p class='noindent'><span class='paragraphHead' id='functions'><a id='x1-33000'></a><span class='ec-lmbx-10'>Functions</span></span>
</p><!-- l. 190 --><p class='noindent'>The mandate for type annotations in Jac functions reflects a fundamental philosophy: explicit is
better than implicit when it comes to interfaces. While Python’s gradual typing allows you to add
types incrementally, Jac requires them upfront for function parameters, ensuring that every
function’s contract is clear.


</p><!-- l. 192 --><p class='noindent'>Jac is type-safety first: <span class='ec-lmbx-10'>parameter type annotations are required </span>for all functions (including
methods and abilities), and return types (inferred to be None when omitted):

</p>
 <!-- l. 194 --><pre class='listings' id='listing-18'><span class='label'><a id='x1-33001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>distance</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x1</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>y1</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x2</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>y2</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-33002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>((</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x2</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x1</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>** 2 + (</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>y2</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>y1</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>** 2) ** 0.5;</span>
</span><span class='label'><a id='x1-33003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-33004r4'></a><span class='ec-lmr-5'>4</span></span></pre>
<!-- l. 200 --><p class='noindent'>This requirement might seem restrictive to Python developers accustomed to duck
typing, but it provides immense value in practice. Type annotations serve as inline
documentation, enable better IDE autocomplete and refactoring, catch errors earlier in the
development cycle, and allow the Jac compiler to generate more efficient code. The
return type can be omitted (defaulting to ‘None‘) but specifying it explicitly improves
clarity.
</p>
<!-- l. 202 --><p class='noindent'><span class='paragraphHead' id='objects-classes'><a id='x1-34000'></a><span class='ec-lmbx-10'>Objects (classes)</span></span>
</p><!-- l. 204 --><p class='noindent'>Jac provides two ways to define classes, each optimized for different use cases. The ‘obj‘ keyword
creates dataclass-like structures with automatic initialization and comparison methods. The
traditional ‘class‘ keyword provides full control over class behavior, matching Python’s semantics
exactly.
</p><!-- l. 206 --><p class='noindent'>Use ‘obj‘ to define classes; fields are declared with ‘has‘ and <span class='ec-lmbx-10'>must include a type</span>. Defaults
(when provided) should be compatible with the declared type. Methods use ‘def‘. Access control
modifiers ‘:priv‘, ‘:protect‘, and ‘:pub‘ are available, and ‘static‘ methods work as you’d
expect:

</p>
 <!-- l. 208 --><pre class='listings' id='listing-19'><span class='label'><a id='x1-34001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>obj</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Calculator</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-34002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>scale</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 1.0;</span>
</span><span class='label'><a id='x1-34003r3'></a><span class='ec-lmr-5'>3</span></span>
<span class='label'><a id='x1-34004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>pub</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>add</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>a</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>b</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-34005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>a</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>b</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-34006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-34007r7'></a><span class='ec-lmr-5'>7</span></span>
<span class='label'><a id='x1-34008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>static</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>mul</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>a</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>b</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-34009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>a</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>*</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>b</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-34010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-34011r11'></a><span class='ec-lmr-5'>11</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-34012r12'></a><span class='ec-lmr-5'>12</span></span></pre>
<!-- l. 222 --><p class='noindent'>The ‘obj‘ archetype represents Jac’s opinion on how most classes should be structured: fields are
declared upfront with types, initialization is automatic based on these declarations, and common
methods like equality comparison are synthesized. This approach eliminates boilerplate while
ensuring consistency. The ‘has‘ keyword explicitly marks instance fields, making the class
structure immediately apparent.
</p>
<!-- l. 224 --><p class='noindent'><span class='paragraphHead' id='traditional-classes'><a id='x1-35000'></a><span class='ec-lmbx-10'>Traditional classes</span></span>
</p><!-- l. 226 --><p class='noindent'>Sometimes you need the full flexibility of Python’s class model—custom initialization logic,
dynamic attribute creation, or complex inheritance patterns. For these cases, Jac provides the


‘class‘ keyword with traditional Python semantics.
</p><!-- l. 228 --><p class='noindent'>If you want familiar Python class semantics without Jac’s field machinery, use ‘class‘. You
typically initialize attributes in an explicit constructor and manage methods exactly like in
Python:

</p>
 <!-- l. 230 --><pre class='listings' id='listing-20'><span class='label'><a id='x1-35001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>class</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Counter</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-35002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>__init__</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>start</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 0) {</span>
</span><span class='label'><a id='x1-35003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>value</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>start</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-35004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-35005r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-35006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>inc</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>None</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>value</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+= 1; }</span>
</span><span class='label'><a id='x1-35007r7'></a><span class='ec-lmr-5'>7</span></span>
<span class='label'><a id='x1-35008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>read</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>value</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>}</span>
</span><span class='label'><a id='x1-35009r9'></a><span class='ec-lmr-5'>9</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-35010r10'></a><span class='ec-lmr-5'>10</span></span></pre>
<!-- l. 242 --><p class='noindent'>This mirrors traditional Python classes: no automatic field generation, no synthesized constructor
beyond what you write, and full control over attribute creation and invariants. Choose ‘class‘
when you need this control—for example, when implementing complex initialization
logic, maintaining invariants between multiple fields, or working with metaclasses and
descriptors.
</p>
<!-- l. 244 --><p class='noindent'><span class='paragraphHead' id='obj-has-dataclasslike-semantics'><a id='x1-36000'></a><span class='ec-lmbx-10'>‘obj‘ has dataclass-like semantics</span></span>
</p><!-- l. 246 --><p class='noindent'>Understanding how ‘obj‘ translates to Python helps clarify when to use it versus traditional
classes. The ‘obj‘ archetype isn’t just syntactic sugar—it represents a different philosophy about
class design, one that favors explicit structure and automatic behavior generation.
</p><!-- l. 248 --><p class='noindent'>By contrast, ‘obj‘ favors declarative data modeling. Fields declared with ‘has‘ carry types
and defaults; Jac synthesizes the usual constructor and comparison/representation
behavior. During the Python AST emission phase, an ‘obj‘ is lowered to a Python
class decorated like a ‘dataclasses.dataclass‘, with annotated attributes and default
values:

</p>
 <!-- l. 250 --><pre class='listings' id='listing-21'><span class='label'><a id='x1-36001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>obj</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-36002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Alice</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-36003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>age</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 0;</span>
</span><span class='label'><a id='x1-36004r4'></a><span class='ec-lmr-5'>4</span></span>
<span class='label'><a id='x1-36005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>label</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>f</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>({</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>age</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>})</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>}</span>
</span><span class='label'><a id='x1-36006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-36007r7'></a><span class='ec-lmr-5'>7</span></span></pre>
<!-- l. 259 --><p class='noindent'>An illustrative Python shape of the generated class (simplified):
</p>
<!-- l. 261 -->

 <pre class='lstlisting' id='listing-22'><span class='label'><a id='x1-36008r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>from</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>dataclasses</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>dataclass</span></span>
<span class='label'><a id='x1-36009r2'></a><span class='ec-lmr-5'>2</span></span>
<span class='label'><a id='x1-36010r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>@dataclass</span></span>
<span class='label'><a id='x1-36011r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>class</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-36012r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Alice</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span>
<span class='label'><a id='x1-36013r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>age</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 0</span>
</span><span class='label'><a id='x1-36014r7'></a><span class='ec-lmr-5'>7</span></span>
<span class='label'><a id='x1-36015r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>label</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-36016r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>f</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>({</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>age</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>})</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span></pre>

<!-- l. 273 --><p class='noindent'>Notes: </p>
     <ul class='itemize1'>
     <li class='itemize'>‘has‘  fields  become  annotated  attributes  with  defaults;  Jac  emits  the  appropriate
     dataclass decorator in the Python AST.


     </li>
     <li class='itemize'>Instance methods in ‘obj‘ are regular methods; ‘static def‘ lowers to ‘@staticmethod‘.
     </li>
     <li class='itemize'>Choose ‘class‘ when you want raw Python-class control; choose ‘obj‘ when you want
     concise, dataclass-style data modeling with stronger type intent.</li></ul>
<!-- l. 280 --><p class='noindent'>The ‘obj‘ approach encourages thinking about classes as structured data with attached behavior,
rather than as arbitrary collections of attributes and methods. This mental model aligns
well with modern software design practices and makes code easier to understand and
maintain.
</p><!-- l. 282 --><p class='noindent'>Abstract declarations use ‘abs‘ and can be implemented later (often in ‘impl‘ blocks or
subclasses):

</p>
 <!-- l. 284 --><pre class='listings' id='listing-23'><span class='label'><a id='x1-36017r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>obj</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Shape</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-36018r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>area</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>abs</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-36019r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-36020r4'></a><span class='ec-lmr-5'>4</span></span>
<span class='label'><a id='x1-36021r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>obj</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Rectangle</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Shape</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-36022r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>width</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-36023r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>height</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-36024r8'></a><span class='ec-lmr-5'>8</span></span>
<span class='label'><a id='x1-36025r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>area</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>width</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>*</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>height</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>}</span>
</span><span class='label'><a id='x1-36026r10'></a><span class='ec-lmr-5'>10</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-36027r11'></a><span class='ec-lmr-5'>11</span></span></pre>
<!-- l. 297 --><p class='noindent'>Abstract methods in Jac work similarly to Python’s ‘abc.abstractmethod‘, but with cleaner
syntax. The ‘abs‘ keyword marks a method as abstract, requiring concrete implementation in
subclasses. This provides compile-time checking of interface compliance, catching errors that
would only appear at runtime in Python.
</p>
<!-- l. 299 --><p class='noindent'><span class='paragraphHead' id='enumerations'><a id='x1-37000'></a><span class='ec-lmbx-10'>Enumerations</span></span>
</p><!-- l. 301 --><p class='noindent'>Enumerations in Jac provide a type-safe way to represent fixed sets of values. They compile to
Python’s ‘enum.Enum‘, ensuring compatibility with existing code while providing cleaner syntax
and better type checking.
</p><!-- l. 303 --><p class='noindent'>Enumerations behave like Python’s ‘enum.Enum‘, with simple declarations and optional
implementation blocks for behavior:

</p>
 <!-- l. 305 --><pre class='listings' id='listing-24'><span class='label'><a id='x1-37001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>enum</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Color</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>RED</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=1,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>GREEN</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=2,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>BLUE</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>}</span>
</span><span class='label'><a id='x1-37002r2'></a><span class='ec-lmr-5'>2</span></span>
<span class='label'><a id='x1-37003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>enum</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Day</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-37004r4'></a><span class='ec-lmr-5'>4</span></span>
<span class='label'><a id='x1-37005r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>impl</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Day</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-37006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>MON</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=1,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>TUE</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=2,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>WED</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=3,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>THU</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=4,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>FRI</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=5,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>SAT</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=6,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>SUN</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=7,</span></span>
<span class='label'><a id='x1-37007r7'></a><span class='ec-lmr-5'>7</span></span>
<span class='label'><a id='x1-37008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>is_weekend</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>bool</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Day</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>SAT</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Day</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>SUN</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>}</span>
</span><span class='label'><a id='x1-37009r9'></a><span class='ec-lmr-5'>9</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-37010r10'></a><span class='ec-lmr-5'>10</span></span></pre>
<!-- l. 317 --><p class='noindent'>The ability to separate enum declaration from implementation follows Jac’s general pattern of
separating interface from implementation. You can declare that an enum exists, then provide its
values and methods in an implementation block. This separation is particularly valuable in
large codebases where you want to define interfaces in one place and implementations
elsewhere.


</p>
<!-- l. 319 --><p class='noindent'><span class='paragraphHead' id='a-note-on-abilities'><a id='x1-38000'></a><span class='ec-lmbx-10'>A note on abilities</span></span>
</p><!-- l. 321 --><p class='noindent'>While not the focus of this basics chapter, Jac also provides object–spatial abilities with ‘can‘,
which execute in response to spatial events (e.g., walker entry/exit on nodes). We’ll revisit this
paradigm in later chapters. These abilities represent one of Jac’s most innovative features,
enabling reactive programming patterns that are difficult to express in traditional object-oriented
languages.
</p><!-- l. 323 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='loops-conditionals-and-lambdas'><span class='titlemark'>3.3   </span> <a id='x1-390003.3'></a>Loops, Conditionals, and Lambdas</h3>
<!-- l. 325 --><p class='noindent'>Control flow in Jac follows Python’s semantics while adopting more conventional syntax. The use
of braces instead of indentation might initially feel foreign to Python developers, but it provides
advantages in terms of clarity, tooling, and error recovery.
</p>
<!-- l. 327 --><p class='noindent'><span class='paragraphHead' id='conditionals'><a id='x1-40000'></a><span class='ec-lmbx-10'>Conditionals</span></span>
</p><!-- l. 329 --><p class='noindent'>Jac’s conditional statements work exactly like Python’s, just with explicit block delimiters. The
boolean operators (‘and‘, ‘or‘, ‘not‘) and comparison operators remain unchanged, preserving
Python’s expressive condition syntax.
</p><!-- l. 331 --><p class='noindent'>Jac uses Pythonic boolean operators with explicit blocks:

</p>
 <!-- l. 333 --><pre class='listings' id='listing-25'><span class='label'><a id='x1-40001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>score</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&gt;= 90 {</span>
</span><span class='label'><a id='x1-40002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>grade</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>A</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-40003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>elif</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>score</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&gt;= 80 {</span>
</span><span class='label'><a id='x1-40004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>grade</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>B</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-40005r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>else</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-40006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>grade</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>C</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-40007r7'></a><span class='ec-lmr-5'>7</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-40008r8'></a><span class='ec-lmr-5'>8</span></span></pre>
<!-- l. 343 --><p class='noindent'>The explicit blocks eliminate ambiguity about which statements belong to which condition,
especially in complex nested structures. This clarity becomes particularly valuable when
refactoring code or when multiple developers work on the same codebase.


</p>
<!-- l. 345 --><p class='noindent'><span class='paragraphHead' id='forin-and-fortoby-loops'><a id='x1-41000'></a><span class='ec-lmbx-10'>For-in and for-to-by loops</span></span>
</p><!-- l. 347 --><p class='noindent'>Jac provides two loop forms: the familiar ‘for-in‘ loop for iteration and the ‘for-to-by‘ loop for
explicit counter control. The latter provides a more readable alternative to ‘range()‘ for simple
counting loops.
</p><!-- l. 349 --><p class='noindent'>Iterate over iterables using ‘for x in xs  ... ‘, or use the explicit counter form ‘for init to condition
by increment  ... ‘:

</p>
 <!-- l. 351 --><pre class='listings' id='listing-26'><span class='label'><a id='x1-41001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>ch</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>abc</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>ch</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>}</span>
</span><span class='label'><a id='x1-41002r2'></a><span class='ec-lmr-5'>2</span></span>
<span class='label'><a id='x1-41003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>i</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>range</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(3)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-41004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>i</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>0,1,2</span>
</span><span class='label'><a id='x1-41005r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-41006r6'></a><span class='ec-lmr-5'>6</span></span>
<span class='label'><a id='x1-41007r7'></a><span class='ec-lmr-5'>7</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>i</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=0</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>to</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>i</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>&lt;3</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>i</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>+=1</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-41008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>i</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-41009r9'></a><span class='ec-lmr-5'>9</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-41010r10'></a><span class='ec-lmr-5'>10</span></span></pre>
<!-- l. 363 --><p class='noindent'>The ‘for-to-by‘ syntax makes the loop’s behavior explicit: initialization, termination condition, and
increment are all visible at the loop header. This form is particularly useful for loops that don’t
follow the simple "count from 0 to n-1" pattern, eliminating the need to decode complex ‘range()‘
calls.
</p><!-- l. 365 --><p class='noindent'>Asynchronous iteration mirrors Python:

</p>
 <!-- l. 367 --><pre class='listings' id='listing-27'><span class='label'><a id='x1-41011r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>async</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>item</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>stream</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-41012r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>await</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>consume</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>item</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-41013r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-41014r4'></a><span class='ec-lmr-5'>4</span></span></pre>
<!-- l. 373 --><p class='noindent'>Async iteration in Jac works identically to Python, using the same event loop and coroutine
mechanisms. This compatibility ensures that Jac code can seamlessly work with Python’s
extensive async ecosystem.
</p>
<!-- l. 375 --><p class='noindent'><span class='paragraphHead' id='lambdas'><a id='x1-42000'></a><span class='ec-lmbx-10'>Lambdas</span></span>
</p><!-- l. 377 --><p class='noindent'>Lambdas in Jac maintain Python’s single-expression limitation while requiring type
annotations for parameters. This requirement ensures that lambdas are as type-safe as regular
functions.
</p><!-- l. 379 --><p class='noindent'>Lambdas are single-expression and <span class='ec-lmbx-10'>must annotate all parameters with types</span>. They’re great
for functional-style helpers; return types are inferred from the body expression:

</p>
 <!-- l. 381 --><pre class='listings' id='listing-28'><span class='label'><a id='x1-42001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>square</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>lambda</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>:</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>*</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-42002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>combine</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>lambda</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>a</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>b</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>:</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>a</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>b</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-42003r3'></a><span class='ec-lmr-5'>3</span></span>
<span class='label'><a id='x1-42004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>nums</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [1, 2, 3, 4, 5];</span>
</span><span class='label'><a id='x1-42005r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>evens</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>filter</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>lambda</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>:</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>% 2 == 0,</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>nums</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>

<span class='label'><a id='x1-42006r6'></a><span class='ec-lmr-5'>6</span></span></pre>
<!-- l. 389 --><p class='noindent'>The type annotation syntax for lambdas might seem verbose compared to Python, but it provides
the same benefits as typed functions: better error detection, clearer intent, and improved tooling


support. The return type is inferred from the expression, maintaining some of the conciseness that
makes lambdas useful.
</p><!-- l. 391 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='operators-and-expressions'><span class='titlemark'>3.4   </span> <a id='x1-430003.4'></a>Operators and Expressions</h3>
<!-- l. 393 --><p class='noindent'>Jac extends Python’s expression syntax with new operators that address common patterns in
modern software development. These additions don’t replace Python’s operators but augment
them with higher-level constructs that make certain patterns more expressive.
</p><!-- l. 395 --><p class='noindent'>Jac’s expression grammar extends Python’s with a few extras. The high-level precedence
is conditional &gt; lambda &gt; concurrency (flow/wait) &gt; walrus &gt; pipes &gt; bitwise &gt;
logical/compare &gt; arithmetic &gt; connect &gt; atom. Understanding this precedence is crucial
for writing correct Jac code, especially when combining multiple operators in a single
expression.
</p>
<!-- l. 397 --><p class='noindent'><span class='paragraphHead' id='assignments-and-annotations'><a id='x1-44000'></a><span class='ec-lmbx-10'>Assignments and annotations</span></span>
</p><!-- l. 399 --><p class='noindent'>Jac provides multiple ways to declare and assign variables, each with specific semantics. The ‘let‘
keyword creates immutable bindings, type annotations document and enforce types, and the
walrus operator enables assignment expressions.
</p><!-- l. 401 --><p class='noindent'>You can use ‘let‘ for declaration, annotate with types, and use walrus ‘:=‘ for named
expressions:

</p>
 <!-- l. 403 --><pre class='listings' id='listing-29'><span class='label'><a id='x1-44001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>let</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>count</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 0;</span>
</span><span class='label'><a id='x1-44002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>ratio</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>total</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>/</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>max</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>count</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>1);</span>
</span><span class='label'><a id='x1-44003r3'></a><span class='ec-lmr-5'>3</span></span>
<span class='label'><a id='x1-44004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>n</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>:=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>len</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>items</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&gt; 0 {</span>
</span><span class='label'><a id='x1-44005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>avg</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>sum</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>items</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>/</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>n</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-44006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-44007r7'></a><span class='ec-lmr-5'>7</span></span></pre>
<!-- l. 412 --><p class='noindent'>The ‘let‘ keyword creates an immutable binding—the variable cannot be reassigned, though
mutable objects can still be modified. This immutability by default encourages functional
programming patterns and makes code easier to reason about. Type annotations on assignments
help catch type errors early and document the expected types of variables.
</p>
<!-- l. 414 --><p class='noindent'><span class='paragraphHead' id='logical-and-comparison-operators'><a id='x1-45000'></a><span class='ec-lmbx-10'>Logical and comparison operators</span></span>


</p><!-- l. 416 --><p class='noindent'>Jac preserves Python’s rich set of logical and comparison operators, including the ability to chain
comparisons and use English-like keywords for boolean operations.
</p><!-- l. 418 --><p class='noindent'>Use ‘and‘, ‘or‘, ‘not‘, ‘in‘, ‘not in‘, ‘is‘, and ‘is not‘, with chained comparisons supported:

</p>
 <!-- l. 420 --><pre class='listings' id='listing-30'><span class='label'><a id='x1-45001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>ok</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= (0 &lt;=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&lt;= 10)</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>and</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>item</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>allowed</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>

<span class='label'><a id='x1-45002r2'></a><span class='ec-lmr-5'>2</span></span></pre>
<!-- l. 424 --><p class='noindent'>Chained comparisons remain one of Python’s most elegant features, and Jac preserves them
unchanged. The ability to write ‘0 &lt;= x &lt;= 10‘ instead of ‘0 &lt;= x and x &lt;= 10‘ makes
mathematical conditions more readable and less error-prone.
</p>
<!-- l. 426 --><p class='noindent'><span class='paragraphHead' id='pipe-operators'><a id='x1-46000'></a><span class='ec-lmbx-10'>Pipe operators</span></span>
</p><!-- l. 428 --><p class='noindent'>The pipe operators represent one of Jac’s most useful additions for functional programming
patterns. They allow you to chain operations in a natural left-to-right or right-to-left flow, making
data transformation pipelines more readable.
</p><!-- l. 430 --><p class='noindent'>Pipe an expression forward or backward through call sites using ‘|&gt;‘ and ‘&lt;|‘:

</p>
 <!-- l. 432 --><pre class='listings' id='listing-31'><span class='label'><a id='x1-46001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>result</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>data</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>|&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>normalize</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>|&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>transform</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>|&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>summarize</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-46002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>final</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>render</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&lt;|</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>format</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&lt;|</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>result</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>

<span class='label'><a id='x1-46003r3'></a><span class='ec-lmr-5'>3</span></span></pre>
<!-- l. 437 --><p class='noindent'>Forward pipes (‘|&gt;‘) pass the left operand as the first argument to the right operand, enabling
Unix-pipe-like composition. Backward pipes (‘&lt;|‘) work in reverse, useful when you want to write
the operations in the order they’ll execute but still maintain a pipeline style. These operators
eliminate the need for deeply nested function calls or intermediate variables in data processing
code.
</p>
<!-- l. 439 --><p class='noindent'><span class='paragraphHead' id='fstrings'><a id='x1-47000'></a><span class='ec-lmbx-10'>F-strings</span></span>
</p><!-- l. 441 --><p class='noindent'>Formatted string literals work exactly as in Python, providing a powerful and readable way to
construct strings with embedded expressions.
</p><!-- l. 443 --><p class='noindent'>Formatted string literals are fully supported, including format specs:

</p>
 <!-- l. 445 --><pre class='listings' id='listing-32'><span class='label'><a id='x1-47001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Alice</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>score</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 92.5;</span>
</span><span class='label'><a id='x1-47002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>msg</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>f</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Hello</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Score</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>={</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>score</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>:.1</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>f</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>

<span class='label'><a id='x1-47003r3'></a><span class='ec-lmr-5'>3</span></span></pre>


<!-- l. 450 --><p class='noindent'>F-strings in Jac support all of Python’s formatting mini-language, including width specifications,
alignment, number formatting, and custom format specifiers. This compatibility ensures that
string formatting code ports directly from Python without modification.
</p><!-- l. 452 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='concurrency-with-flow-and-wait'><span class='titlemark'>3.5   </span> <a id='x1-480003.5'></a>Concurrency with <span class='ec-lmtt-10'>flow </span>and <span class='ec-lmtt-10'>wait</span></h3>
<!-- l. 454 --><p class='noindent'>One of Jac’s most practical features is its expression-level concurrency model. Rather than
requiring separate async functions or complex threading code, Jac provides simple operators that
make concurrent execution as easy as arithmetic.
</p><!-- l. 456 --><p class='noindent'>Jac offers a simple, expression-level concurrency model using the ‘flow‘ and ‘wait‘ keywords. These
integrate naturally into expressions (see precedence in this chapter’s expression section) and map
directly to Python’s standard ‘concurrent.futures‘ thread pool APIs. This design makes concurrent
programming accessible without requiring deep understanding of threading or async
programming.
</p>
<!-- l. 458 --><p class='noindent'><span class='paragraphHead' id='basics'><a id='x1-49000'></a><span class='ec-lmbx-10'>Basics</span></span>
</p><!-- l. 460 --><p class='noindent'>The ‘flow‘ and ‘wait‘ operators provide a minimal but complete interface for concurrent execution.
They handle the common case of "run this in the background and get the result later" without the
ceremony of explicit thread management.
</p>
     <ul class='itemize1'>
     <li class='itemize'>‘flow &lt;expr&gt;‘: schedule evaluation of ‘&lt;expr&gt;‘ on a background thread and return a
     task handle.
     </li>
     <li class='itemize'>‘wait  &lt;expr&gt;‘:  block  until  the  task  completes  and  return  its  result  (propagates
     exceptions).</li></ul>

 <!-- l. 467 --><pre class='listings' id='listing-33'><span class='label'><a id='x1-49001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>compute</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>*</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>}</span>
</span><span class='label'><a id='x1-49002r2'></a><span class='ec-lmr-5'>2</span></span>
<span class='label'><a id='x1-49003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-49004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtti-10x-x-70'>   </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Fire-and-join</span>
</span><span class='label'><a id='x1-49005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>t1</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>flow</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>compute</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(10)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-49006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>r1</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>wait</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>t1</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>=&gt; 100</span>
</span><span class='label'><a id='x1-49007r7'></a><span class='ec-lmr-5'>7</span></span>
<span class='label'><a id='x1-49008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtti-10x-x-70'>   </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Parallel map pattern</span>
</span><span class='label'><a id='x1-49009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>nums</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [1, 2, 3, 4, 5];</span>
</span><span class='label'><a id='x1-49010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tasks</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>flow</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>compute</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>n</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>n</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>nums</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-49011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>results</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>wait</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>t</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>t</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tasks</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-49012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>results</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>=&gt; [1, 4, 9, 16, 25]</span>
</span><span class='label'><a id='x1-49013r13'></a><span class='ec-lmr-5'>13</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-49014r14'></a><span class='ec-lmr-5'>14</span></span></pre>


<!-- l. 483 --><p class='noindent'>The parallel map pattern shown above is one of the most common uses of ‘flow‘/‘wait‘. By
creating all tasks before waiting for any of them, you ensure maximum parallelism. This
pattern is so useful that it often eliminates the need for more complex parallel processing
libraries.
</p><!-- l. 485 --><p class='noindent'>‘flow‘/‘wait‘ compose with other expressions and work anywhere an expression is valid, including
inside comprehensions and argument lists. This composability makes it easy to add concurrency to
existing code without restructuring it.
</p>
<!-- l. 487 --><p class='noindent'><span class='paragraphHead' id='under-the-hood'><a id='x1-50000'></a><span class='ec-lmbx-10'>Under the hood</span></span>
</p><!-- l. 489 --><p class='noindent'>Understanding the implementation of ‘flow‘/‘wait‘ helps you use them effectively. They’re not
magic—they’re a thin, ergonomic wrapper around Python’s robust concurrent.futures
module.
</p><!-- l. 491 --><p class='noindent'>‘flow‘ submits the expression as a callable to a shared ‘ThreadPoolExecutor‘ and returns a
‘Future‘-like handle; ‘wait‘ calls the underlying future’s ‘.result()‘ to retrieve the value. This design
makes Jac’s concurrency predictable and Python-native:
</p>
     <ul class='itemize1'>
     <li class='itemize'>Uses ‘concurrent.futures.ThreadPoolExecutor‘ under the hood.
     </li>
     <li class='itemize'>‘wait‘ mirrors ‘Future.result()‘, propagating exceptions raised in the worker.
     </li>
     <li class='itemize'>Best for I/O-bound or mixed workloads; CPU-bound speedups are subject to Python’s
     GIL like ordinary threads.</li></ul>
<!-- l. 499 --><p class='noindent'>The thread pool is shared across the entire program, with a default size based on CPU count. This
sharing prevents thread explosion when using ‘flow‘ in multiple places. Exception propagation
works naturally—if the background computation raises an exception, ‘wait‘ re-raises it in the
calling thread, preserving stack traces for debugging.
</p><!-- l. 501 --><p class='noindent'>You can freely mix ‘flow‘/‘wait‘ with asynchronous functions (‘async def‘ and ‘await‘) when
appropriate; ‘flow‘ is thread-based, while ‘await‘ is event-loop based. Choose ‘flow‘ for blocking


I/O or CPU-bound work; choose ‘async‘/‘await‘ for event-driven I/O where you need fine control
over concurrency.
</p><!-- l. 503 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='comprehensions'><span class='titlemark'>3.6   </span> <a id='x1-510003.6'></a>Comprehensions</h3>
<!-- l. 505 --><p class='noindent'>Comprehensions are one of Python’s most beloved features, and Jac not only preserves them but
extends them with new forms that address common patterns. These extensions maintain the spirit
of comprehensions—declarative, concise data transformation—while adding capabilities specific to
Jac’s programming model.
</p><!-- l. 507 --><p class='noindent'>Jac supports Python-style list, set, dict, and generator comprehensions, with optional ‘if‘ filters
and multiple ‘for‘ clauses:

</p>
 <!-- l. 509 --><pre class='listings' id='listing-34'><span class='label'><a id='x1-51001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>nums</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [1, 2, 3, 4, 5];</span>
</span><span class='label'><a id='x1-51002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>sq</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>*</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>nums</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-51003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>ev</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= {</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>nums</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>% 2 == 0};</span>
</span><span class='label'><a id='x1-51004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>mp</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= {</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>*</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>nums</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&gt; 2};</span>
</span><span class='label'><a id='x1-51005r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>gen</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= (</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>*</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>range</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(10)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>

<span class='label'><a id='x1-51006r6'></a><span class='ec-lmr-5'>6</span></span></pre>
<!-- l. 517 --><p class='noindent'>These comprehensions work exactly as in Python, including support for nested loops, multiple
conditions, and complex expressions. They compile to the same bytecode as Python
comprehensions, ensuring identical performance characteristics.
</p><!-- l. 519 --><p class='noindent'>Comprehensions naturally compose with lambdas and function calls, and they work well within
object–spatial code when iterating over collections of nodes/edges. This composability makes them
particularly valuable in Jac’s graph-based programming model, where you often need to transform
or filter collections of connected entities.
</p><!-- l. 521 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='filter-comprehensions-jac-feature'><span class='titlemark'>3.6.1   </span> <a id='x1-520003.6.1'></a>Filter comprehensions (Jac feature)</h4>
<!-- l. 523 --><p class='noindent'>Filter comprehensions provide a postfix filtering syntax that’s more readable than traditional
comprehension filters for certain patterns. They’re particularly useful when the filtering logic is
the primary operation.
</p><!-- l. 525 --><p class='noindent'>Filter comprehensions provide a concise, chainable way to select elements from any
collection-like expression. Predicates are boolean expressions evaluated against each
element:
</p>


     <ul class='itemize1'>
     <li class='itemize'>Syntax: ‘collection(?predicate1, predicate2, ...)‘
     </li>
     <li class='itemize'>Each predicate must evaluate to ‘True‘ for the element to be kept</li></ul>

 <!-- l. 532 --><pre class='listings' id='listing-35'><span class='label'><a id='x1-52001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>random</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-52002r2'></a><span class='ec-lmr-5'>2</span></span>
<span class='label'><a id='x1-52003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>obj</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>TestObj</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-52004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>random</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>randint</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(0,</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>15),</span>
</span><span class='label'><a id='x1-52005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>y</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>random</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>randint</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(0,</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>15),</span>
</span><span class='label'><a id='x1-52006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>z</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>random</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>randint</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(0,</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>15);</span>
</span><span class='label'><a id='x1-52007r7'></a><span class='ec-lmr-5'>7</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-52008r8'></a><span class='ec-lmr-5'>8</span></span>
<span class='label'><a id='x1-52009r9'></a><span class='ec-lmr-5'>9</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-52010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>random</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>seed</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(42)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-52011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>apple</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [];</span>
</span><span class='label'><a id='x1-52012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>i</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=0</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>to</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>i</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>&lt;100</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>i</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>+=1</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-52013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>apple</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>append</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>TestObj</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-52014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-52015r15'></a><span class='ec-lmr-5'>15</span></span>
<span class='label'><a id='x1-52016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtti-10x-x-70'>   </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>keep only items with 0 &lt;= x &lt;= 15 (always true in this example)</span>
</span><span class='label'><a id='x1-52017r17'></a><span class='ec-lmr-5'>17</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>apple</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&gt;= 0,</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&lt;= 15) ==</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>apple</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-52018r18'></a><span class='ec-lmr-5'>18</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-52019r19'></a><span class='ec-lmr-5'>19</span></span></pre>
<!-- l. 553 --><p class='noindent'>Notes: </p>
     <ul class='itemize1'>
     <li class='itemize'>Multiple predicates are combined with logical AND
     </li>
     <li class='itemize'>Works on any atomic chain result: lists, edge refs, call results, etc.</li></ul>
<!-- l. 559 --><p class='noindent'>Filter comprehensions shine when you need to apply multiple conditions to a collection. Instead of
writing ‘[item for item in collection if cond1(item) and cond2(item) and cond3(item)]‘, you can
write ‘collection(?cond1, cond2, cond3)‘, which is both more concise and clearer in
intent.
</p><!-- l. 561 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='assign-comprehensions-jac-feature'><span class='titlemark'>3.6.2   </span> <a id='x1-530003.6.2'></a>Assign comprehensions (Jac feature)</h4>
<!-- l. 563 --><p class='noindent'>Assign comprehensions solve a common pattern: updating multiple fields across all elements in a
collection. Rather than writing loops or map operations with side effects, assign comprehensions
provide a declarative way to express bulk updates.
</p><!-- l. 565 --><p class='noindent'>Assign (bulk-assign) comprehensions apply field assignments to each element of a collection
in-place and return the same collection reference. Useful for concise bulk updates:
</p>
     <ul class='itemize1'>
     <li class='itemize'>Syntax: ‘collection(=field1=value1, field2=value2, ...)‘


     </li>
     <li class='itemize'>Applies to every element in the target collection
     </li>
     <li class='itemize'>Supports chaining with subsequent operations</li></ul>

 <!-- l. 573 --><pre class='listings' id='listing-36'><span class='label'><a id='x1-53001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>obj</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>MyObj</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-53002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>apple</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 0,</span>
</span><span class='label'><a id='x1-53003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>banana</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 0;</span>
</span><span class='label'><a id='x1-53004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-53005r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-53006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-53007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>MyObj</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-53008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>y</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>MyObj</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-53009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>mvar</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>y</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>](=</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>apple</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=5,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>banana</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=7)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-53010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>mvar</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-53011r11'></a><span class='ec-lmr-5'>11</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-53012r12'></a><span class='ec-lmr-5'>12</span></span></pre>
<!-- l. 587 --><p class='noindent'>The comprehension returns the (mutated) collection, enabling patterns like filtering then
assigning, or vice versa, in a single readable chain. This chaining capability makes it easy to
express complex transformations as a pipeline of operations, each clearly stating its
purpose.
</p><!-- l. 589 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='tests'><span class='titlemark'>3.7   </span> <a id='x1-540003.7'></a>Tests</h3>
<!-- l. 591 --><p class='noindent'>Testing is so fundamental to modern software development that Jac makes tests first-class citizens
in the language. Rather than requiring a separate testing framework or special file naming
conventions, Jac lets you write tests directly in your modules, right next to the code they
test.
</p><!-- l. 593 --><p class='noindent'>Tests are first-class with the ‘test‘ keyword. A test is a named (or anonymous) code block. Use
assertions and helper code as usual:

</p>
 <!-- l. 595 --><pre class='listings' id='listing-37'><span class='label'><a id='x1-54001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>test</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>math_basics</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-54002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>assert</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>(2 + 2) == 4;</span>
</span><span class='label'><a id='x1-54003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>assert</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>len</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>([1,2,3])</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>== 3;</span>
</span><span class='label'><a id='x1-54004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-54005r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-54006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>test</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>anonymous test</span>
</span><span class='label'><a id='x1-54007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>i</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>i</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>range</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(3)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-54008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>assert</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>== [0,1,2];</span>
</span><span class='label'><a id='x1-54009r9'></a><span class='ec-lmr-5'>9</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-54010r10'></a><span class='ec-lmr-5'>10</span></span></pre>
<!-- l. 607 --><p class='noindent'>Tests in Jac are discovered automatically by the test runner, which finds all test blocks in your
modules. Named tests provide better error reporting and can be run selectively, while anonymous
tests are useful for quick checks or when testing generated code. The test blocks have access to the
module’s full scope, making it easy to test internal functions and classes without complex
setup.
</p><!-- l. 609 --><p class='noindent'>The integration of tests into the language itself encourages a development style where tests live
close to the code they verify. This proximity makes it more likely that tests will be written and
maintained, as they’re not hidden away in a separate test directory but are part of the module’s
definition. When you modify a function, its tests are right there, reminding you to update
them.


</p><!-- l. 611 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='inlining-python'><span class='titlemark'>3.8   </span> <a id='x1-550003.8'></a>Inlining Python</h3>
<!-- l. 613 --><p class='noindent'>Despite Jac’s comprehensive feature set, there are times when you need to drop down to raw
Python. Perhaps you’re using a library with Python-specific idioms, gradually migrating existing
code, or need access to Python features that don’t yet have Jac equivalents. The inline Python
feature provides a seamless escape hatch.
</p><!-- l. 615 --><p class='noindent'>For specialized needs, embed native Python directly using ‘::py::‘. The code shares the module’s
namespace and runs as ordinary Python:

</p>
 <!-- l. 617 --><pre class='listings' id='listing-38'><span class='label'><a id='x1-55001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-55002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>hello</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-55003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-55004r4'></a><span class='ec-lmr-5'>4</span></span>
<span class='label'><a id='x1-55005r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>::</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>py</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>::</span></span>
<span class='label'><a id='x1-55006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>foo</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-55007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>world</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span>
<span class='label'><a id='x1-55008r8'></a><span class='ec-lmr-5'>8</span></span>
<span class='label'><a id='x1-55009r9'></a><span class='ec-lmr-5'>9</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>foo</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span>
<span class='label'><a id='x1-55010r10'></a><span class='ec-lmr-5'>10</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>::</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>py</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>::</span></span>

<span class='label'><a id='x1-55011r11'></a><span class='ec-lmr-5'>11</span></span></pre>
<!-- l. 630 --><p class='noindent'>Inline Python is ideal for leveraging the broader Python ecosystem, quick interop, or incremental
migration of existing Python into Jac. The Python code executes in the same namespace
as the surrounding Jac code, meaning it can access Jac-defined variables, functions,
and classes, and vice versa. This bidirectional visibility enables powerful integration
patterns.
</p><!-- l. 632 --><p class='noindent'>Common use cases for inline Python include: </p>
     <ul class='itemize1'>
     <li class='itemize'>Using Python libraries that rely on decorators or metaclasses not yet supported in Jac
     </li>
     <li class='itemize'>Implementing performance-critical sections using Python-specific optimizations
     </li>
     <li class='itemize'>Gradually migrating Python codebases by moving code into Jac modules piece by
     piece
     </li>
     <li class='itemize'>Accessing Python standard library features that use complex runtime introspection
     </li>
     <li class='itemize'>Prototyping with Python code before converting to idiomatic Jac</li></ul>


<!-- l. 641 --><p class='noindent'>The ability to freely mix Jac and Python in the same file reduces the adoption barrier
significantly. You don’t have to convert everything at once—you can start with Jac for new code
while keeping complex existing Python logic unchanged, then gradually refactor as you become
comfortable with Jac’s idioms.


</p>
<h2 class='chapterHead' id='native-ai-integration-with-by-and-sem-keywords'><span class='titlemark'>Chapter 4</span><br /><a id='x1-560004'></a>Native AI Integration with ‘by’ and ‘sem’ Keywords</h2>
<!-- l. 3 --><p class='noindent'>While the previous chapter established Jac’s foundations as a superset of Python, this chapter
explores what truly sets Jac apart: its implementation of <span class='uline'>meaning-typed programming</span> (MTP)
through native AI integration. Rather than treating AI as an external library or service, Jac
makes AI a first-class citizen in the language itself through the ‘by‘ and ‘sem‘ keywords, which
realize the MTP paradigm by leveraging the inherent semantic richness of code to automate LLM
integration.
</p><!-- l. 5 --><p class='noindent'>This approach represents a fundamental shift from traditional prompt engineering to
meaning-typed programming. Instead of complex API calls, manual prompt crafting, and explicit
result parsing, Jac’s MTP implementation provides declarative constructs that automatically
extract semantic meaning from code structure—function names, parameter types, return types,
and contextual annotations—to generate appropriate prompts and handle AI interactions. The
‘by‘ keyword delegates implementation to AI models based on inferred intent, while the ‘sem‘
keyword provides additional semantic context that enriches the meaning available to the AI
system.
</p><!-- l. 7 --><p class='noindent'>The power of this approach becomes apparent when you consider the cognitive load reduction.
Traditional AI programming requires constant context switching between your application logic
and the mechanics of AI interaction—crafting prompts, handling API responses, parsing
unstructured output, and managing errors. Jac abstracts these concerns away, letting you
focus on what you want the AI to do rather than how to make it happen. The result is
code that reads like a specification of intent rather than a series of implementation
details.
</p><!-- l. 9 --><p class='noindent'>As you work through this chapter, you’ll discover how Jac’s AI constructs compose naturally with
all the language features you learned in the previous chapter. AI-powered functions work
seamlessly with Jac’s type system, participate in object-oriented designs, integrate with
concurrency primitives, and benefit from the same tooling and debugging support as regular code.
By the end, you’ll understand how to build AI applications that are not only powerful but also
maintainable, testable, and scalable.
</p>
<h3 class='sectionHead' id='the-by-keyword-delegating-implementation-to-ai'><span class='titlemark'>4.1   </span> <a id='x1-570004.1'></a>The ‘by’ Keyword: Delegating Implementation to AI</h3>
<!-- l. 13 --><p class='noindent'>The ‘by‘ keyword realizes the core principle of meaning-typed programming: leveraging the
semantic richness inherent in code to automate AI integration. When you append ‘by llm()‘ to a
function signature, Jac’s MTP system automatically extracts semantic meaning from the
function’s name, parameter types, return type, and surrounding context to generate appropriate
prompts for the AI model. This eliminates the need for manual prompt engineering while ensuring
the AI understands the intended functionality.


</p><!-- l. 15 --><p class='noindent'>This represents the fundamental insight of MTP: programs are written to be readable by
developers, and this same semantic richness can be automatically translated into prompts for
LLMs. The ‘by‘ keyword transforms function signatures from mere type declarations into rich
semantic specifications that AI models can interpret and implement. This shift from imperative
implementation to declarative intent opens up entirely new possibilities for rapid prototyping,
domain-specific functionality, and adaptive behavior.
</p><!-- l. 17 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='basic-function-delegation'><span class='titlemark'>4.1.1   </span> <a id='x1-580004.1.1'></a>Basic Function Delegation</h4>
<!-- l. 19 --><p class='noindent'>The simplest use of the ‘by‘ keyword transforms a function signature into an AI-powered
implementation. The AI model uses the function’s name, parameter types, return type, and any
available context to infer the intended behavior.

</p>
 <!-- l. 21 --><pre class='listings' id='listing-39'><span class='label'><a id='x1-58001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>from</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>byllm</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Model</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>}</span>
</span><span class='label'><a id='x1-58002r2'></a><span class='ec-lmr-5'>2</span></span>
<span class='label'><a id='x1-58003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>glob</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Model</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>model_name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>gpt</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>-4</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>o</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-58004r4'></a><span class='ec-lmr-5'>4</span></span>
<span class='label'><a id='x1-58005r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>translate</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>input</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>lang</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>French</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-58006r6'></a><span class='ec-lmr-5'>6</span></span>
<span class='label'><a id='x1-58007r7'></a><span class='ec-lmr-5'>7</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-58008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>translate</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>I</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>am</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>a</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>student</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>French</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>"Je suis un etudiant"</span>
</span><span class='label'><a id='x1-58009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>translate</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>I</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>am</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>a</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>student</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Spanish</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>"Soy un estudiante"</span>
</span><span class='label'><a id='x1-58010r10'></a><span class='ec-lmr-5'>10</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-58011r11'></a><span class='ec-lmr-5'>11</span></span></pre>
<!-- l. 34 --><p class='noindent'>In this example, the AI model infers from the function name ‘translate‘, the parameters ‘input‘
and ‘lang‘, and the return type ‘str‘ that this function should translate text from one language to
another. No explicit prompt engineering or response parsing is required—Jac handles the entire
interaction based on the function’s type signature.
</p><!-- l. 36 --><p class='noindent'>The power of this approach becomes evident when you consider how much boilerplate it
eliminates. Traditional AI integration would require constructing prompts, making API calls,
parsing responses, handling errors, and converting results to the appropriate types. The ‘by‘
keyword encapsulates all of this complexity behind a clean, typed interface.
</p><!-- l. 38 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='method-delegation-in-objects'><span class='titlemark'>4.1.2   </span> <a id='x1-590004.1.2'></a>Method Delegation in Objects</h4>
<!-- l. 40 --><p class='noindent'>The ‘by‘ keyword works seamlessly with Jac’s object system, allowing you to create
AI-powered methods that have access to the object’s state and context. This enables
sophisticated AI behaviors that are contextually aware of the data they’re operating
on.

</p>
 <!-- l. 42 --><pre class='listings' id='listing-40'><span class='label'><a id='x1-59001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>from</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>byllm</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Model</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>}</span>
</span><span class='label'><a id='x1-59002r2'></a><span class='ec-lmr-5'>2</span></span>
<span class='label'><a id='x1-59003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>glob</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Model</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>model_name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>gpt</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>-4</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>o</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-59004r4'></a><span class='ec-lmr-5'>4</span></span>
<span class='label'><a id='x1-59005r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>obj</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Essay</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-59006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>essay</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-59007r7'></a><span class='ec-lmr-5'>7</span></span>
<span class='label'><a id='x1-59008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>essay_judge</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>criteria</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-59009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>generate_summary</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>judgements</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>dict</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-59010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>give_grade</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>summary</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-59011r11'></a><span class='ec-lmr-5'>11</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-59012r12'></a><span class='ec-lmr-5'>12</span></span>
<span class='label'><a id='x1-59013r13'></a><span class='ec-lmr-5'>13</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-59014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>essay</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Essay</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>With</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>a</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>population</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>of</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>approximately</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>45</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>million</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>...</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-59015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>criterias</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Clarity</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Originality</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Evidence</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-59016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>judgements</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= {};</span>
</span><span class='label'><a id='x1-59017r17'></a><span class='ec-lmr-5'>17</span></span>
<span class='label'><a id='x1-59018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>criteria</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>criterias</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-59019r19'></a><span class='ec-lmr-5'>19</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>judgement</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>essay</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>essay_judge</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>criteria</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-59020r20'></a><span class='ec-lmr-5'>20</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>judgements</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>criteria</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>judgement</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-59021r21'></a><span class='ec-lmr-5'>21</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-59022r22'></a><span class='ec-lmr-5'>22</span></span>
<span class='label'><a id='x1-59023r23'></a><span class='ec-lmr-5'>23</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>summary</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>essay</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>generate_summary</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>judgements</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-59024r24'></a><span class='ec-lmr-5'>24</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>grade</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>essay</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>give_grade</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>summary</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-59025r25'></a><span class='ec-lmr-5'>25</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Grade</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>grade</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-59026r26'></a><span class='ec-lmr-5'>26</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-59027r27'></a><span class='ec-lmr-5'>27</span></span></pre>


<!-- l. 71 --><p class='noindent'>Here, the AI-powered methods have access to the essay’s content through <span class='ec-lmtt-10'>self.essay</span>, enabling
contextually relevant evaluation. The <span class='ec-lmtt-10'>essay_judge </span>method can analyze the specific essay content
against the given criteria, while <span class='ec-lmtt-10'>generate_summary </span>can synthesize multiple judgements into a
coherent assessment. This object-oriented approach to AI delegation creates natural, reusable
abstractions for complex AI workflows.
</p><!-- l. 73 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='advanced-configuration-options'><span class='titlemark'>4.1.3   </span> <a id='x1-600004.1.3'></a>Advanced Configuration Options</h4>
<!-- l. 75 --><p class='noindent'>The ‘by‘ clause accepts various configuration options that control the AI model’s behavior,
reasoning approach, and integration with external tools. These options provide fine-grained
control over the AI’s operation while maintaining the declarative simplicity of the basic
syntax.

</p>
 <!-- l. 77 --><pre class='listings' id='listing-41'><span class='label'><a id='x1-60001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>from</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>byllm</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Model</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>}</span>
</span><span class='label'><a id='x1-60002r2'></a><span class='ec-lmr-5'>2</span></span>
<span class='label'><a id='x1-60003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>glob</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Model</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>model_name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>gpt</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>-4</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>o</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>-</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>mini</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-60004r4'></a><span class='ec-lmr-5'>4</span></span>
<span class='label'><a id='x1-60005r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>enum</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Personality</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>INTROVERT</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>EXTROVERT</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>}</span>
</span><span class='label'><a id='x1-60006r6'></a><span class='ec-lmr-5'>6</span></span>
<span class='label'><a id='x1-60007r7'></a><span class='ec-lmr-5'>7</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>glob</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>personality_examples</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>dict</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Personality</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= {</span>
</span><span class='label'><a id='x1-60008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Albert</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Einstein</span></span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Personality</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>INTROVERT</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-60009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Barack</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Obama</span></span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Personality</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>EXTROVERT</span></span>
<span class='label'><a id='x1-60010r10'></a><span class='ec-lmr-5'>10</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>};</span></span>
<span class='label'><a id='x1-60011r11'></a><span class='ec-lmr-5'>11</span></span>
<span class='label'><a id='x1-60012r12'></a><span class='ec-lmr-5'>12</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_person_info</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span>
<span class='label'><a id='x1-60013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>reason</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>True</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Enable chain-of-thought reasoning</span>
</span><span class='label'><a id='x1-60014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>temperature</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=0.0,</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Deterministic output</span>
</span><span class='label'><a id='x1-60015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>incl_info</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>={</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>personality_examples</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>personality_examples</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-60016r16'></a><span class='ec-lmr-5'>16</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>

<span class='label'><a id='x1-60017r17'></a><span class='ec-lmr-5'>17</span></span></pre>
<!-- l. 96 --><p class='noindent'>The configuration options allow you to: </p>
     <ul class='itemize1'>
     <li class='itemize'>Control randomness with <span class='ec-lmtt-10'>temperature</span>
     </li>
     <li class='itemize'>Enable reasoning modes like <span class='ec-lmtt-10'>reason=True </span>or <span class='ec-lmtt-10'>method="Chain-of-Thoughts"</span>
     </li>
     <li class='itemize'>Provide additional context through <span class='ec-lmtt-10'>incl_info</span>
     </li>
     <li class='itemize'>Specify maximum iterations for reasoning processes
     </li>
     <li class='itemize'>Include external tools for the AI to use</li></ul>
<!-- l. 105 --><p class='noindent'>These options transform the simple ‘by llm()‘ clause into a powerful specification for exactly how
the AI should approach the problem, while still maintaining the clean abstraction that hides
implementation complexity.


</p><!-- l. 107 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='complex-return-types-and-structured-output'><span class='titlemark'>4.1.4   </span> <a id='x1-610004.1.4'></a>Complex Return Types and Structured Output</h4>
<!-- l. 109 --><p class='noindent'>One of Jac’s most powerful AI features is automatic handling of complex, structured return types.
When you specify that an AI-powered function should return a custom object, enum, or complex
data structure, Jac automatically handles the serialization and parsing, ensuring type safety
throughout the AI interaction.

</p>
 <!-- l. 111 --><pre class='listings' id='listing-42'><span class='label'><a id='x1-61001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>obj</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Employer</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-61002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>employer_name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-61003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>location</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-61004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-61005r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-61006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>obj</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-61007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-61008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>age</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-61009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>employer</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Employer</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-61010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>job</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-61011r11'></a><span class='ec-lmr-5'>11</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-61012r12'></a><span class='ec-lmr-5'>12</span></span>
<span class='label'><a id='x1-61013r13'></a><span class='ec-lmr-5'>13</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>generate_person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>info</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-61014r14'></a><span class='ec-lmr-5'>14</span></span>
<span class='label'><a id='x1-61015r15'></a><span class='ec-lmr-5'>15</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-61016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>person</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>generate_person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span>
<span class='label'><a id='x1-61017r17'></a><span class='ec-lmr-5'>17</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Steve</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Jobs</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>was</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>56</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>years</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>old</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>and</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>worked</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>as</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>the</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>CEO</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>of</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Apple</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Inc</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>in</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>California</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span>
<span class='label'><a id='x1-61018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-61019r19'></a><span class='ec-lmr-5'>19</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>f</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>s</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>is</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>person</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>and</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>works</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>at</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>person</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>employer</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>employer_name</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-61020r20'></a><span class='ec-lmr-5'>20</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-61021r21'></a><span class='ec-lmr-5'>21</span></span></pre>
<!-- l. 134 --><p class='noindent'>In this example, the AI model automatically extracts structured information from unstructured
text and returns a properly typed ‘Person‘ object with nested ‘Employer‘ data. Jac handles the
entire process of: </p>
     <ul class='itemize1'>
     <li class='itemize'>Communicating the expected structure to the AI model
     </li>
     <li class='itemize'>Parsing the AI’s response into the correct object types
     </li>
     <li class='itemize'>Validating that all required fields are present and correctly typed
     </li>
     <li class='itemize'>Providing meaningful error messages if parsing fails</li></ul>
<!-- l. 142 --><p class='noindent'>This structured output capability eliminates one of the biggest pain points in AI programming:
converting unstructured AI responses into structured data that your application can use
reliably.
</p><!-- l. 144 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='the-sem-keyword-semantic-annotations-and-context'><span class='titlemark'>4.2   </span> <a id='x1-620004.2'></a>The ‘sem’ Keyword: Semantic Annotations and Context</h3>


<!-- l. 146 --><p class='noindent'>While the ‘by‘ keyword handles the mechanics of AI delegation by extracting inherent semantic
meaning from code structure, the ‘sem‘ keyword extends MTP by allowing developers to provide
additional semantic context that enriches the meaning available to AI models. This addresses one
of the key challenges in meaning-typed programming: ensuring AI models have sufficient semantic
information for accurate task performance.
</p><!-- l. 148 --><p class='noindent'>The ‘sem‘ keyword represents MTP’s approach to bridging the gap between code semantics
and AI understanding. Unlike traditional comments that are ignored by the runtime,
semantic annotations become part of the program’s execution context within the MTP
system, directly influencing how AI models interpret intent and generate appropriate
responses. This creates a rich semantic environment where both implicit meaning (from
code structure) and explicit meaning (from annotations) work together to guide AI
behavior.
</p><!-- l. 150 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='function-documentation-with-semantic-context'><span class='titlemark'>4.2.1   </span> <a id='x1-630004.2.1'></a>Function Documentation with Semantic Context</h4>
<!-- l. 152 --><p class='noindent'>Semantic annotations on functions provide detailed specifications that guide AI implementation.
These annotations can include examples, constraints, behavioral requirements, and
domain-specific knowledge that helps the AI produce more accurate and contextually appropriate
results.

</p>
 <!-- l. 154 --><pre class='listings' id='listing-43'><span class='label'><a id='x1-63001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>generate_password</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-63002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>sem</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>generate_password</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>\</span></span>
<span class='label'><a id='x1-63003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Generates</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>and</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>returns</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>password</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>that</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-63004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>-</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>contain</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>at</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>least</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>8</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>characters</span></span>
<span class='label'><a id='x1-63005r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>-</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>contain</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>at</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>least</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>one</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>uppercase</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>letter</span></span>
<span class='label'><a id='x1-63006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>-</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>contain</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>at</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>least</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>one</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>lowercase</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>letter</span></span>
<span class='label'><a id='x1-63007r7'></a><span class='ec-lmr-5'>7</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>-</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>contain</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>at</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>least</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>one</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>digit</span></span>
<span class='label'><a id='x1-63008r8'></a><span class='ec-lmr-5'>8</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>-</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>contain</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>at</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>least</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>one</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>special</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>character</span></span>
<span class='label'><a id='x1-63009r9'></a><span class='ec-lmr-5'>9</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-63010r10'></a><span class='ec-lmr-5'>10</span></span>
<span class='label'><a id='x1-63011r11'></a><span class='ec-lmr-5'>11</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-63012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>password</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>generate_password</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-63013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Generated</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>password</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>password</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>R8@jL3pQ</span>
</span><span class='label'><a id='x1-63014r14'></a><span class='ec-lmr-5'>14</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-63015r15'></a><span class='ec-lmr-5'>15</span></span></pre>
<!-- l. 171 --><p class='noindent'>The semantic annotation provides explicit requirements that the AI model uses to generate
appropriate passwords. This approach is far more reliable than hoping the AI will infer
password requirements from the function name alone. The annotation becomes part of
the function’s contract, ensuring consistent behavior across different AI models and
contexts.
</p><!-- l. 173 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='data-structure-semantics'><span class='titlemark'>4.2.2   </span> <a id='x1-640004.2.2'></a>Data Structure Semantics</h4>
<!-- l. 175 --><p class='noindent'>Semantic annotations on data structures provide context about the meaning and usage of
fields, helping AI models understand the domain-specific significance of different data
elements.

</p>
 <!-- l. 177 --><pre class='listings' id='listing-44'><span class='label'><a id='x1-64001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>obj</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-64002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>full_name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-64003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>yod</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-64004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>personality</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Personality</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-64005r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-64006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>sem</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>yod</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Year</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>of</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Death</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>of</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>the</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>person</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-64007r7'></a><span class='ec-lmr-5'>7</span></span>
<span class='label'><a id='x1-64008r8'></a><span class='ec-lmr-5'>8</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>enum</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Personality</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>INTROVERT</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>EXTROVERT</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>}</span>
</span><span class='label'><a id='x1-64009r9'></a><span class='ec-lmr-5'>9</span></span>
<span class='label'><a id='x1-64010r10'></a><span class='ec-lmr-5'>10</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>glob</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>personality_examples</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>dict</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Personality</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= {</span>
</span><span class='label'><a id='x1-64011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Albert</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Einstein</span></span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Personality</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>INTROVERT</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-64012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Barack</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Obama</span></span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Personality</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>EXTROVERT</span></span>
<span class='label'><a id='x1-64013r13'></a><span class='ec-lmr-5'>13</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>};</span></span>

<span class='label'><a id='x1-64014r14'></a><span class='ec-lmr-5'>14</span></span></pre>


<!-- l. 193 --><p class='noindent'>The semantic annotation clarifies that ‘yod‘ represents "Year of Death," preventing potential
confusion with other year-related fields. This contextual information helps AI models make more
accurate inferences when working with ‘Person‘ objects, especially when extracting information
from unstructured sources.
</p><!-- l. 195 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='examples-and-training-data'><span class='titlemark'>4.2.3   </span> <a id='x1-650004.2.3'></a>Examples and Training Data</h4>
<!-- l. 197 --><p class='noindent'>Semantic annotations can include examples that serve as few-shot learning data for AI models.
These examples provide concrete illustrations of expected input-output relationships, dramatically
improving the quality and consistency of AI-generated results.

</p>
 <!-- l. 199 --><pre class='listings' id='listing-45'><span class='label'><a id='x1-65001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>obj</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>OddWord</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-65002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>options</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>list</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-65003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>reasoning</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-65004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>result</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-65005r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-65006r6'></a><span class='ec-lmr-5'>6</span></span>
<span class='label'><a id='x1-65007r7'></a><span class='ec-lmr-5'>7</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>glob</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>examples</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>list</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>OddWord</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [</span>
</span><span class='label'><a id='x1-65008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>OddWord</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>options</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=[</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>skirt</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>dress</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>pen</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>jacket</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>],</span></span>
<span class='label'><a id='x1-65009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>reasoning</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>skirt</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>is</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>clothing</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>dress</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>is</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>clothing</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>pen</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>is</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>an</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>object</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>jacket</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>is</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>clothing</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-65010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>result</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>pen</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-65011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>OddWord</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>options</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=[</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Spain</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>France</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>German</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>England</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Singapore</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>],</span></span>
<span class='label'><a id='x1-65012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>reasoning</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Spain</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>France</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>England</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Singapore</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>is</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>a</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>country</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>German</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>is</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>a</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>language</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-65013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>result</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>German</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-65014r14'></a><span class='ec-lmr-5'>14</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-65015r15'></a><span class='ec-lmr-5'>15</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>sem</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>examples</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Examples</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>for</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Picking</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Odd</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Word</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>out</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Options</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Reasoning</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Result</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-65016r16'></a><span class='ec-lmr-5'>16</span></span>
<span class='label'><a id='x1-65017r17'></a><span class='ec-lmr-5'>17</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>odd_word_out_and_reason</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>options</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>list</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>])</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>OddWord</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span>
<span class='label'><a id='x1-65018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>incl_info</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>={</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>examples</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>examples</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-65019r19'></a><span class='ec-lmr-5'>19</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>

<span class='label'><a id='x1-65020r20'></a><span class='ec-lmr-5'>20</span></span></pre>
<!-- l. 221 --><p class='noindent'>The examples provide the AI model with concrete patterns to follow, including the expected
reasoning process. This few-shot learning approach often produces more consistent and
higher-quality results than relying on the model’s general training alone.
</p><!-- l. 223 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='tool-and-function-semantics'><span class='titlemark'>4.2.4   </span> <a id='x1-660004.2.4'></a>Tool and Function Semantics</h4>
<!-- l. 225 --><p class='noindent'>When integrating external tools or functions with AI models, semantic annotations provide crucial
context about what each tool does and when it should be used. This guidance helps AI models
make appropriate tool selection decisions.

</p>
 <!-- l. 227 --><pre class='listings' id='listing-46'><span class='label'><a id='x1-66001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_wikipedia_summary</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>title</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-66002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>try</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-66003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>wikipedia</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>summary</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>title</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-66004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>except</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Exception</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-66005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>options</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>wikipedia</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>search</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>title</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>results</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=5,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>suggestion</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>True</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-66006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>raise</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Exception</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>f</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Could</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>not</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>get</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>summary</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>for</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>title</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Similar</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>titles</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>options</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-66007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-66008r8'></a><span class='ec-lmr-5'>8</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-66009r9'></a><span class='ec-lmr-5'>9</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>sem</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_wikipedia_summary</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Get</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>the</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>summary</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>of</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>the</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>related</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>article</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>from</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Wikipedia</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-66010r10'></a><span class='ec-lmr-5'>10</span></span>
<span class='label'><a id='x1-66011r11'></a><span class='ec-lmr-5'>11</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_answer</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>question</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tools</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=[</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_wikipedia_summary</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>])</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>

<span class='label'><a id='x1-66012r12'></a><span class='ec-lmr-5'>12</span></span></pre>
<!-- l. 241 --><p class='noindent'>The semantic annotation clearly describes the tool’s purpose and behavior, helping the AI model
understand when and how to use it effectively. Without this context, the AI might misunderstand
the tool’s capabilities or use it inappropriately.
</p><!-- l. 243 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='multimodal-ai-images-video-and-beyond'><span class='titlemark'>4.3   </span> <a id='x1-670004.3'></a>Multimodal AI: Images, Video, and Beyond</h3>


<!-- l. 245 --><p class='noindent'>Jac’s AI integration extends beyond text to support multimodal AI models that can process
images, videos, and other media types. The same declarative approach that makes text-based AI
simple also applies to multimodal scenarios, with automatic handling of media loading, encoding,
and processing.
</p><!-- l. 247 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='image-processing'><span class='titlemark'>4.3.1   </span> <a id='x1-680004.3.1'></a>Image Processing</h4>
<!-- l. 249 --><p class='noindent'>Images are treated as first-class data types in Jac’s AI system. The ‘Image‘ type automatically
handles loading, encoding, and transmission to AI models, while maintaining the same clean
interface as text-based operations.

</p>
 <!-- l. 251 --><pre class='listings' id='listing-47'><span class='label'><a id='x1-68001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>from</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>byllm</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Model</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Image</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>}</span>
</span><span class='label'><a id='x1-68002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>os</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-68003r3'></a><span class='ec-lmr-5'>3</span></span>
<span class='label'><a id='x1-68004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>glob</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Model</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>model_name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>gpt</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>-4</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>o</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-68005r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-68006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>solve_math_question</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>question_img</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Image</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>method</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Chain</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>-</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>of</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>-</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Thoughts</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-68007r7'></a><span class='ec-lmr-5'>7</span></span>
<span class='label'><a id='x1-68008r8'></a><span class='ec-lmr-5'>8</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-68009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>question_img</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Image</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span>
<span class='label'><a id='x1-68010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>os</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>path</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>join</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>os</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>path</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>dirname</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>__file__</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>math_question</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>jpg</span></span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span>
<span class='label'><a id='x1-68011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-68012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>solve_math_question</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>question_img</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-68013r13'></a><span class='ec-lmr-5'>13</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-68014r14'></a><span class='ec-lmr-5'>14</span></span></pre>
<!-- l. 267 --><p class='noindent'>The AI model can analyze the mathematical problem in the image and provide step-by-step
solutions using chain-of-thought reasoning. This capability opens up applications in document
analysis, visual question answering, and automated content understanding.
</p><!-- l. 269 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='video-analysis'><span class='titlemark'>4.3.2   </span> <a id='x1-690004.3.2'></a>Video Analysis</h4>
<!-- l. 271 --><p class='noindent'>Video processing follows the same pattern as image processing, with additional parameters for
controlling frame sampling and processing efficiency.

</p>
 <!-- l. 273 --><pre class='listings' id='listing-48'><span class='label'><a id='x1-69001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>from</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>byllm</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Model</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Video</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>}</span>
</span><span class='label'><a id='x1-69002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>os</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-69003r3'></a><span class='ec-lmr-5'>3</span></span>
<span class='label'><a id='x1-69004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>glob</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Model</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>model_name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>gpt</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>-4</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>o</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-69005r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-69006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>explain_the_video</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>video</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Video</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-69007r7'></a><span class='ec-lmr-5'>7</span></span>
<span class='label'><a id='x1-69008r8'></a><span class='ec-lmr-5'>8</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-69009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>video_file_path</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>os</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>path</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>join</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>os</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>path</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>dirname</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>__file__</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>sample_video</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>mp4</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-69010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>target_fps</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 1;</span> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Sample 1 frame per second</span>
</span><span class='label'><a id='x1-69011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>video</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Video</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>path</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>video_file_path</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>fps</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>target_fps</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-69012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>explain_the_video</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>video</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-69013r13'></a><span class='ec-lmr-5'>13</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-69014r14'></a><span class='ec-lmr-5'>14</span></span></pre>
<!-- l. 289 --><p class='noindent'>The ‘Video‘ type handles the complexity of video processing, including frame extraction, encoding,
and transmission to the AI model. The ‘fps‘ parameter allows you to control the sampling rate,
balancing detail with processing efficiency.
</p><!-- l. 291 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='advanced-ai-patterns'><span class='titlemark'>4.4   </span> <a id='x1-700004.4'></a>Advanced AI Patterns</h3>


<!-- l. 293 --><p class='noindent'>As applications become more sophisticated, Jac provides advanced patterns for complex AI
interactions, including tool integration, reasoning methods, and multi-agent systems.
</p><!-- l. 295 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='tool-integration-and-function-calling'><span class='titlemark'>4.4.1   </span> <a id='x1-710004.4.1'></a>Tool Integration and Function Calling</h4>
<!-- l. 297 --><p class='noindent'>AI models can be equipped with external tools that extend their capabilities beyond pure
language processing. These tools can be regular Python functions, API calls, or any callable that
provides additional functionality.

</p>
 <!-- l. 299 --><pre class='listings' id='listing-49'><span class='label'><a id='x1-71001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>wikipedia</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-71002r2'></a><span class='ec-lmr-5'>2</span></span>
<span class='label'><a id='x1-71003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_wikipedia_summary</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>title</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-71004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>try</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-71005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>wikipedia</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>summary</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>title</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-71006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>except</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Exception</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-71007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>options</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>wikipedia</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>search</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>title</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>results</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=5,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>suggestion</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>True</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-71008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>raise</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Exception</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>f</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Could</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>not</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>get</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>summary</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>for</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>title</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Similar</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>titles</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>options</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-71009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-71010r10'></a><span class='ec-lmr-5'>10</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-71011r11'></a><span class='ec-lmr-5'>11</span></span>
<span class='label'><a id='x1-71012r12'></a><span class='ec-lmr-5'>12</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>ask_opponent</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>statement</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-71013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>user_input</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>input</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>f</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>AI</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>-&gt;</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>statement</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-71014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>f</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Opponents</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Answer</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>-&gt;</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>user_input</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-71015r15'></a><span class='ec-lmr-5'>15</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-71016r16'></a><span class='ec-lmr-5'>16</span></span>
<span class='label'><a id='x1-71017r17'></a><span class='ec-lmr-5'>17</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>debate_agent</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>topic</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span>
<span class='label'><a id='x1-71018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tools</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=[</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_wikipedia_summary</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>ask_opponent</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>],</span></span>
<span class='label'><a id='x1-71019r19'></a><span class='ec-lmr-5'>19</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>context</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=[</span></span>
<span class='label'><a id='x1-71020r20'></a><span class='ec-lmr-5'>20</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>You</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>have</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>to</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>defend</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>the</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>given</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>topic</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>while</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>the</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>opponent</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>is</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>defending</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>the</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>counter</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>topic</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-71021r21'></a><span class='ec-lmr-5'>21</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>If</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>you</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>dont</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>know</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>about</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>the</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>topic</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>use</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>the</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>given</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>tools</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-71022r22'></a><span class='ec-lmr-5'>22</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>You</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>are</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>a</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>humorous</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>cunning</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>very</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>arrogant</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>debater</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-71023r23'></a><span class='ec-lmr-5'>23</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span>
<span class='label'><a id='x1-71024r24'></a><span class='ec-lmr-5'>24</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>

<span class='label'><a id='x1-71025r25'></a><span class='ec-lmr-5'>25</span></span></pre>
<!-- l. 326 --><p class='noindent'>The AI model can dynamically choose which tools to use based on the conversation context,
creating interactive and adaptive behaviors that respond to real-time inputs and external data
sources.
</p><!-- l. 328 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='reasoning-methods'><span class='titlemark'>4.4.2   </span> <a id='x1-720004.4.2'></a>Reasoning Methods</h4>
<!-- l. 330 --><p class='noindent'>Different AI tasks benefit from different reasoning approaches. Jac supports various reasoning
methods that can be specified in the ‘by‘ clause to optimize the AI’s problem-solving
approach.

</p>
 <!-- l. 332 --><pre class='listings' id='listing-50'><span class='label'><a id='x1-72001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_expert</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>question</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>method</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Reason</span></span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-72002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_answer</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>question</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>expert</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-72003r3'></a><span class='ec-lmr-5'>3</span></span>
<span class='label'><a id='x1-72004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>ReAct (Reasoning + Acting) pattern for complex tasks</span>
</span><span class='label'><a id='x1-72005r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>complex_analysis</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>requirements</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span>
<span class='label'><a id='x1-72006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>method</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>ReAct</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-72007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tools</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=[</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>wikipedia_summary</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>search</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>scrape</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>],</span></span>
<span class='label'><a id='x1-72008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>max_react_iterations</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=10,</span></span>
<span class='label'><a id='x1-72009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>context</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=[</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>DONOT</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>SUMMARIZE</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>MAKE</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>IT</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>DETAILED</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span>
<span class='label'><a id='x1-72010r10'></a><span class='ec-lmr-5'>10</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>

<span class='label'><a id='x1-72011r11'></a><span class='ec-lmr-5'>11</span></span></pre>
<!-- l. 345 --><p class='noindent'>Different reasoning methods include: </p>
     <ul class='itemize1'>
     <li class='itemize'>‘Reason‘: Basic chain-of-thought reasoning
     </li>
     <li class='itemize'>‘Chain-of-Thoughts‘: Explicit step-by-step reasoning
     </li>
     <li class='itemize'>‘ReAct‘: Reasoning and Acting pattern for tool-using agents</li></ul>
<!-- l. 352 --><p class='noindent'>Each method optimizes the AI’s approach for different types of problems, from simple analysis to
complex multi-step reasoning with external tool integration.
</p><!-- l. 354 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='multiagent-systems'><span class='titlemark'>4.4.3   </span> <a id='x1-730004.4.3'></a>Multi-Agent Systems</h4>
<!-- l. 356 --><p class='noindent'>Jac’s AI constructs compose naturally to create multi-agent systems where different AI-powered
functions represent specialized agents with distinct roles and capabilities.

</p>
 <!-- l. 358 --><pre class='listings' id='listing-51'><span class='label'><a id='x1-73001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>persona_expert</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>requirements</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span>
<span class='label'><a id='x1-73002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>method</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>ReAct</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-73003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tools</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=[</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>wikipedia_summary</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>search</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>scrape</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>],</span></span>
<span class='label'><a id='x1-73004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>context</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=[</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>DONOT</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>SUMMARIZE</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>MAKE</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>IT</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>DETAILED</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span>
<span class='label'><a id='x1-73005r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-73006r6'></a><span class='ec-lmr-5'>6</span></span>
<span class='label'><a id='x1-73007r7'></a><span class='ec-lmr-5'>7</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>market_expert</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>requirements</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span>
<span class='label'><a id='x1-73008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>method</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>ReAct</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-73009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tools</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=[</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>wikipedia_summary</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>scrape</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>search</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>],</span></span>
<span class='label'><a id='x1-73010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>context</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=[</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>DONOT</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>SUMMARIZE</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>MAKE</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>IT</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>DETAILED</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span>
<span class='label'><a id='x1-73011r11'></a><span class='ec-lmr-5'>11</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-73012r12'></a><span class='ec-lmr-5'>12</span></span>
<span class='label'><a id='x1-73013r13'></a><span class='ec-lmr-5'>13</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>manager</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>query</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span>
<span class='label'><a id='x1-73014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>method</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>ReAct</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-73015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tools</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=[</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>persona_expert</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>market_expert</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>search</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>scrape</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>],</span></span>
<span class='label'><a id='x1-73016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>context</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=[</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>DONOT</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>SUMMARIZE</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>MAKE</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>IT</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>DETAILED</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span>
<span class='label'><a id='x1-73017r17'></a><span class='ec-lmr-5'>17</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>

<span class='label'><a id='x1-73018r18'></a><span class='ec-lmr-5'>18</span></span></pre>
<!-- l. 378 --><p class='noindent'>In this example, specialized expert agents handle domain-specific analysis, while a manager
agent coordinates their work and synthesizes results. This hierarchical approach enables
complex analysis workflows that leverage specialized expertise while maintaining overall
coherence.
</p><!-- l. 380 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='best-practices-and-patterns'><span class='titlemark'>4.5   </span> <a id='x1-740004.5'></a>Best Practices and Patterns</h3>
<!-- l. 382 --><p class='noindent'>Effective use of Jac’s AI constructs requires understanding both the capabilities and limitations of
the underlying AI models, as well as patterns that lead to reliable and maintainable AI-powered
applications.
</p><!-- l. 384 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='type-safety-and-error-handling'><span class='titlemark'>4.5.1   </span> <a id='x1-750004.5.1'></a>Type Safety and Error Handling</h4>
<!-- l. 386 --><p class='noindent'>Jac’s type system provides crucial guardrails for AI interactions. Always use specific, well-defined
types for AI function parameters and return values, as this helps both the AI model understand
expectations and your application handle results reliably.

</p>
 <!-- l. 388 --><pre class='listings' id='listing-52'><span class='label'><a id='x1-75001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Good: Specific, typed interface</span>
</span><span class='label'><a id='x1-75002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>analyze_sentiment</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>text</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Sentiment</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-75003r3'></a><span class='ec-lmr-5'>3</span></span>
<span class='label'><a id='x1-75004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Better: Include constraints and examples</span>
</span><span class='label'><a id='x1-75005r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>enum</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Sentiment</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>POSITIVE</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>NEGATIVE</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>NEUTRAL</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>}</span>
</span><span class='label'><a id='x1-75006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>analyze_sentiment</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>text</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Sentiment</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span>
<span class='label'><a id='x1-75007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>incl_info</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>={</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>examples</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>sentiment_examples</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-75008r8'></a><span class='ec-lmr-5'>8</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>

<span class='label'><a id='x1-75009r9'></a><span class='ec-lmr-5'>9</span></span></pre>


<!-- l. 399 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='context-management'><span class='titlemark'>4.5.2   </span> <a id='x1-760004.5.2'></a>Context Management</h4>
<!-- l. 401 --><p class='noindent'>Provide sufficient context through semantic annotations, examples, and the <span class='ec-lmtt-10'>incl_info </span>parameter.
AI models perform better when they understand the domain, expected behavior, and have
concrete examples to follow.
</p><!-- l. 403 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='testing-ai-functions'><span class='titlemark'>4.5.3   </span> <a id='x1-770004.5.3'></a>Testing AI Functions</h4>
<!-- l. 405 --><p class='noindent'>AI functions can be tested like any other function, but require special consideration for their
non-deterministic nature. Use mock LLM instances for deterministic testing:

</p>
 <!-- l. 407 --><pre class='listings' id='listing-53'><span class='label'><a id='x1-77001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>For testing</span>
</span><span class='label'><a id='x1-77002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>glob</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>test_llm</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Model</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span>
<span class='label'><a id='x1-77003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>model_name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>mockllm</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-77004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>outputs</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=[</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>expected_output</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span>
<span class='label'><a id='x1-77005r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-77006r6'></a><span class='ec-lmr-5'>6</span></span>
<span class='label'><a id='x1-77007r7'></a><span class='ec-lmr-5'>7</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>testable_function</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>input</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>test_llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>

<span class='label'><a id='x1-77008r8'></a><span class='ec-lmr-5'>8</span></span></pre>
<!-- l. 417 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='performance-considerations'><span class='titlemark'>4.5.4   </span> <a id='x1-780004.5.4'></a>Performance Considerations</h4>
<!-- l. 419 --><p class='noindent'>AI operations are inherently slower than traditional computation. Design your applications to
handle this latency appropriately, consider caching strategies for repeated operations, and use
Jac’s concurrency features to parallelize independent AI calls.

</p>
 <!-- l. 421 --><pre class='listings' id='listing-54'><span class='label'><a id='x1-78001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Parallel AI operations</span>
</span><span class='label'><a id='x1-78002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tasks</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>flow</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>analyze_text</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>text</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>text</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>texts</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-78003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>results</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>wait</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>task</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>task</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tasks</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>

<span class='label'><a id='x1-78004r4'></a><span class='ec-lmr-5'>4</span></span></pre>
<!-- l. 427 --><p class='noindent'>The integration of AI into Jac’s core language constructs represents a fundamental shift
toward more declarative, intention-driven programming. By treating AI as a first-class
language feature rather than an external service, Jac enables developers to focus on what
they want to accomplish rather than the mechanics of AI integration. This approach
not only reduces complexity but also creates new possibilities for adaptive, intelligent
applications that can evolve and respond to changing requirements with minimal code
changes.


</p>
<h2 class='chapterHead' id='objectspatial-programming-going-beyond-oop'><span class='titlemark'>Chapter 5</span><br /><a id='x1-790005'></a>Object-Spatial Programming: Going Beyond OOP</h2>
<!-- l. 3 --><p class='noindent'>The journey from procedural programming to object-oriented programming represented a
fundamental shift in how we think about code organization, data encapsulation, and the
relationship between data and behavior. Object-Oriented Programming (OOP) introduced the
powerful concept of bundling data with the methods that operate on it, creating modular,
reusable, and maintainable code structures that have dominated software development for
decades. Yet as modern software systems have evolved—becoming increasingly distributed,
interconnected, and graph-like in nature—the limitations of traditional OOP have become
apparent.
</p><!-- l. 5 --><p class='noindent'>Modern applications are fundamentally about relationships: users connecting to other users in
social networks, services communicating across microservice architectures, data flowing through
processing pipelines, and agents navigating complex decision trees. These systems are inherently
topological, where the connections between entities are as important as the entities themselves.
Traditional OOP, with its focus on isolated objects exchanging messages, struggles to naturally
express these graph-based relationships and the computational patterns that operate on
them.
</p><!-- l. 7 --><p class='noindent'>Jac introduces **Object-Spatial Programming (OSP)**, a paradigm that extends OOP
with first-class support for topological relationships and spatial computation. Rather
than abandoning the valuable concepts of OOP, OSP builds upon them, introducing
new archetypes that naturally express the connected, graph-based nature of modern
software systems. This chapter explores how OSP represents a natural evolution beyond
traditional OOP, providing the abstractions needed for today’s interconnected computational
challenges.
</p>
<h3 class='sectionHead' id='the-limitations-of-traditional-oop'><span class='titlemark'>5.1   </span> <a id='x1-800005.1'></a>The Limitations of Traditional OOP</h3>
<!-- l. 11 --><p class='noindent'>To understand the motivation for Object-Spatial Programming, we must first examine where
traditional OOP falls short when dealing with modern software architectures. While OOP excels
at modeling discrete entities with well-defined interfaces, it struggles with several patterns that
have become ubiquitous in contemporary software development.
</p><!-- l. 13 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='the-graph-structure-problem'><span class='titlemark'>5.1.1   </span> <a id='x1-810005.1.1'></a>The Graph Structure Problem</h4>
<!-- l. 15 --><p class='noindent'>Consider a social media platform where users can follow other users, create posts, and form
groups. In traditional OOP, you might model this as:


</p>
<!-- l. 17 -->

 <pre class='lstlisting' id='listing-55'><span class='label'><a id='x1-81001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>class</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>User</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-81002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>__init__</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-81003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span>
<span class='label'><a id='x1-81004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>followers</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= []</span>
</span><span class='label'><a id='x1-81005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>following</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= []</span>
</span><span class='label'><a id='x1-81006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>posts</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= []</span>
</span><span class='label'><a id='x1-81007r7'></a><span class='ec-lmr-5'>7</span></span>
<span class='label'><a id='x1-81008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>follow</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>other_user</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-81009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>following</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>append</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>other_user</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span>
<span class='label'><a id='x1-81010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>other_user</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>followers</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>append</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span>
<span class='label'><a id='x1-81011r11'></a><span class='ec-lmr-5'>11</span></span>
<span class='label'><a id='x1-81012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>create_post</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>content</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-81013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>post</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Post</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>content</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span>
<span class='label'><a id='x1-81014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>posts</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>append</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>post</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span>
<span class='label'><a id='x1-81015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>post</span></span>
<span class='label'><a id='x1-81016r16'></a><span class='ec-lmr-5'>16</span></span>
<span class='label'><a id='x1-81017r17'></a><span class='ec-lmr-5'>17</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>class</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Post</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-81018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>__init__</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>content</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>author</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-81019r19'></a><span class='ec-lmr-5'>19</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>content</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>content</span></span>
<span class='label'><a id='x1-81020r20'></a><span class='ec-lmr-5'>20</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>author</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>author</span></span>
<span class='label'><a id='x1-81021r21'></a><span class='ec-lmr-5'>21</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>likes</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= []</span>
</span><span class='label'><a id='x1-81022r22'></a><span class='ec-lmr-5'>22</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>comments</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= []</span></span></pre>

<!-- l. 42 --><p class='noindent'>While this approach works for simple cases, it quickly becomes unwieldy as relationships multiply.
The code for managing connections becomes scattered across multiple classes, graph traversal logic
must be manually implemented, and maintaining consistency between bidirectional
relationships requires careful attention to detail. More fundamentally, the relationships
themselves—following, liking, commenting—are not first-class entities that can carry their own
data or behavior.
</p><!-- l. 44 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='the-traversal-and-computation-problem'><span class='titlemark'>5.1.2   </span> <a id='x1-820005.1.2'></a>The Traversal and Computation Problem</h4>
<!-- l. 46 --><p class='noindent'>Traditional OOP provides no natural way to express computation that moves through connected
structures. If you want to find all users within three degrees of separation from a given user, or
calculate influence scores based on network topology, you must implement this logic as methods
that operate on collections of objects. The traversal logic becomes intertwined with the business
logic, making it difficult to reuse traversal patterns or reason about computational
flow.
</p><!-- l. 48 --><p class='noindent'>Consider implementing a recommendation algorithm that needs to traverse user networks,
analyze post content, and compute similarity scores. In traditional OOP, this becomes a
complex orchestration of method calls, temporary data structures, and explicit state
management:
</p>
<!-- l. 50 -->

 <pre class='lstlisting' id='listing-56'><span class='label'><a id='x1-82001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>recommend_posts</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>user</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>depth</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=3)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-82002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visited</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>set</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span>
<span class='label'><a id='x1-82003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>queue</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>user</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>0)]</span>
</span><span class='label'><a id='x1-82004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>recommendations</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= []</span>
</span><span class='label'><a id='x1-82005r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-82006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>while</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>queue</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-82007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_user</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_depth</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>queue</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>pop</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(0)</span></span>
<span class='label'><a id='x1-82008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_user</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visited</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>or</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_depth</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>depth</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-82009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>continue</span></span>
<span class='label'><a id='x1-82010r10'></a><span class='ec-lmr-5'>10</span></span>
<span class='label'><a id='x1-82011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visited</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>add</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_user</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span>
<span class='label'><a id='x1-82012r12'></a><span class='ec-lmr-5'>12</span></span>
<span class='label'><a id='x1-82013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Analyze posts from this user</span>
</span><span class='label'><a id='x1-82014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>post</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_user</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>posts</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-82015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>score</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>calculate_relevance</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>post</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>user</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span>
<span class='label'><a id='x1-82016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>recommendations</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>append</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>((</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>post</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>score</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span>
<span class='label'><a id='x1-82017r17'></a><span class='ec-lmr-5'>17</span></span>
<span class='label'><a id='x1-82018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Add connected users to traversal queue</span>
</span><span class='label'><a id='x1-82019r19'></a><span class='ec-lmr-5'>19</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_depth</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&lt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>depth</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-82020r20'></a><span class='ec-lmr-5'>20</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>followed</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_user</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>following</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-82021r21'></a><span class='ec-lmr-5'>21</span></span><span class='ec-lmtt-8x-x-87'>            </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>queue</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>append</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>((</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>followed</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_depth</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+ 1))</span>
</span><span class='label'><a id='x1-82022r22'></a><span class='ec-lmr-5'>22</span></span>
<span class='label'><a id='x1-82023r23'></a><span class='ec-lmr-5'>23</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>sorted</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>recommendations</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>key</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>lambda</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[1],</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>reverse</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>True</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span></pre>

<!-- l. 76 --><p class='noindent'>This approach works but has several problems: the traversal logic is mixed with the
recommendation logic, the algorithm is difficult to test in isolation, and extending it to
handle different types of relationships or traversal patterns requires significant code
duplication.
</p><!-- l. 78 --><p class='noindent'>
</p>


<h4 class='subsectionHead' id='the-architectural-mismatch'><span class='titlemark'>5.1.3   </span> <a id='x1-830005.1.3'></a>The Architectural Mismatch</h4>
<!-- l. 80 --><p class='noindent'>Perhaps most fundamentally, traditional OOP encourages thinking about systems as collections
of discrete objects, when modern software is increasingly about the spaces between
objects—the networks, flows, and topological relationships that connect them. Microservice
architectures, distributed systems, social networks, and AI agent systems are all fundamentally
spatial in nature, yet we model them using paradigms designed for isolated, encapsulated
entities.
</p><!-- l. 82 --><p class='noindent'>This architectural mismatch manifests in several ways: </p>
     <ul class='itemize1'>
     <li class='itemize'><span class='ec-lmbx-10'>Accidental   Complexity</span>:   Simple   conceptual   operations   require   complex
     implementation details
     </li>
     <li class='itemize'><span class='ec-lmbx-10'>Scattered Logic</span>: Related functionality spreads across multiple classes and methods
     </li>
     <li class='itemize'><span class='ec-lmbx-10'>Maintenance Burden</span>: Changes to relationship patterns require touching many parts
     of the codebase
     </li>
     <li class='itemize'><span class='ec-lmbx-10'>Performance Issues</span>: Graph operations implemented as object method calls lack
     optimization opportunities</li></ul>
<!-- l. 90 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='introducing-objectspatial-programming'><span class='titlemark'>5.2   </span> <a id='x1-840005.2'></a>Introducing Object-Spatial Programming</h3>
<!-- l. 92 --><p class='noindent'>Object-Spatial Programming addresses these limitations by extending OOP with first-class
support for topological relationships and spatial computation. Rather than replacing objects with
entirely new concepts, OSP introduces specialized archetypes that naturally express the
connected, graph-based nature of modern software systems.
</p><!-- l. 94 --><p class='noindent'>The core insight of OSP is the recognition that modern software operates in spaces defined by
relationships, not just collections of isolated objects. By making these spatial relationships explicit
in the programming model, we can express complex topological operations with remarkable clarity
while enabling runtime optimizations that would be impossible in traditional object-oriented


approaches.
</p><!-- l. 96 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='the-four-archetypes'><span class='titlemark'>5.2.1   </span> <a id='x1-850005.2.1'></a>The Four Archetypes</h4>
<!-- l. 98 --><p class='noindent'>OSP extends the traditional class concept with four specialized archetypes, each serving a distinct
role in the object-spatial programming model:
</p><!-- l. 101 --><p class='noindent'>
     </p><dl class='enumerate-enumitem'><dt class='enumerate-enumitem'>
  1. </dt><dd class='enumerate-enumitem'><span class='ec-lmbx-10'>Objects </span>(<span class='ec-lmtt-10'>obj</span>): Traditional classes that provide backward compatibility with OOP
     concepts
     </dd><dt class='enumerate-enumitem'>
  2. </dt><dd class='enumerate-enumitem'><span class='ec-lmbx-10'>Nodes </span>(<span class='ec-lmtt-10'>node</span>):  Entities  that  can  be  connected  via  edges  and  host  computational
     walkers
     </dd><dt class='enumerate-enumitem'>
  3. </dt><dd class='enumerate-enumitem'><span class='ec-lmbx-10'>Edges  </span>(<span class='ec-lmtt-10'>edge</span>):  First-class  relationships  between  nodes  that  can  carry  data  and
     behavior
     </dd><dt class='enumerate-enumitem'>
  4. </dt><dd class='enumerate-enumitem'><span class='ec-lmbx-10'>Walkers </span>(<span class='ec-lmtt-10'>walker</span>): Autonomous computational entities that traverse the node-edge
     structure</dd></dl>
<!-- l. 107 --><p class='noindent'>These archetypes work together to create a complete object-spatial programming model where
data (in nodes), relationships (as edges), and computation (through walkers) are explicitly
modeled and integrated.
</p><!-- l. 109 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='from-datatocomputation-to-computationtodata'><span class='titlemark'>5.2.2   </span> <a id='x1-860005.2.2'></a>From Data-to-Computation to Computation-to-Data</h4>
<!-- l. 111 --><p class='noindent'>The fundamental paradigm shift in OSP is moving from "data flows to computation" to
"computation flows to data." In traditional programming, functions and methods are stationary,
and data is passed to them as parameters. In OSP, computational entities (walkers) move through
the data space (nodes and edges), processing information contextually based on their current
location.
</p><!-- l. 113 --><p class='noindent'>This inversion has profound implications: </p>


     <ul class='itemize1'>
     <li class='itemize'><span class='ec-lmbx-10'>Locality of Reference</span>: Computation happens where data lives, improving cache
     efficiency
     </li>
     <li class='itemize'><span class='ec-lmbx-10'>Natural Parallelism</span>: Independent walkers can traverse different parts of the graph
     simultaneously
     </li>
     <li class='itemize'><span class='ec-lmbx-10'>Contextual Processing</span>: Algorithms can adapt their behavior based on the local
     topology
     </li>
     <li class='itemize'><span class='ec-lmbx-10'>Distributed Execution</span>: Walkers can move between nodes that exist on different
     machines</li></ul>
<!-- l. 121 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='nodes-locations-in-data-space'><span class='titlemark'>5.3   </span> <a id='x1-870005.3'></a>Nodes: Locations in Data Space</h3>
<!-- l. 123 --><p class='noindent'>Nodes represent discrete locations or entities within a topological structure. Unlike traditional
objects, nodes are designed from the ground up to participate in graph-based relationships and
host computational activities.
</p><!-- l. 125 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='basic-node-declaration'><span class='titlemark'>5.3.1   </span> <a id='x1-880005.3.1'></a>Basic Node Declaration</h4>
<!-- l. 127 --><p class='noindent'>A node is declared using the <span class='ec-lmtt-10'>node </span>keyword and can contain data fields, methods, and special
abilities that respond to walker visits:

</p>
 <!-- l. 129 --><pre class='listings' id='listing-57'><span class='label'><a id='x1-88001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>node</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>User</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-88002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-88003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>email</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-88004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>join_date</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-88005r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-88006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>greet</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>Walker</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-88007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>f</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Welcome</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>visitor</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}!</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>I</span></span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>m</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-88008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-88009r9'></a><span class='ec-lmr-5'>9</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-88010r10'></a><span class='ec-lmr-5'>10</span></span></pre>


<!-- l. 141 --><p class='noindent'>The <span class='ec-lmtt-10'>has </span>keyword declares data fields, similar to attributes in traditional classes. The <span class='ec-lmtt-10'>can </span>keyword
declares abilities—special methods that are automatically triggered when specific events occur,
such as a walker entering or exiting the node.
</p><!-- l. 143 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='node-abilities-and-contextual-computation'><span class='titlemark'>5.3.2   </span> <a id='x1-890005.3.2'></a>Node Abilities and Contextual Computation</h4>
<!-- l. 145 --><p class='noindent'>Node abilities represent a fundamental departure from traditional method calls. Instead of being
explicitly invoked, abilities are triggered by spatial events—when walkers enter or exit the node.
This event-driven model enables highly decoupled, contextual computation:

</p>
 <!-- l. 147 --><pre class='listings' id='listing-58'><span class='label'><a id='x1-89001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>node</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>BlogPost</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-89002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>title</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-89003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>content</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-89004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>view_count</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 0;</span>
</span><span class='label'><a id='x1-89005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tags</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>list</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [];</span>
</span><span class='label'><a id='x1-89006r6'></a><span class='ec-lmr-5'>6</span></span>
<span class='label'><a id='x1-89007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>track_visit</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>AnalyticsWalker</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-89008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>view_count</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+= 1;</span>
</span><span class='label'><a id='x1-89009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>f</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Post</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>title</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>viewed</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Total</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>views</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>view_count</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-89010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-89011r11'></a><span class='ec-lmr-5'>11</span></span>
<span class='label'><a id='x1-89012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>suggest_related</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>RecommendationWalker</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-89013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>related_posts</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [--&gt;(</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>BlogPost</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tags</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>intersection</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tags</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-89014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>post</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>related_posts</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-89015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visitor</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>add_recommendation</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>post</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>calculate_similarity</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>post</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-89016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-89017r17'></a><span class='ec-lmr-5'>17</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-89018r18'></a><span class='ec-lmr-5'>18</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-89019r19'></a><span class='ec-lmr-5'>19</span></span></pre>
<!-- l. 168 --><p class='noindent'>In this example, the <span class='ec-lmtt-10'>BlogPost </span>node responds differently to different types of walkers. When an
<span class='ec-lmtt-10'>AnalyticsWalker </span>visits, it tracks the view. When a <span class='ec-lmtt-10'>RecommendationWalker </span>visits, it suggests
related posts based on tag similarity. This contextual behavior happens automatically without
explicit method calls.
</p><!-- l. 170 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='node-connectivity'><span class='titlemark'>5.3.3   </span> <a id='x1-900005.3.3'></a>Node Connectivity</h4>
<!-- l. 172 --><p class='noindent'>Nodes gain their spatial character through their ability to be connected via edges. These
connections are not just references—they create navigable topology that walkers can
traverse:

</p>
 <!-- l. 174 --><pre class='listings' id='listing-59'><span class='label'><a id='x1-90001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>node</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-90002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-90003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>age</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-90004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-90005r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-90006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-90007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>alice</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Alice</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>age</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=30)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-90008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>bob</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Bob</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>age</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=25)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-90009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>charlie</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Charlie</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>age</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=35)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-90010r10'></a><span class='ec-lmr-5'>10</span></span>
<span class='label'><a id='x1-90011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtti-10x-x-70'>   </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Create connections using spatial operators</span>
</span><span class='label'><a id='x1-90012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>alice</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>++&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>bob</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Alice connects to Bob</span>
</span><span class='label'><a id='x1-90013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>bob</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>++&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>charlie</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Bob connects to Charlie</span>
</span><span class='label'><a id='x1-90014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>alice</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>++&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>charlie</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Alice also connects to Charlie</span>
</span><span class='label'><a id='x1-90015r15'></a><span class='ec-lmr-5'>15</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-90016r16'></a><span class='ec-lmr-5'>16</span></span></pre>
<!-- l. 192 --><p class='noindent'>The <span class='ec-lmtt-10'>++&gt; </span>operator creates directed edges between nodes. These connections form the
topology that walkers can navigate, enabling graph-based algorithms to be expressed
naturally.
</p><!-- l. 194 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='edges-firstclass-relationships'><span class='titlemark'>5.4   </span> <a id='x1-910005.4'></a>Edges: First-Class Relationships</h3>


<!-- l. 196 --><p class='noindent'>In traditional OOP, relationships between objects are typically represented as references or foreign
keys—implementation details rather than first-class entities. OSP elevates relationships to
first-class status through edges, which can carry their own data, behavior, and computational
logic.
</p><!-- l. 198 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='edge-declaration-and-data'><span class='titlemark'>5.4.1   </span> <a id='x1-920005.4.1'></a>Edge Declaration and Data</h4>
<!-- l. 200 --><p class='noindent'>Edges are declared using the <span class='ec-lmtt-10'>edge </span>keyword and can contain data that describes the
relationship:

</p>
 <!-- l. 202 --><pre class='listings' id='listing-60'><span class='label'><a id='x1-92001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>edge</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Friendship</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-92002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>strength</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 1.0;</span>
</span><span class='label'><a id='x1-92003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>established_date</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-92004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>interaction_count</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 0;</span>
</span><span class='label'><a id='x1-92005r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-92006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>strengthen</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>InteractionWalker</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-92007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>interaction_count</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+= 1;</span>
</span><span class='label'><a id='x1-92008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>strength</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>min</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>strength</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+ 0.1, 10.0);</span>
</span><span class='label'><a id='x1-92009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>f</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Friendship</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>strengthened</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>to</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>strength</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-92010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-92011r11'></a><span class='ec-lmr-5'>11</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-92012r12'></a><span class='ec-lmr-5'>12</span></span></pre>
<!-- l. 216 --><p class='noindent'>This <span class='ec-lmtt-10'>Friendship </span>edge carries data about the relationship strength and responds to interactions by
automatically updating its properties. The relationship itself becomes an active participant in the
computation.
</p><!-- l. 218 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='typed-connections'><span class='titlemark'>5.4.2   </span> <a id='x1-930005.4.2'></a>Typed Connections</h4>
<!-- l. 220 --><p class='noindent'>Edges can be used to create typed connections between nodes, making the nature of relationships
explicit:

</p>
 <!-- l. 222 --><pre class='listings' id='listing-61'><span class='label'><a id='x1-93001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>node</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-93002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-93003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-93004r4'></a><span class='ec-lmr-5'>4</span></span>
<span class='label'><a id='x1-93005r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>edge</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>FollowsEdge</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-93006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>since</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-93007r7'></a><span class='ec-lmr-5'>7</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-93008r8'></a><span class='ec-lmr-5'>8</span></span>
<span class='label'><a id='x1-93009r9'></a><span class='ec-lmr-5'>9</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>edge</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>CollaboratesEdge</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-93010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>project</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-93011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>role</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-93012r12'></a><span class='ec-lmr-5'>12</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-93013r13'></a><span class='ec-lmr-5'>13</span></span>
<span class='label'><a id='x1-93014r14'></a><span class='ec-lmr-5'>14</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-93015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>alice</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Alice</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-93016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>bob</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Bob</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-93017r17'></a><span class='ec-lmr-5'>17</span></span>
<span class='label'><a id='x1-93018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtti-10x-x-70'>   </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Create typed relationships</span>
</span><span class='label'><a id='x1-93019r19'></a><span class='ec-lmr-5'>19</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>alice</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+&gt;:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>FollowsEdge</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>since</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>2023-01-15</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:+&gt;</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>bob</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-93020r20'></a><span class='ec-lmr-5'>20</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>alice</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+&gt;:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>CollaboratesEdge</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>project</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>ML</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Pipeline</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>role</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Lead</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:+&gt;</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>bob</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-93021r21'></a><span class='ec-lmr-5'>21</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-93022r22'></a><span class='ec-lmr-5'>22</span></span></pre>
<!-- l. 246 --><p class='noindent'>These typed connections enable precise graph queries and traversals. A walker can navigate only
certain types of relationships, implementing algorithms that depend on relationship
semantics.
</p><!-- l. 248 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='edge-abilities-and-transition-logic'><span class='titlemark'>5.4.3   </span> <a id='x1-940005.4.3'></a>Edge Abilities and Transition Logic</h4>
<!-- l. 250 --><p class='noindent'>Edges can contain abilities that execute when walkers traverse them, enabling computation to
occur during transitions between nodes:



</p>
 <!-- l. 252 --><pre class='listings' id='listing-62'><span class='label'><a id='x1-94001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>edge</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>SecurityGate</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-94002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>access_level</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-94003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>last_accessed</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-94004r4'></a><span class='ec-lmr-5'>4</span></span>
<span class='label'><a id='x1-94005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>check_permission</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>UserWalker</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-94006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visitor</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>security_clearance</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&lt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>access_level</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-94007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>f</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Access</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>denied</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Required</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>level</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>access_level</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-94008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visitor</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>disengage</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Stop the walker</span>
</span><span class='label'><a id='x1-94009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>else</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-94010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>last_accessed</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_current_time</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-94011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Access</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>granted</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-94012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-94013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-94014r14'></a><span class='ec-lmr-5'>14</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-94015r15'></a><span class='ec-lmr-5'>15</span></span></pre>
<!-- l. 269 --><p class='noindent'>This security edge acts as a checkpoint, examining walker properties and potentially blocking
traversal based on security policies. The edge becomes an active participant in the access control
system.
</p><!-- l. 271 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='walkers-computation-in-motion'><span class='titlemark'>5.5   </span> <a id='x1-950005.5'></a>Walkers: Computation in Motion</h3>
<!-- l. 273 --><p class='noindent'>Walkers represent the most revolutionary aspect of OSP—autonomous computational entities that
traverse the node-edge structure, carrying state and behaviors that execute based on their current
location. Walkers embody the paradigm shift from "data moving to computation" to "computation
moving to data."
</p><!-- l. 275 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='basic-walker-declaration'><span class='titlemark'>5.5.1   </span> <a id='x1-960005.5.1'></a>Basic Walker Declaration</h4>
<!-- l. 277 --><p class='noindent'>Walkers are declared using the <span class='ec-lmtt-10'>walker </span>keyword and can carry state, implement methods, and
define abilities that respond to different locations:

</p>
 <!-- l. 279 --><pre class='listings' id='listing-63'><span class='label'><a id='x1-96001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>NetworkAnalyzer</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-96002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visited_count</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 0;</span>
</span><span class='label'><a id='x1-96003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>path_taken</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>list</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [];</span>
</span><span class='label'><a id='x1-96004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>analysis_results</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>dict</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= {};</span>
</span><span class='label'><a id='x1-96005r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-96006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>analyze_node</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-96007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visited_count</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+= 1;</span>
</span><span class='label'><a id='x1-96008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>path_taken</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>append</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-96009r9'></a><span class='ec-lmr-5'>9</span></span>
<span class='label'><a id='x1-96010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Analyze local network properties</span>
</span><span class='label'><a id='x1-96011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>connections</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [--&gt;];</span>
</span><span class='label'><a id='x1-96012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>analysis_results</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= {</span>
</span><span class='label'><a id='x1-96013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>connections</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>len</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>connections</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-96014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>timestamp</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_current_time</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span>
<span class='label'><a id='x1-96015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>};</span></span>
<span class='label'><a id='x1-96016r16'></a><span class='ec-lmr-5'>16</span></span>
<span class='label'><a id='x1-96017r17'></a><span class='ec-lmr-5'>17</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Continue traversal</span>
</span><span class='label'><a id='x1-96018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[--&gt;];</span>
</span><span class='label'><a id='x1-96019r19'></a><span class='ec-lmr-5'>19</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-96020r20'></a><span class='ec-lmr-5'>20</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-96021r21'></a><span class='ec-lmr-5'>21</span></span></pre>
<!-- l. 302 --><p class='noindent'>The walker carries its own state (<span class='ec-lmtt-10'>visited_count</span>, <span class='ec-lmtt-10'>path_taken</span>, <span class='ec-lmtt-10'>analysis_results</span>) and
defines how it behaves when encountering <span class='ec-lmtt-10'>Person </span>nodes. The <span class='ec-lmtt-10'>here </span>reference provides
access to the current node, while <span class='ec-lmtt-10'>visit [–&gt;] </span>continues the traversal to connected
nodes.
</p><!-- l. 304 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='walker-spawning-and-activation'><span class='titlemark'>5.5.2   </span> <a id='x1-970005.5.2'></a>Walker Spawning and Activation</h4>
<!-- l. 306 --><p class='noindent'>Walkers begin as inactive objects and are activated within the spatial structure using the spawn
operator:



</p>
 <!-- l. 308 --><pre class='listings' id='listing-64'><span class='label'><a id='x1-97001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-97002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtti-10x-x-70'>   </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Create a network of people</span>
</span><span class='label'><a id='x1-97003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>alice</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Alice</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-97004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>bob</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Bob</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-97005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>charlie</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Charlie</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-97006r6'></a><span class='ec-lmr-5'>6</span></span>
<span class='label'><a id='x1-97007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>alice</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>++&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>bob</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>++&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>charlie</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>++&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>alice</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Create a cycle</span>
</span><span class='label'><a id='x1-97008r8'></a><span class='ec-lmr-5'>8</span></span>
<span class='label'><a id='x1-97009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtti-10x-x-70'>   </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Spawn and activate the analyzer</span>
</span><span class='label'><a id='x1-97010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>analyzer</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>NetworkAnalyzer</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-97011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>root</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>++&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>alice</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Connect alice to root</span>
</span><span class='label'><a id='x1-97012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>root</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>spawn</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>analyzer</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Start traversal from root</span>
</span><span class='label'><a id='x1-97013r13'></a><span class='ec-lmr-5'>13</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-97014r14'></a><span class='ec-lmr-5'>14</span></span></pre>
<!-- l. 324 --><p class='noindent'>The <span class='ec-lmtt-10'>spawn </span>operator activates the walker at a specific location (in this case, the root node). The
walker then begins executing its abilities based on the nodes and edges it encounters during
traversal.
</p><!-- l. 326 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='complex-traversal-patterns'><span class='titlemark'>5.5.3   </span> <a id='x1-980005.5.3'></a>Complex Traversal Patterns</h4>
<!-- l. 328 --><p class='noindent'>Walkers support sophisticated traversal patterns through the visit statement and spatial
references:

</p>
 <!-- l. 330 --><pre class='listings' id='listing-65'><span class='label'><a id='x1-98001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>PathFinder</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-98002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>target</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-98003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>max_depth</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 5;</span>
</span><span class='label'><a id='x1-98004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_depth</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 0;</span>
</span><span class='label'><a id='x1-98005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>found_path</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>bool</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>False</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-98006r6'></a><span class='ec-lmr-5'>6</span></span>
<span class='label'><a id='x1-98007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>search</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-98008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>==</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>target</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-98009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>found_path</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>True</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-98010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>f</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Found</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>target</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>target</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>at</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>depth</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>current_depth</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-98011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>disengage</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Stop traversal</span>
</span><span class='label'><a id='x1-98012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-98013r13'></a><span class='ec-lmr-5'>13</span></span>
<span class='label'><a id='x1-98014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_depth</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&gt;=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>max_depth</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-98015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Don</span><span class='ts1-lmtti10-x-x-70'>'</span><span class='ec-lmtti-10x-x-70'>t go deeper</span>
</span><span class='label'><a id='x1-98016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-98017r17'></a><span class='ec-lmr-5'>17</span></span>
<span class='label'><a id='x1-98018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_depth</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+= 1;</span>
</span><span class='label'><a id='x1-98019r19'></a><span class='ec-lmr-5'>19</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[--&gt;]</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>else</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-98020r20'></a><span class='ec-lmr-5'>20</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_depth</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-= 1;</span> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Backtrack if no connections</span>
</span><span class='label'><a id='x1-98021r21'></a><span class='ec-lmr-5'>21</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-98022r22'></a><span class='ec-lmr-5'>22</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-98023r23'></a><span class='ec-lmr-5'>23</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-98024r24'></a><span class='ec-lmr-5'>24</span></span></pre>
<!-- l. 356 --><p class='noindent'>This walker implements a depth-limited search, tracking its progress and terminating when it finds
the target or reaches maximum depth. The <span class='ec-lmtt-10'>disengage </span>statement stops the walker entirely, while
the <span class='ec-lmtt-10'>else </span>clause of the visit statement handles cases where no outgoing connections
exist.
</p><!-- l. 358 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='walker-abilities-and-location-context'><span class='titlemark'>5.5.4   </span> <a id='x1-990005.5.4'></a>Walker Abilities and Location Context</h4>
<!-- l. 360 --><p class='noindent'>Walker abilities can respond to different types of locations, enabling context-sensitive
behavior:

</p>
 <!-- l. 362 --><pre class='listings' id='listing-66'><span class='label'><a id='x1-99001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>DataCollector</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-99002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>collected_data</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>dict</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= {};</span>
</span><span class='label'><a id='x1-99003r3'></a><span class='ec-lmr-5'>3</span></span>
<span class='label'><a id='x1-99004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>process_user</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>User</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-99005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>collected_data</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>users</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>collected_data</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>users</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[]);</span>
</span><span class='label'><a id='x1-99006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>collected_data</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>users</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>].</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>append</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>({</span></span>
<span class='label'><a id='x1-99007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-99008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>email</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>email</span></span>
<span class='label'><a id='x1-99009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>})</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-99010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[--&gt;];</span>
</span><span class='label'><a id='x1-99011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-99012r12'></a><span class='ec-lmr-5'>12</span></span>
<span class='label'><a id='x1-99013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>process_post</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>BlogPost</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-99014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>collected_data</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>posts</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>collected_data</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>posts</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[]);</span>
</span><span class='label'><a id='x1-99015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>collected_data</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>posts</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>].</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>append</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>({</span></span>
<span class='label'><a id='x1-99016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>title</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>title</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-99017r17'></a><span class='ec-lmr-5'>17</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>views</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>view_count</span></span>
<span class='label'><a id='x1-99018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>})</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-99019r19'></a><span class='ec-lmr-5'>19</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[--&gt;];</span>
</span><span class='label'><a id='x1-99020r20'></a><span class='ec-lmr-5'>20</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-99021r21'></a><span class='ec-lmr-5'>21</span></span>
<span class='label'><a id='x1-99022r22'></a><span class='ec-lmr-5'>22</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>process_friendship</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Friendship</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-99023r23'></a><span class='ec-lmr-5'>23</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>f</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Traversing</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>friendship</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>with</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>strength</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>strength</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-99024r24'></a><span class='ec-lmr-5'>24</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Walker automatically continues to connected node</span>
</span><span class='label'><a id='x1-99025r25'></a><span class='ec-lmr-5'>25</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-99026r26'></a><span class='ec-lmr-5'>26</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-99027r27'></a><span class='ec-lmr-5'>27</span></span></pre>
<!-- l. 391 --><p class='noindent'>This walker behaves differently depending on what type of location it encounters—collecting user
data from <span class='ec-lmtt-10'>User </span>nodes, post data from <span class='ec-lmtt-10'>BlogPost </span>nodes, and logging information when traversing
<span class='ec-lmtt-10'>Friendship </span>edges.


</p><!-- l. 393 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='spatial-references-and-navigation'><span class='titlemark'>5.6   </span> <a id='x1-1000005.6'></a>Spatial References and Navigation</h3>
<!-- l. 395 --><p class='noindent'>OSP provides specialized syntax for navigating and querying topological structures. Spatial
references make graph relationships first-class citizens in the programming model, enabling direct
expression of topological operations.
</p><!-- l. 397 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='basic-spatial-reference-syntax'><span class='titlemark'>5.6.1   </span> <a id='x1-1010005.6.1'></a>Basic Spatial Reference Syntax</h4>
<!-- l. 399 --><p class='noindent'>Spatial references use square bracket notation with directional operators:

</p>
 <!-- l. 401 --><pre class='listings' id='listing-67'><span class='label'><a id='x1-101001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Explorer</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-101002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>explore</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-101003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Get all connected nodes via outgoing edges</span>
</span><span class='label'><a id='x1-101004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>outgoing_connections</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [--&gt;];</span>
</span><span class='label'><a id='x1-101005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>f</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Found</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>len</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>outgoing_connections</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>outgoing</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>connections</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-101006r6'></a><span class='ec-lmr-5'>6</span></span>
<span class='label'><a id='x1-101007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Get all connected nodes via incoming edges</span>
</span><span class='label'><a id='x1-101008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>incoming_connections</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [&lt;--];</span>
</span><span class='label'><a id='x1-101009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>f</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Found</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>len</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>incoming_connections</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>incoming</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>connections</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-101010r10'></a><span class='ec-lmr-5'>10</span></span>
<span class='label'><a id='x1-101011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Get all bidirectionally connected nodes</span>
</span><span class='label'><a id='x1-101012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>bidirectional</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [&lt;--&gt;];</span>
</span><span class='label'><a id='x1-101013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>f</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Found</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>len</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>bidirectional</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>bidirectional</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>connections</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-101014r14'></a><span class='ec-lmr-5'>14</span></span>
<span class='label'><a id='x1-101015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Continue traversal</span>
</span><span class='label'><a id='x1-101016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[--&gt;];</span>
</span><span class='label'><a id='x1-101017r17'></a><span class='ec-lmr-5'>17</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-101018r18'></a><span class='ec-lmr-5'>18</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-101019r19'></a><span class='ec-lmr-5'>19</span></span></pre>
<!-- l. 422 --><p class='noindent'>The directional operators (<span class='ec-lmtt-10'>–&gt;</span>, <span class='ec-lmtt-10'>&lt;–</span>, <span class='ec-lmtt-10'>&lt;–&gt;</span>) express the flow of relationships within the graph, enabling
precise navigation based on connection direction.
</p><!-- l. 424 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='filtered-spatial-references'><span class='titlemark'>5.6.2   </span> <a id='x1-1020005.6.2'></a>Filtered Spatial References</h4>
<!-- l. 426 --><p class='noindent'>Spatial references support inline filtering for selective graph operations:

</p>
 <!-- l. 428 --><pre class='listings' id='listing-68'><span class='label'><a id='x1-102001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>SmartExplorer</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-102002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>explore</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-102003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Find connected people over 25 years old</span>
</span><span class='label'><a id='x1-102004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>adults</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [--&gt;(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>age</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&gt; 25)];</span>
</span><span class='label'><a id='x1-102005r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-102006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Find highly rated blog posts</span>
</span><span class='label'><a id='x1-102007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>good_posts</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [--&gt;(</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>BlogPost</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>view_count</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&gt; 100)];</span>
</span><span class='label'><a id='x1-102008r8'></a><span class='ec-lmr-5'>8</span></span>
<span class='label'><a id='x1-102009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Find strong friendships</span>
</span><span class='label'><a id='x1-102010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>strong_friends</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>edge</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>--&gt;(</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Friendship</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>strength</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&gt; 5.0)];</span>
</span><span class='label'><a id='x1-102011r11'></a><span class='ec-lmr-5'>11</span></span>
<span class='label'><a id='x1-102012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Visit only the highly-rated posts</span>
</span><span class='label'><a id='x1-102013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[--&gt;(</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>BlogPost</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>view_count</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&gt; 100)];</span>
</span><span class='label'><a id='x1-102014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-102015r15'></a><span class='ec-lmr-5'>15</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-102016r16'></a><span class='ec-lmr-5'>16</span></span></pre>
<!-- l. 446 --><p class='noindent'>These filtered references enable precise graph queries that combine topological navigation with
data-driven selection criteria. The walker can make intelligent decisions about which paths to
follow based on the properties of connected nodes and edges.
</p><!-- l. 448 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='typed-navigation'><span class='titlemark'>5.6.3   </span> <a id='x1-1030005.6.3'></a>Typed Navigation</h4>
<!-- l. 450 --><p class='noindent'>Spatial references can specify edge types for precise relationship navigation:



</p>
 <!-- l. 452 --><pre class='listings' id='listing-69'><span class='label'><a id='x1-103001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>RelationshipAnalyzer</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-103002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>analyze</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-103003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Navigate only through friendship relationships</span>
</span><span class='label'><a id='x1-103004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>friends</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [-&gt;:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Friendship</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:-&gt;];</span></span>
<span class='label'><a id='x1-103005r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-103006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Navigate through collaboration relationships</span>
</span><span class='label'><a id='x1-103007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>collaborators</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [-&gt;:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>CollaboratesEdge</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:-&gt;];</span></span>
<span class='label'><a id='x1-103008r8'></a><span class='ec-lmr-5'>8</span></span>
<span class='label'><a id='x1-103009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Get the actual friendship edges (not just connected nodes)</span>
</span><span class='label'><a id='x1-103010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>friendship_edges</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>edge</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Friendship</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:-&gt;];</span></span>
<span class='label'><a id='x1-103011r11'></a><span class='ec-lmr-5'>11</span></span>
<span class='label'><a id='x1-103012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>friendship</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>friendship_edges</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-103013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>f</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Friendship</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>strength</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>friendship</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>strength</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-103014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-103015r15'></a><span class='ec-lmr-5'>15</span></span>
<span class='label'><a id='x1-103016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Continue only through strong friendships</span>
</span><span class='label'><a id='x1-103017r17'></a><span class='ec-lmr-5'>17</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[-&gt;:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Friendship</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>strength</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&gt; 7.0:-&gt;];</span>
</span><span class='label'><a id='x1-103018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-103019r19'></a><span class='ec-lmr-5'>19</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-103020r20'></a><span class='ec-lmr-5'>20</span></span></pre>
<!-- l. 474 --><p class='noindent'>This typed navigation enables algorithms that depend on relationship semantics, such as analyzing
social networks based on different types of connections.
</p><!-- l. 476 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='practical-example-social-network-analysis'><span class='titlemark'>5.7   </span> <a id='x1-1040005.7'></a>Practical Example: Social Network Analysis</h3>
<!-- l. 478 --><p class='noindent'>To demonstrate the power of Object-Spatial Programming, let’s build a complete social
network analysis system that would be complex to implement cleanly in traditional
OOP.
</p><!-- l. 480 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='domain-model-definition'><span class='titlemark'>5.7.1   </span> <a id='x1-1050005.7.1'></a>Domain Model Definition</h4>
<!-- l. 482 --><p class='noindent'>First, we define our spatial domain model:

</p>
 <!-- l. 484 --><pre class='listings' id='listing-70'><span class='label'><a id='x1-105001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>node</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-105002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-105003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>age</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-105004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>location</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-105005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>interests</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>list</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [];</span>
</span><span class='label'><a id='x1-105006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>influence_score</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 0.0;</span>
</span><span class='label'><a id='x1-105007r7'></a><span class='ec-lmr-5'>7</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-105008r8'></a><span class='ec-lmr-5'>8</span></span>
<span class='label'><a id='x1-105009r9'></a><span class='ec-lmr-5'>9</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>edge</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Friendship</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-105010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>strength</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 1.0;</span>
</span><span class='label'><a id='x1-105011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>duration_months</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 0;</span>
</span><span class='label'><a id='x1-105012r12'></a><span class='ec-lmr-5'>12</span></span>
<span class='label'><a id='x1-105013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>strengthen</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>InteractionWalker</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-105014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>strength</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>min</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>strength</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+ 0.1, 10.0);</span>
</span><span class='label'><a id='x1-105015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>f</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Friendship</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>strengthened</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>to</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>strength</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-105016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-105017r17'></a><span class='ec-lmr-5'>17</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-105018r18'></a><span class='ec-lmr-5'>18</span></span>
<span class='label'><a id='x1-105019r19'></a><span class='ec-lmr-5'>19</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>edge</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>FollowsEdge</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-105020r20'></a><span class='ec-lmr-5'>20</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>since</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-105021r21'></a><span class='ec-lmr-5'>21</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>active</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>bool</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>true</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-105022r22'></a><span class='ec-lmr-5'>22</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-105023r23'></a><span class='ec-lmr-5'>23</span></span>
<span class='label'><a id='x1-105024r24'></a><span class='ec-lmr-5'>24</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>node</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Post</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-105025r25'></a><span class='ec-lmr-5'>25</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>content</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-105026r26'></a><span class='ec-lmr-5'>26</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>likes</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 0;</span>
</span><span class='label'><a id='x1-105027r27'></a><span class='ec-lmr-5'>27</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>shares</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 0;</span>
</span><span class='label'><a id='x1-105028r28'></a><span class='ec-lmr-5'>28</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>timestamp</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-105029r29'></a><span class='ec-lmr-5'>29</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-105030r30'></a><span class='ec-lmr-5'>30</span></span></pre>
<!-- l. 516 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='analysis-walkers'><span class='titlemark'>5.7.2   </span> <a id='x1-1060005.7.2'></a>Analysis Walkers</h4>
<!-- l. 518 --><p class='noindent'>Now we implement specialized walkers for different types of analysis:

</p>
 <!-- l. 520 --><pre class='listings' id='listing-71'><span class='label'><a id='x1-106001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>InfluenceCalculator</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-106002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>max_depth</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 3;</span>
</span><span class='label'><a id='x1-106003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_depth</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 0;</span>
</span><span class='label'><a id='x1-106004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>influence_map</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>dict</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= {};</span>
</span><span class='label'><a id='x1-106005r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-106006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>calculate</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-106007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_depth</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>max_depth</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-106008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-106009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-106010r10'></a><span class='ec-lmr-5'>10</span></span>
<span class='label'><a id='x1-106011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Calculate local influence based on connections</span>
</span><span class='label'><a id='x1-106012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>followers</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [&lt;-:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>FollowsEdge</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>active</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>==</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>true</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>&lt;-];</span></span>
<span class='label'><a id='x1-106013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>friends</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [&lt;-&gt;:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Friendship</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>strength</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&gt; 5.0&lt;-&gt;];</span>
</span><span class='label'><a id='x1-106014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>posts</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [--&gt;(</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Post</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-106015r15'></a><span class='ec-lmr-5'>15</span></span>
<span class='label'><a id='x1-106016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>local_influence</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= (</span>
</span><span class='label'><a id='x1-106017r17'></a><span class='ec-lmr-5'>17</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>len</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>followers</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>* 2.0 +</span> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Followers count double</span>
</span><span class='label'><a id='x1-106018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>len</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>friends</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>* 1.5 +</span> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Strong friends</span>
</span><span class='label'><a id='x1-106019r19'></a><span class='ec-lmr-5'>19</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>sum</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>post</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>likes</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>post</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>shares</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>post</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>posts</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>* 0.1</span>
</span><span class='label'><a id='x1-106020r20'></a><span class='ec-lmr-5'>20</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-106021r21'></a><span class='ec-lmr-5'>21</span></span>
<span class='label'><a id='x1-106022r22'></a><span class='ec-lmr-5'>22</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>influence_score</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>local_influence</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-106023r23'></a><span class='ec-lmr-5'>23</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>influence_map</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>local_influence</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-106024r24'></a><span class='ec-lmr-5'>24</span></span>
<span class='label'><a id='x1-106025r25'></a><span class='ec-lmr-5'>25</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Propagate to connected people</span>
</span><span class='label'><a id='x1-106026r26'></a><span class='ec-lmr-5'>26</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_depth</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+= 1;</span>
</span><span class='label'><a id='x1-106027r27'></a><span class='ec-lmr-5'>27</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[--&gt;(</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>else</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-106028r28'></a><span class='ec-lmr-5'>28</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_depth</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-= 1;</span>
</span><span class='label'><a id='x1-106029r29'></a><span class='ec-lmr-5'>29</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-106030r30'></a><span class='ec-lmr-5'>30</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-106031r31'></a><span class='ec-lmr-5'>31</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-106032r32'></a><span class='ec-lmr-5'>32</span></span>
<span class='label'><a id='x1-106033r33'></a><span class='ec-lmr-5'>33</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>CommunityDetector</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-106034r34'></a><span class='ec-lmr-5'>34</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>communities</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>list</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>list</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]]</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [];</span>
</span><span class='label'><a id='x1-106035r35'></a><span class='ec-lmr-5'>35</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visited</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>set</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>set</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-106036r36'></a><span class='ec-lmr-5'>36</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_community</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>list</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [];</span>
</span><span class='label'><a id='x1-106037r37'></a><span class='ec-lmr-5'>37</span></span>
<span class='label'><a id='x1-106038r38'></a><span class='ec-lmr-5'>38</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>detect</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-106039r39'></a><span class='ec-lmr-5'>39</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visited</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-106040r40'></a><span class='ec-lmr-5'>40</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-106041r41'></a><span class='ec-lmr-5'>41</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-106042r42'></a><span class='ec-lmr-5'>42</span></span>
<span class='label'><a id='x1-106043r43'></a><span class='ec-lmr-5'>43</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visited</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>add</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-106044r44'></a><span class='ec-lmr-5'>44</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_community</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>append</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-106045r45'></a><span class='ec-lmr-5'>45</span></span>
<span class='label'><a id='x1-106046r46'></a><span class='ec-lmr-5'>46</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Find tightly connected people (strong friendships)</span>
</span><span class='label'><a id='x1-106047r47'></a><span class='ec-lmr-5'>47</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>close_friends</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [&lt;-&gt;:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Friendship</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>strength</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&gt; 7.0&lt;-&gt;];</span>
</span><span class='label'><a id='x1-106048r48'></a><span class='ec-lmr-5'>48</span></span>
<span class='label'><a id='x1-106049r49'></a><span class='ec-lmr-5'>49</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>close_friends</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-106050r50'></a><span class='ec-lmr-5'>50</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>close_friends</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-106051r51'></a><span class='ec-lmr-5'>51</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>else</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-106052r52'></a><span class='ec-lmr-5'>52</span></span><span class='ec-lmtti-10x-x-70'>         </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>End of community - save and start new one</span>
</span><span class='label'><a id='x1-106053r53'></a><span class='ec-lmr-5'>53</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>len</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_community</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&gt; 1 {</span>
</span><span class='label'><a id='x1-106054r54'></a><span class='ec-lmr-5'>54</span></span><span class='ec-lmtt-8x-x-87'>            </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>communities</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>append</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_community</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>copy</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-106055r55'></a><span class='ec-lmr-5'>55</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_community</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>clear</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-106056r56'></a><span class='ec-lmr-5'>56</span></span>
<span class='label'><a id='x1-106057r57'></a><span class='ec-lmr-5'>57</span></span><span class='ec-lmtti-10x-x-70'>         </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Find unvisited people to start new community</span>
</span><span class='label'><a id='x1-106058r58'></a><span class='ec-lmr-5'>58</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>unvisited</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [--&gt;(</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>not</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visited</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-106059r59'></a><span class='ec-lmr-5'>59</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>unvisited</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-106060r60'></a><span class='ec-lmr-5'>60</span></span><span class='ec-lmtt-8x-x-87'>            </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>unvisited</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[0];</span></span>
<span class='label'><a id='x1-106061r61'></a><span class='ec-lmr-5'>61</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-106062r62'></a><span class='ec-lmr-5'>62</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-106063r63'></a><span class='ec-lmr-5'>63</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-106064r64'></a><span class='ec-lmr-5'>64</span></span>
<span class='label'><a id='x1-106065r65'></a><span class='ec-lmr-5'>65</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>RecommendationEngine</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-106066r66'></a><span class='ec-lmr-5'>66</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>target_person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-106067r67'></a><span class='ec-lmr-5'>67</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>recommendations</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>list</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [];</span>
</span><span class='label'><a id='x1-106068r68'></a><span class='ec-lmr-5'>68</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>similarity_threshold</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 0.5;</span>
</span><span class='label'><a id='x1-106069r69'></a><span class='ec-lmr-5'>69</span></span>
<span class='label'><a id='x1-106070r70'></a><span class='ec-lmr-5'>70</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>recommend</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-106071r71'></a><span class='ec-lmr-5'>71</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>==</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>target_person</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-106072r72'></a><span class='ec-lmr-5'>72</span></span><span class='ec-lmtti-10x-x-70'>         </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Find people with similar interests</span>
</span><span class='label'><a id='x1-106073r73'></a><span class='ec-lmr-5'>73</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>target_interests</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>set</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>interests</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-106074r74'></a><span class='ec-lmr-5'>74</span></span>
<span class='label'><a id='x1-106075r75'></a><span class='ec-lmr-5'>75</span></span><span class='ec-lmtti-10x-x-70'>         </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Traverse network to find similar people</span>
</span><span class='label'><a id='x1-106076r76'></a><span class='ec-lmr-5'>76</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[--&gt;(</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>else</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-106077r77'></a><span class='ec-lmr-5'>77</span></span><span class='ec-lmtti-10x-x-70'>            </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Also check friends of friends</span>
</span><span class='label'><a id='x1-106078r78'></a><span class='ec-lmr-5'>78</span></span><span class='ec-lmtt-8x-x-87'>            </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[--&gt;][--&gt;(</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-106079r79'></a><span class='ec-lmr-5'>79</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-106080r80'></a><span class='ec-lmr-5'>80</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>else</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-106081r81'></a><span class='ec-lmr-5'>81</span></span><span class='ec-lmtti-10x-x-70'>         </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Calculate similarity with target</span>
</span><span class='label'><a id='x1-106082r82'></a><span class='ec-lmr-5'>82</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>person_interests</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>set</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>interests</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-106083r83'></a><span class='ec-lmr-5'>83</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>target_interests</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>set</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>([</span></span>
<span class='label'><a id='x1-106084r84'></a><span class='ec-lmr-5'>84</span></span><span class='ec-lmtt-8x-x-87'>            </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>p</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>interests</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>p</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[&lt;--(</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>==</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>target_person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span>
<span class='label'><a id='x1-106085r85'></a><span class='ec-lmr-5'>85</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>][0]</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[&lt;--(</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>==</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>target_person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>else</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[]);</span>
</span><span class='label'><a id='x1-106086r86'></a><span class='ec-lmr-5'>86</span></span>
<span class='label'><a id='x1-106087r87'></a><span class='ec-lmr-5'>87</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>target_interests</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-106088r88'></a><span class='ec-lmr-5'>88</span></span><span class='ec-lmtt-8x-x-87'>            </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>similarity</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>len</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>person_interests</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&amp;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>target_interests</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>/</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>len</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>person_interests</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>|</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>target_interests</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-106089r89'></a><span class='ec-lmr-5'>89</span></span>
<span class='label'><a id='x1-106090r90'></a><span class='ec-lmr-5'>90</span></span><span class='ec-lmtt-8x-x-87'>            </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>similarity</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>similarity_threshold</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-106091r91'></a><span class='ec-lmr-5'>91</span></span><span class='ec-lmtt-8x-x-87'>               </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>recommendations</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>append</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>({</span></span>
<span class='label'><a id='x1-106092r92'></a><span class='ec-lmr-5'>92</span></span><span class='ec-lmtt-8x-x-87'>                  </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>person</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-106093r93'></a><span class='ec-lmr-5'>93</span></span><span class='ec-lmtt-8x-x-87'>                  </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>similarity</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>similarity</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-106094r94'></a><span class='ec-lmr-5'>94</span></span><span class='ec-lmtt-8x-x-87'>                  </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>mutual_interests</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>list</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>person_interests</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&amp;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>target_interests</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span>
<span class='label'><a id='x1-106095r95'></a><span class='ec-lmr-5'>95</span></span><span class='ec-lmtt-8x-x-87'>               </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>})</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-106096r96'></a><span class='ec-lmr-5'>96</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-106097r97'></a><span class='ec-lmr-5'>97</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-106098r98'></a><span class='ec-lmr-5'>98</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-106099r99'></a><span class='ec-lmr-5'>99</span></span></pre>


<!-- l. 621 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='orchestrating-the-analysis'><span class='titlemark'>5.7.3   </span> <a id='x1-1070005.7.3'></a>Orchestrating the Analysis</h4>
<!-- l. 623 --><p class='noindent'>Finally, we create and run our analysis system:

</p>
 <!-- l. 625 --><pre class='listings' id='listing-72'><span class='label'><a id='x1-107001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-107002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtti-10x-x-70'>   </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Create a social network</span>
</span><span class='label'><a id='x1-107003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>alice</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Alice</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>age</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=28,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>interests</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=[</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>AI</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Music</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Travel</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>])</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-107004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>bob</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Bob</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>age</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=32,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>interests</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=[</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>AI</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Sports</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Cooking</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>])</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-107005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>charlie</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Charlie</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>age</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=25,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>interests</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=[</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Music</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Art</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Travel</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>])</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-107006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>diana</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Diana</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>age</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=30,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>interests</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=[</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Sports</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Travel</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Photography</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>])</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-107007r7'></a><span class='ec-lmr-5'>7</span></span>
<span class='label'><a id='x1-107008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtti-10x-x-70'>   </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Create posts</span>
</span><span class='label'><a id='x1-107009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>alice</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>++&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Post</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>content</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Excited</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>about</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>AI</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>developments</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>!</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>likes</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=15,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>shares</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=3)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-107010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>bob</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>++&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Post</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>content</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Great</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>game</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>last</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>night</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>!</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>likes</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=8,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>shares</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=1)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-107011r11'></a><span class='ec-lmr-5'>11</span></span>
<span class='label'><a id='x1-107012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtti-10x-x-70'>   </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Create relationships</span>
</span><span class='label'><a id='x1-107013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>alice</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+&gt;:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Friendship</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>strength</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=8.5:+&gt;</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>bob</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-107014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>alice</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+&gt;:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Friendship</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>strength</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=9.2:+&gt;</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>charlie</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-107015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>bob</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+&gt;:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>FollowsEdge</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>since</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>2023-01-15</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:+&gt;</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>diana</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-107016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>charlie</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+&gt;:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Friendship</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>strength</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=7.8:+&gt;</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>diana</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-107017r17'></a><span class='ec-lmr-5'>17</span></span>
<span class='label'><a id='x1-107018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtti-10x-x-70'>   </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Connect to root for analysis</span>
</span><span class='label'><a id='x1-107019r19'></a><span class='ec-lmr-5'>19</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>root</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>++&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>alice</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-107020r20'></a><span class='ec-lmr-5'>20</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>root</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>++&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>bob</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-107021r21'></a><span class='ec-lmr-5'>21</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>root</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>++&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>charlie</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-107022r22'></a><span class='ec-lmr-5'>22</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>root</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>++&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>diana</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-107023r23'></a><span class='ec-lmr-5'>23</span></span>
<span class='label'><a id='x1-107024r24'></a><span class='ec-lmr-5'>24</span></span><span class='ec-lmtti-10x-x-70'>   </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Run influence analysis</span>
</span><span class='label'><a id='x1-107025r25'></a><span class='ec-lmr-5'>25</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>influence_analyzer</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>InfluenceCalculator</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-107026r26'></a><span class='ec-lmr-5'>26</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>root</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>spawn</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>influence_analyzer</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-107027r27'></a><span class='ec-lmr-5'>27</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Influence</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>scores</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>influence_analyzer</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>influence_map</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-107028r28'></a><span class='ec-lmr-5'>28</span></span>
<span class='label'><a id='x1-107029r29'></a><span class='ec-lmr-5'>29</span></span><span class='ec-lmtti-10x-x-70'>   </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Detect communities</span>
</span><span class='label'><a id='x1-107030r30'></a><span class='ec-lmr-5'>30</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>community_detector</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>CommunityDetector</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-107031r31'></a><span class='ec-lmr-5'>31</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>root</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>spawn</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>community_detector</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-107032r32'></a><span class='ec-lmr-5'>32</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Detected</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>communities</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>community_detector</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>communities</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-107033r33'></a><span class='ec-lmr-5'>33</span></span>
<span class='label'><a id='x1-107034r34'></a><span class='ec-lmr-5'>34</span></span><span class='ec-lmtti-10x-x-70'>   </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>//</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Generate recommendations for Alice</span>
</span><span class='label'><a id='x1-107035r35'></a><span class='ec-lmr-5'>35</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>recommender</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>RecommendationEngine</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>target_person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Alice</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-107036r36'></a><span class='ec-lmr-5'>36</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>root</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>spawn</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>recommender</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-107037r37'></a><span class='ec-lmr-5'>37</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Recommendations</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>for</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Alice</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>recommender</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>recommendations</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-107038r38'></a><span class='ec-lmr-5'>38</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-107039r39'></a><span class='ec-lmr-5'>39</span></span></pre>
<!-- l. 666 --><p class='noindent'>This example demonstrates several key advantages of OSP:
</p><!-- l. 668 --><p class='noindent'>1. <span class='ec-lmbx-10'>Natural Expression</span>: The graph structure and traversal algorithms are expressed directly in
the code 2. <span class='ec-lmbx-10'>Separation of Concerns</span>: Each walker has a single responsibility and can be
developed independently 3. <span class='ec-lmbx-10'>Reusability</span>: The same spatial structure can be analyzed by different
walkers 4. <span class='ec-lmbx-10'>Contextual Behavior</span>: Nodes and edges respond appropriately to different types of
walkers 5. <span class='ec-lmbx-10'>Maintainability</span>: Adding new analysis algorithms requires only new walkers, not
changes to the data model
</p><!-- l. 674 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='benefits-and-use-cases'><span class='titlemark'>5.8   </span> <a id='x1-1080005.8'></a>Benefits and Use Cases</h3>
<!-- l. 676 --><p class='noindent'>Object-Spatial Programming provides significant advantages for a wide range of modern software
applications. The paradigm’s strength lies in its ability to naturally express the connected,
graph-based nature of contemporary systems.
</p><!-- l. 678 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='agentbased-systems'><span class='titlemark'>5.8.1   </span> <a id='x1-1090005.8.1'></a>Agent-Based Systems</h4>
<!-- l. 680 --><p class='noindent'>OSP provides a direct representation for autonomous agents that navigate environments, gather
information, and make decisions based on local context:

</p>
 <!-- l. 682 --><pre class='listings' id='listing-73'><span class='label'><a id='x1-109001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>TradingAgent</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-109002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>portfolio</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>dict</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= {};</span>
</span><span class='label'><a id='x1-109003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>risk_tolerance</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 0.5;</span>
</span><span class='label'><a id='x1-109004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>cash</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 10000.0;</span>
</span><span class='label'><a id='x1-109005r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-109006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>evaluate_market</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Stock</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-109007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Analyze local market conditions</span>
</span><span class='label'><a id='x1-109008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>price_history</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_price_history</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-109009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>volatility</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>calculate_volatility</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>price_history</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-109010r10'></a><span class='ec-lmr-5'>10</span></span>
<span class='label'><a id='x1-109011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>volatility</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&lt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>risk_tolerance</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>and</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>cash</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_price</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-109012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>buy_stock</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>min</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>cash</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>* 0.1, 1000));</span>
</span><span class='label'><a id='x1-109013r13'></a><span class='ec-lmr-5'>13</span></span>
<span class='label'><a id='x1-109014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Move to related stocks</span>
</span><span class='label'><a id='x1-109015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[-&gt;:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>CorrelatedWith</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>correlation</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&gt; 0.7:-&gt;];</span>
</span><span class='label'><a id='x1-109016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-109017r17'></a><span class='ec-lmr-5'>17</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-109018r18'></a><span class='ec-lmr-5'>18</span></span></pre>


<!-- l. 702 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='distributed-systems'><span class='titlemark'>5.8.2   </span> <a id='x1-1100005.8.2'></a>Distributed Systems</h4>
<!-- l. 704 --><p class='noindent'>The decoupling of data (nodes) from computation (walkers) creates a natural model for
distributed execution where computational tasks can move between data locations:

</p>
 <!-- l. 706 --><pre class='listings' id='listing-74'><span class='label'><a id='x1-110001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>DataProcessor</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-110002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>batch_size</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 100;</span>
</span><span class='label'><a id='x1-110003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>processed_count</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>int</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= 0;</span>
</span><span class='label'><a id='x1-110004r4'></a><span class='ec-lmr-5'>4</span></span>
<span class='label'><a id='x1-110005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>process_data</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>DataNode</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-110006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Process data locally where it resides</span>
</span><span class='label'><a id='x1-110007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>results</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>process_batch</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>batch_size</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-110008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>store_results</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>results</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-110009r9'></a><span class='ec-lmr-5'>9</span></span>
<span class='label'><a id='x1-110010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>processed_count</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>len</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>results</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-110011r11'></a><span class='ec-lmr-5'>11</span></span>
<span class='label'><a id='x1-110012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Move to next data location</span>
</span><span class='label'><a id='x1-110013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[--&gt;(</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>DataNode</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>has_unprocessed_data</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>==</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>true</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-110014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-110015r15'></a><span class='ec-lmr-5'>15</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-110016r16'></a><span class='ec-lmr-5'>16</span></span></pre>
<!-- l. 724 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='graph-algorithms'><span class='titlemark'>5.8.3   </span> <a id='x1-1110005.8.3'></a>Graph Algorithms</h4>
<!-- l. 726 --><p class='noindent'>Complex graph algorithms become natural expressions of walker traversal:

</p>
 <!-- l. 728 --><pre class='listings' id='listing-75'><span class='label'><a id='x1-111001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>ShortestPathFinder</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-111002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>target</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-111003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>distances</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>dict</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= {};</span>
</span><span class='label'><a id='x1-111004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>previous</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>dict</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= {};</span>
</span><span class='label'><a id='x1-111005r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-111006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>dijkstra</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>GraphNode</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-111007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>not</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>distances</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-111008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>distances</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>inf</span></span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-111009r9'></a><span class='ec-lmr-5'>9</span></span>
<span class='label'><a id='x1-111010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>edge</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>edge</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>--&gt;] {</span>
</span><span class='label'><a id='x1-111011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>neighbor</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>edge</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>destination</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-111012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>alt_distance</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>distances</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>edge</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>weight</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-111013r13'></a><span class='ec-lmr-5'>13</span></span>
<span class='label'><a id='x1-111014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>alt_distance</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>&lt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>distances</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>neighbor</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>inf</span></span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-111015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>            </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>distances</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>neighbor</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>alt_distance</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-111016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>            </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>previous</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>neighbor</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-111017r17'></a><span class='ec-lmr-5'>17</span></span>
<span class='label'><a id='x1-111018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Continue to unvisited nodes</span>
</span><span class='label'><a id='x1-111019r19'></a><span class='ec-lmr-5'>19</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>unvisited</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [--&gt;(</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>GraphNode</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>not</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>distances</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-111020r20'></a><span class='ec-lmr-5'>20</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>unvisited</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-111021r21'></a><span class='ec-lmr-5'>21</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>min</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>unvisited</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>key</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>lambda</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>n</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>distances</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>n</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>inf</span></span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-111022r22'></a><span class='ec-lmr-5'>22</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-111023r23'></a><span class='ec-lmr-5'>23</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-111024r24'></a><span class='ec-lmr-5'>24</span></span></pre>
<!-- l. 754 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='neural-network-architectures'><span class='titlemark'>5.8.4   </span> <a id='x1-1120005.8.4'></a>Neural Network Architectures</h4>
<!-- l. 756 --><p class='noindent'>OSP naturally models neural networks where computation flows through connected
layers:

</p>
 <!-- l. 758 --><pre class='listings' id='listing-76'><span class='label'><a id='x1-112001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>node</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>NeuralLayer</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-112002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>weights</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>list</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>list</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]];</span></span>
<span class='label'><a id='x1-112003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>biases</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>list</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>float</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-112004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>activation_function</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>relu</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-112005r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-112006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>forward_pass</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>ActivationWalker</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-112007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>input_data</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visitor</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_activations</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-112008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>output</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>compute_layer_output</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>input_data</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-112009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visitor</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_activations</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>output</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-112010r10'></a><span class='ec-lmr-5'>10</span></span>
<span class='label'><a id='x1-112011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[--&gt;];</span> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Continue to next layer</span>
</span><span class='label'><a id='x1-112012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-112013r13'></a><span class='ec-lmr-5'>13</span></span>
<span class='label'><a id='x1-112014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>backward_pass</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>GradientWalker</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-112015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>gradients</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visitor</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_gradients</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-112016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>update_weights</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>gradients</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-112017r17'></a><span class='ec-lmr-5'>17</span></span>
<span class='label'><a id='x1-112018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Propagate gradients backward</span>
</span><span class='label'><a id='x1-112019r19'></a><span class='ec-lmr-5'>19</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[&lt;--];</span>
</span><span class='label'><a id='x1-112020r20'></a><span class='ec-lmr-5'>20</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-112021r21'></a><span class='ec-lmr-5'>21</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-112022r22'></a><span class='ec-lmr-5'>22</span></span></pre>
<!-- l. 782 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='integration-with-existing-code'><span class='titlemark'>5.9   </span> <a id='x1-1130005.9'></a>Integration with Existing Code</h3>
<!-- l. 784 --><p class='noindent'>One of OSP’s greatest strengths is its seamless integration with traditional OOP code. You can
adopt object-spatial concepts incrementally, mixing spatial and traditional approaches within the
same application.


</p><!-- l. 786 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='gradual-migration'><span class='titlemark'>5.9.1   </span> <a id='x1-1140005.9.1'></a>Gradual Migration</h4>
<!-- l. 788 --><p class='noindent'>Start by identifying components of your system that have inherent graph structure:

</p>
 <!-- l. 790 --><pre class='listings' id='listing-77'><span class='label'><a id='x1-114001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Traditional OOP class</span>
</span><span class='label'><a id='x1-114002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>obj</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>UserService</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-114003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_user_recommendations</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>user_id</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>list</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-114004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Use OSP for the recommendation logic</span>
</span><span class='label'><a id='x1-114005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>user_node</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_user_node</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>user_id</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-114006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>recommender</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>RecommendationWalker</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-114007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>user_node</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>spawn</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>recommender</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-114008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>recommender</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>recommendations</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-114009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-114010r10'></a><span class='ec-lmr-5'>10</span></span>
<span class='label'><a id='x1-114011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_user_node</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>user_id</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-114012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Convert traditional user data to spatial representation</span>
</span><span class='label'><a id='x1-114013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>user_data</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>database</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_user</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>user_id</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-114014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span>
<span class='label'><a id='x1-114015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>user_data</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-114016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>interests</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>user_data</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>interests</span></span>
<span class='label'><a id='x1-114017r17'></a><span class='ec-lmr-5'>17</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-114018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-114019r19'></a><span class='ec-lmr-5'>19</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-114020r20'></a><span class='ec-lmr-5'>20</span></span></pre>
<!-- l. 812 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='hybrid-architectures'><span class='titlemark'>5.9.2   </span> <a id='x1-1150005.9.2'></a>Hybrid Architectures</h4>
<!-- l. 814 --><p class='noindent'>Combine traditional services with spatial components for optimal results:

</p>
 <!-- l. 816 --><pre class='listings' id='listing-78'><span class='label'><a id='x1-115001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>obj</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>AnalyticsService</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-115002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>analyze_user_engagement</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>user_ids</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>list</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>])</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>dict</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-115003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Build spatial representation</span>
</span><span class='label'><a id='x1-115004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>network</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>build_user_network</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>user_ids</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-115005r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-115006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Use OSP for graph analysis</span>
</span><span class='label'><a id='x1-115007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>analyzer</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>EngagementAnalyzer</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-115008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>network</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>spawn</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>analyzer</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-115009r9'></a><span class='ec-lmr-5'>9</span></span>
<span class='label'><a id='x1-115010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Return traditional data structures</span>
</span><span class='label'><a id='x1-115011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-115012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>engagement_scores</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>analyzer</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>scores</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-115013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>communities</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>analyzer</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>communities</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-115014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>influence_rankings</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>analyzer</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>rankings</span></span>
<span class='label'><a id='x1-115015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>};</span></span>
<span class='label'><a id='x1-115016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-115017r17'></a><span class='ec-lmr-5'>17</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-115018r18'></a><span class='ec-lmr-5'>18</span></span></pre>
<!-- l. 836 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='performance-and-optimization'><span class='titlemark'>5.10   </span> <a id='x1-1160005.10'></a>Performance and Optimization</h3>
<!-- l. 838 --><p class='noindent'>Object-Spatial Programming enables optimization opportunities that are difficult or impossible to
achieve with traditional OOP approaches.
</p><!-- l. 840 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='automatic-parallelization'><span class='titlemark'>5.10.1   </span> <a id='x1-1170005.10.1'></a>Automatic Parallelization</h4>
<!-- l. 842 --><p class='noindent'>Independent walkers can traverse different parts of the graph simultaneously:

</p>
 <!-- l. 844 --><pre class='listings' id='listing-79'><span class='label'><a id='x1-117001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-117002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtti-10x-x-70'>   </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Create multiple analysis walkers</span>
</span><span class='label'><a id='x1-117003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>analyzers</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [</span>
</span><span class='label'><a id='x1-117004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>InfluenceCalculator</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-117005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>CommunityDetector</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-117006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>RecommendationEngine</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>target_person</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Alice</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span>
<span class='label'><a id='x1-117007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-117008r8'></a><span class='ec-lmr-5'>8</span></span>
<span class='label'><a id='x1-117009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtti-10x-x-70'>   </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Spawn them in parallel</span>
</span><span class='label'><a id='x1-117010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>analyzer</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>analyzers</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-117011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>root</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>spawn</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>analyzer</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Each runs independently</span>
</span><span class='label'><a id='x1-117012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-117013r13'></a><span class='ec-lmr-5'>13</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-117014r14'></a><span class='ec-lmr-5'>14</span></span></pre>


<!-- l. 860 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='data-locality'><span class='titlemark'>5.10.2   </span> <a id='x1-1180005.10.2'></a>Data Locality</h4>
<!-- l. 862 --><p class='noindent'>The runtime can optimize data placement based on traversal patterns: - Nodes that are
frequently traversed together can be co-located in memory - Edge connections can inform
predictive prefetching strategies - Walker state can be optimized for the types of nodes it
visits
</p><!-- l. 867 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='distributed-execution'><span class='titlemark'>5.10.3   </span> <a id='x1-1190005.10.3'></a>Distributed Execution</h4>
<!-- l. 869 --><p class='noindent'>Walkers can move between nodes that exist on different machines, enabling natural distributed
algorithms:

</p>
 <!-- l. 871 --><pre class='listings' id='listing-80'><span class='label'><a id='x1-119001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>DistributedProcessor</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-119002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>process</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>DataNode</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-119003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Process data locally</span>
</span><span class='label'><a id='x1-119004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>results</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>process_data</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-119005r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-119006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Move to next node (potentially on different machine)</span>
</span><span class='label'><a id='x1-119007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>next_nodes</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [--&gt;(</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>DataNode</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>location</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>!=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>location</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-119008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>next_nodes</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-119009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>next_nodes</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[0];</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Walker migrates to new machine</span>
</span><span class='label'><a id='x1-119010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-119011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-119012r12'></a><span class='ec-lmr-5'>12</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-119013r13'></a><span class='ec-lmr-5'>13</span></span></pre>
<!-- l. 886 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='looking-forward-the-future-of-programming'><span class='titlemark'>5.11   </span> <a id='x1-1200005.11'></a>Looking Forward: The Future of Programming</h3>
<!-- l. 888 --><p class='noindent'>Object-Spatial Programming represents more than just a new programming paradigm—it’s a
recognition that the nature of software has fundamentally changed. As systems become
increasingly distributed, interconnected, and intelligent, our programming models must evolve to
match these new realities.
</p><!-- l. 890 --><p class='noindent'>The shift from isolated objects to connected spaces mirrors broader trends in computing: -
**Cloud-native architectures** where services are interconnected and data flows between
them - **AI and machine learning systems** where data and models form complex
processing graphs - **IoT and edge computing** where computation moves to where data is
generated - **Social and collaborative platforms** where relationships are as important as
entities
</p><!-- l. 896 --><p class='noindent'>OSP provides the abstractions needed to express these modern patterns naturally, while
maintaining compatibility with existing code and concepts. It represents a natural evolution of
programming—not a replacement of what came before, but an extension that addresses the
challenges of what comes next.


</p><!-- l. 898 --><p class='noindent'>As you work through the remaining chapters of this book, you’ll see how OSP integrates with
Jac’s other advanced features: AI-powered computation, semantic programming constructs, and
scalability patterns. Together, these features create a programming environment designed for the
challenges and opportunities of modern software development.
</p><!-- l. 900 --><p class='noindent'>The future of programming lies not in abandoning the valuable concepts we’ve developed, but in
extending them to meet new challenges. Object-Spatial Programming shows how we can build
upon the foundation of OOP while creating abstractions that naturally express the connected,
spatial nature of contemporary software systems. In doing so, we create programs that are not
only more expressive and maintainable, but also better aligned with the topological reality of
modern computing.


</p>
<h2 class='chapterHead' id='constructs-for-infinite-scale-the-root-keyword'><span class='titlemark'>Chapter 6</span><br /><a id='x1-1210006'></a>Constructs for Infinite Scale: the ‘root’ keyword</h2>
<!-- l. 3 --><p class='noindent'>Modern software systems face an unprecedented challenge: they must work equally well for a
single user testing locally and for millions of users distributed across the globe. Yet most
programming languages force developers to make fundamental architectural decisions early in
development—choices about persistence, user isolation, and entry points that become increasingly
difficult to change as applications scale. This architectural rigidity creates a painful
discontinuity in the development process, where applications that work perfectly at
small scale require complete rewrites when they need to serve thousands or millions of
users.
</p><!-- l. 5 --><p class='noindent'>Jac addresses this challenge through what we call <span class='ec-lmbx-10'>scale-agnostic programming</span>—a set of
language constructs that enable applications to naturally adapt to different execution scales
without explicit modification. At the heart of this approach is the <span class='ec-lmtt-10'>root </span>keyword, a deceptively
simple construct that fundamentally changes how we think about application state, user contexts,
and program execution models.
</p><!-- l. 7 --><p class='noindent'>The power of scale-agnostic programming becomes apparent when you consider the typical
evolution of a software project. You start with a simple script or prototype, then add user
authentication, then persistence, then multi-tenancy, then distribution across multiple
servers. Each of these transitions traditionally requires significant architectural changes,
often forcing you to rewrite substantial portions of your application. With Jac’s scale
constructs, the same code that works for your initial prototype continues to work as your
application grows, with the runtime system automatically handling the complexity of
scale.
</p><!-- l. 9 --><p class='noindent'>This chapter explores how Jac’s scale constructs—centered around the <span class='ec-lmtt-10'>root </span>keyword—enable this
seamless scaling. You’ll learn how the root node provides a persistent anchor for your application’s
state, how user isolation happens automatically, and how walkers can serve as entry
points for building service-oriented architectures. By the end, you’ll understand how to
write applications that are inherently prepared for any scale, from prototype to global
platform.
</p>
<h3 class='sectionHead' id='the-root-node-a-persistent-anchor-in-topological-space'><span class='titlemark'>6.1   </span> <a id='x1-1220006.1'></a>The Root Node: A Persistent Anchor in Topological Space</h3>
<!-- l. 13 --><p class='noindent'>The <span class='ec-lmtt-10'>root </span>keyword represents one of Jac’s most powerful abstractions: a globally accessible node
that serves as a persistent anchor for your application’s topological space. Unlike regular nodes
that exist only during program execution, the root node and everything connected to it
automatically persists across program runs, creating a natural boundary between ephemeral
computation and persistent state.
</p><!-- l. 15 --><p class='noindent'>To understand the significance of this design, consider how traditional applications handle


persistence. You typically need to explicitly save and load data, manage database connections,
handle serialization, and ensure consistency between your in-memory representation and persistent
storage. The root node eliminates this complexity by making persistence a property of
connectivity rather than explicit operations.
</p><!-- l. 17 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='global-accessibility-and-automatic-persistence'><span class='titlemark'>6.1.1   </span> <a id='x1-1230006.1.1'></a>Global Accessibility and Automatic Persistence</h4>
<!-- l. 19 --><p class='noindent'>The root node is accessible from anywhere in your program through the <span class='ec-lmtt-10'>root </span>keyword,
similar to how <span class='ec-lmtt-10'>self </span>provides access to the current object or <span class='ec-lmtt-10'>here </span>provides access to
the current object-spatial location. This global accessibility, combined with automatic
persistence, creates a programming model where state management becomes remarkably
simple.

</p>
 <!-- l. 21 --><pre class='listings' id='listing-81'><span class='label'><a id='x1-123001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>node</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Profile</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-123002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>username</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-123003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>created_at</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-123004r4'></a><span class='ec-lmr-5'>4</span></span>
<span class='label'><a id='x1-123005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>update</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>update_profile</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-123006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>username</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visitor</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>new_username</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-123007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>report</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-123008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-123009r9'></a><span class='ec-lmr-5'>9</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-123010r10'></a><span class='ec-lmr-5'>10</span></span>
<span class='label'><a id='x1-123011r11'></a><span class='ec-lmr-5'>11</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>create_user_profile</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-123012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>username</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-123013r13'></a><span class='ec-lmr-5'>13</span></span>
<span class='label'><a id='x1-123014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>create</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> <span class='ts1-lmtt8-x-x-87'>`</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>root</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-123015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Check if profile already exists</span>
</span><span class='label'><a id='x1-123016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>existing_profile</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>root</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>--&gt;(</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-123017r17'></a><span class='ec-lmr-5'>17</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>existing_profile</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-123018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>report</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>existing_profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[0];</span></span>
<span class='label'><a id='x1-123019r19'></a><span class='ec-lmr-5'>19</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>else</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-123020r20'></a><span class='ec-lmr-5'>20</span></span><span class='ec-lmtti-10x-x-70'>         </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Create new profile connected to root</span>
</span><span class='label'><a id='x1-123021r21'></a><span class='ec-lmr-5'>21</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>new_profile</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>root</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>++&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>username</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>username</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-123022r22'></a><span class='ec-lmr-5'>22</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>report</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>new_profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[0];</span></span>
<span class='label'><a id='x1-123023r23'></a><span class='ec-lmr-5'>23</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-123024r24'></a><span class='ec-lmr-5'>24</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-123025r25'></a><span class='ec-lmr-5'>25</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-123026r26'></a><span class='ec-lmr-5'>26</span></span></pre>
<!-- l. 49 --><p class='noindent'>In this example, the profile node becomes persistent simply by being connected to the root node
through the <span class='ec-lmtt-10'>++&gt; </span>operator. There’s no explicit save operation, no database schema to manage, and
no serialization code to write. The connection to root is all that’s needed to ensure the profile
persists across program executions.
</p><!-- l. 51 --><p class='noindent'>This persistence-by-reachability model creates an intuitive mental model: if something is
connected to your application’s root, it persists. If it becomes disconnected, it can be
garbage collected. This approach eliminates entire classes of persistence-related bugs while
making the persistence boundaries of your application explicit in the code structure
itself.
</p><!-- l. 53 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='topological-persistence'><span class='titlemark'>6.1.2   </span> <a id='x1-1240006.1.2'></a>Topological Persistence</h4>
<!-- l. 55 --><p class='noindent'>The root node acts as an anchor for a subgraph of your program’s overall topology. Any node
reachable from the root node through a path of edges becomes part of this persistent subgraph
and is automatically preserved between program executions. This creates a natural way to model
complex, interconnected persistent state without the impedance mismatch typically associated
with object-relational mapping.
</p><!-- l. 57 --><p class='noindent'>Consider a social media application where users can follow each other, create posts, and form
groups. In traditional architectures, you’d need separate tables for users, posts, follows, group


memberships, and their relationships. With Jac’s topological persistence, these relationships are
expressed directly in the graph structure:

</p>
 <!-- l. 59 --><pre class='listings' id='listing-82'><span class='label'><a id='x1-124001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>node</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Profile</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-124002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>username</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-124003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>bio</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-124004r4'></a><span class='ec-lmr-5'>4</span></span>
<span class='label'><a id='x1-124005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>follow</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>follow_request</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-124006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>target_profile</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>root</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>--&gt;(</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>where</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>_</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>username</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>==</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visitor</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>target_username</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-124007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>target_profile</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-124008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+&gt;:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Follow</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:+&gt;</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>target_profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[0];</span></span>
<span class='label'><a id='x1-124009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>report</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>status</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>followed</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>user</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>target_profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[0].</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>username</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>};</span></span>
<span class='label'><a id='x1-124010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-124011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-124012r12'></a><span class='ec-lmr-5'>12</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-124013r13'></a><span class='ec-lmr-5'>13</span></span>
<span class='label'><a id='x1-124014r14'></a><span class='ec-lmr-5'>14</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>node</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Tweet</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-124015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>content</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-124016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>created_at</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-124017r17'></a><span class='ec-lmr-5'>17</span></span>
<span class='label'><a id='x1-124018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>like_tweet</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>like_tweet</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-124019r19'></a><span class='ec-lmr-5'>19</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_profile</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>root</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>--&gt;(</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-124020r20'></a><span class='ec-lmr-5'>20</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+&gt;:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Like</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:+&gt;</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>current_profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[0];</span></span>
<span class='label'><a id='x1-124021r21'></a><span class='ec-lmr-5'>21</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>report</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-124022r22'></a><span class='ec-lmr-5'>22</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-124023r23'></a><span class='ec-lmr-5'>23</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-124024r24'></a><span class='ec-lmr-5'>24</span></span>
<span class='label'><a id='x1-124025r25'></a><span class='ec-lmr-5'>25</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>edge</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Follow</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-124026r26'></a><span class='ec-lmr-5'>26</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>followed_at</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>datetime</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>datetime</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>now</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>isoformat</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-124027r27'></a><span class='ec-lmr-5'>27</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-124028r28'></a><span class='ec-lmr-5'>28</span></span>
<span class='label'><a id='x1-124029r29'></a><span class='ec-lmr-5'>29</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>edge</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Post</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-124030r30'></a><span class='ec-lmr-5'>30</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>posted_at</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>datetime</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>datetime</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>now</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>isoformat</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-124031r31'></a><span class='ec-lmr-5'>31</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-124032r32'></a><span class='ec-lmr-5'>32</span></span>
<span class='label'><a id='x1-124033r33'></a><span class='ec-lmr-5'>33</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>edge</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Like</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-124034r34'></a><span class='ec-lmr-5'>34</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>liked_at</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>datetime</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>datetime</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>now</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>isoformat</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-124035r35'></a><span class='ec-lmr-5'>35</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-124036r36'></a><span class='ec-lmr-5'>36</span></span></pre>
<!-- l. 97 --><p class='noindent'>The relationships between users (follows), between users and their posts, and between users and
liked tweets are all expressed as edges in the graph. Because all these nodes are reachable from
user profiles connected to root, the entire social graph persists automatically. Complex
queries like "find all posts from users I follow" become simple graph traversals, and the
persistence layer handles the complexity of storing and retrieving this interconnected
data.
</p><!-- l. 99 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='multiuser-context-through-root-isolation'><span class='titlemark'>6.1.3   </span> <a id='x1-1250006.1.3'></a>Multi-User Context Through Root Isolation</h4>
<!-- l. 101 --><p class='noindent'>One of the most elegant aspects of the root node design is how it naturally handles multi-user
contexts. Each user interacting with your application has their own distinct root node, creating
automatic isolation between user contexts without requiring explicit session management or tenant
isolation logic.
</p><!-- l. 103 --><p class='noindent'>This per-user root isolation means that when a user’s walker accesses <span class='ec-lmtt-10'>root</span>, they’re accessing their
personal persistent subgraph, not a shared global state. This design eliminates entire categories of
security vulnerabilities and data leakage issues that plague traditional multi-tenant
applications.

</p>
 <!-- l. 105 --><pre class='listings' id='listing-83'><span class='label'><a id='x1-125001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit_profile</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-125002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit_profile</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> <span class='ts1-lmtt8-x-x-87'>`</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>root</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-125003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>This finds the current user</span><span class='ts1-lmtti10-x-x-70'>'</span><span class='ec-lmtti-10x-x-70'>s profile, not any profile</span>
</span><span class='label'><a id='x1-125004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[--&gt;(</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>else</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-125005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtti-10x-x-70'>         </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Create profile for this specific user</span>
</span><span class='label'><a id='x1-125006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>new_profile</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>++&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-125007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>new_profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-125008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-125009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-125010r10'></a><span class='ec-lmr-5'>10</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-125011r11'></a><span class='ec-lmr-5'>11</span></span>
<span class='label'><a id='x1-125012r12'></a><span class='ec-lmr-5'>12</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>load_user_feed</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-125013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>results</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>list</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [];</span>
</span><span class='label'><a id='x1-125014r14'></a><span class='ec-lmr-5'>14</span></span>
<span class='label'><a id='x1-125015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>load</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Profile</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-125016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Load tweets from users this specific user follows</span>
</span><span class='label'><a id='x1-125017r17'></a><span class='ec-lmr-5'>17</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>followed_user</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[-&gt;:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Follow</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:-&gt;(</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-125018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tweet</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>followed_user</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>--&gt;(</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Tweet</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-125019r19'></a><span class='ec-lmr-5'>19</span></span><span class='ec-lmtt-8x-x-87'>            </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>results</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>append</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tweet</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_info</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-125020r20'></a><span class='ec-lmr-5'>20</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-125021r21'></a><span class='ec-lmr-5'>21</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-125022r22'></a><span class='ec-lmr-5'>22</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-125023r23'></a><span class='ec-lmr-5'>23</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-125024r24'></a><span class='ec-lmr-5'>24</span></span></pre>
<!-- l. 131 --><p class='noindent'>The beauty of this approach is that the same code works whether you’re building a single-user
desktop application or a multi-million-user web service. The runtime system handles the
complexity of user identification, session management, and data isolation, while your application
code remains focused on business logic.
</p><!-- l. 133 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='walkers-as-entry-points-from-traversals-to-apis'><span class='titlemark'>6.2   </span> <a id='x1-1260006.2'></a>Walkers as Entry Points: From Traversals to APIs</h3>
<!-- l. 135 --><p class='noindent'>Traditional programming languages assume a single entry point—typically a <span class='ec-lmtt-10'>main()</span>
function—where program execution begins. This model works well for batch processing and


command-line tools but poorly represents modern applications that are fundamentally
service-oriented, with multiple entry points corresponding to different user actions or external
events.
</p><!-- l. 137 --><p class='noindent'>Jac’s walker system naturally extends to support multiple entry points through walker entry point
designation. Any walker can be marked as an entry point, automatically generating appropriate
interfaces for external invocation while maintaining the object-spatial programming model
internally.
</p><!-- l. 139 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='entry-point-registration-and-parameter-mapping'><span class='titlemark'>6.2.1   </span> <a id='x1-1270006.2.1'></a>Entry Point Registration and Parameter Mapping</h4>
<!-- l. 141 --><p class='noindent'>Walkers become entry points simply by being designated as such, typically through
configuration or runtime registration. When a walker is designated as an entry point, the Jac
runtime automatically generates appropriate interfaces—REST API endpoints, GraphQL
resolvers, event handlers, or command-line interfaces—based on the walker’s signature and
behavior.

</p>
 <!-- l. 143 --><pre class='listings' id='listing-84'><span class='label'><a id='x1-127001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>update_profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit_profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-127002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>new_username</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-127003r3'></a><span class='ec-lmr-5'>3</span></span>
<span class='label'><a id='x1-127004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtti-10x-x-70'>   </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>This walker automatically becomes available as an API endpoint</span>
</span><span class='label'><a id='x1-127005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtti-10x-x-70'>   </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>POST /update_profile with {"new_username": "john_doe"}</span>
</span><span class='label'><a id='x1-127006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-127007r7'></a><span class='ec-lmr-5'>7</span></span>
<span class='label'><a id='x1-127008r8'></a><span class='ec-lmr-5'>8</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>create_tweet</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit_profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-127009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>content</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-127010r10'></a><span class='ec-lmr-5'>10</span></span>
<span class='label'><a id='x1-127011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tweet</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Profile</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-127012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>embedding</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>vectorizer</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>fit_transform</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>([</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>content</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>])</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>toarray</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tolist</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-127013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tweet_node</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+&gt;:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Post</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:+&gt;</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Tweet</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span>
<span class='label'><a id='x1-127014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>content</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>content</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-127015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>embedding</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>embedding</span></span>
<span class='label'><a id='x1-127016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-127017r17'></a><span class='ec-lmr-5'>17</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>report</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tweet_node</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[0];</span></span>
<span class='label'><a id='x1-127018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-127019r19'></a><span class='ec-lmr-5'>19</span></span>
<span class='label'><a id='x1-127020r20'></a><span class='ec-lmr-5'>20</span></span><span class='ec-lmtti-10x-x-70'>   </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>This walker becomes available as:</span>
</span><span class='label'><a id='x1-127021r21'></a><span class='ec-lmr-5'>21</span></span><span class='ec-lmtti-10x-x-70'>   </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>POST /create_tweet with {"content": "Hello, world!"}</span>
</span><span class='label'><a id='x1-127022r22'></a><span class='ec-lmr-5'>22</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-127023r23'></a><span class='ec-lmr-5'>23</span></span>
<span class='label'><a id='x1-127024r24'></a><span class='ec-lmr-5'>24</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>load_feed</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit_profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-127025r25'></a><span class='ec-lmr-5'>25</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>search_query</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-127026r26'></a><span class='ec-lmr-5'>26</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>results</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>list</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [];</span>
</span><span class='label'><a id='x1-127027r27'></a><span class='ec-lmr-5'>27</span></span>
<span class='label'><a id='x1-127028r28'></a><span class='ec-lmr-5'>28</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>load</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Profile</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-127029r29'></a><span class='ec-lmr-5'>29</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Load tweets from followed users</span>
</span><span class='label'><a id='x1-127030r30'></a><span class='ec-lmr-5'>30</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>user_node</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[-&gt;:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Follow</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:-&gt;(</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-127031r31'></a><span class='ec-lmr-5'>31</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>user_node</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>--&gt;(</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Tweet</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-127032r32'></a><span class='ec-lmr-5'>32</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-127033r33'></a><span class='ec-lmr-5'>33</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-127034r34'></a><span class='ec-lmr-5'>34</span></span>
<span class='label'><a id='x1-127035r35'></a><span class='ec-lmr-5'>35</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>search_tweet</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Tweet</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-127036r36'></a><span class='ec-lmr-5'>36</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>search_query</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-127037r37'></a><span class='ec-lmr-5'>37</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>similarity</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>search_tweets</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>search_query</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>content</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-127038r38'></a><span class='ec-lmr-5'>38</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>results</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>append</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>({</span></span>
<span class='label'><a id='x1-127039r39'></a><span class='ec-lmr-5'>39</span></span><span class='ec-lmtt-8x-x-87'>            </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>tweet</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_info</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-127040r40'></a><span class='ec-lmr-5'>40</span></span><span class='ec-lmtt-8x-x-87'>            </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>similarity</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>similarity</span></span>
<span class='label'><a id='x1-127041r41'></a><span class='ec-lmr-5'>41</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>})</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-127042r42'></a><span class='ec-lmr-5'>42</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>else</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-127043r43'></a><span class='ec-lmr-5'>43</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>results</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>append</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_info</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-127044r44'></a><span class='ec-lmr-5'>44</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-127045r45'></a><span class='ec-lmr-5'>45</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-127046r46'></a><span class='ec-lmr-5'>46</span></span>
<span class='label'><a id='x1-127047r47'></a><span class='ec-lmr-5'>47</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>report_feed</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>exit</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-127048r48'></a><span class='ec-lmr-5'>48</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>results</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>sort</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>key</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>lambda</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>x</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>similarity</span></span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>0),</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>reverse</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>True</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-127049r49'></a><span class='ec-lmr-5'>49</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>report</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>results</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-127050r50'></a><span class='ec-lmr-5'>50</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-127051r51'></a><span class='ec-lmr-5'>51</span></span>
<span class='label'><a id='x1-127052r52'></a><span class='ec-lmr-5'>52</span></span><span class='ec-lmtti-10x-x-70'>   </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>This walker becomes available as:</span>
</span><span class='label'><a id='x1-127053r53'></a><span class='ec-lmr-5'>53</span></span><span class='ec-lmtti-10x-x-70'>   </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>GET /load_feed?search_query=python</span>
</span><span class='label'><a id='x1-127054r54'></a><span class='ec-lmr-5'>54</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-127055r55'></a><span class='ec-lmr-5'>55</span></span></pre>
<!-- l. 200 --><p class='noindent'>The runtime system handles the mechanical details of parameter validation, authentication,
response formatting, and error handling. Your walker code focuses purely on the business logic of
traversing the user’s graph and collecting relevant information.
</p><!-- l. 202 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='execution-context-management'><span class='titlemark'>6.2.2   </span> <a id='x1-1280006.2.2'></a>Execution Context Management</h4>
<!-- l. 204 --><p class='noindent'>When a walker entry point is invoked externally, the runtime system automatically establishes the
appropriate execution context. This includes identifying the user (through authentication tokens,
session cookies, or other mechanisms), locating their root node, and setting up proper isolation
boundaries.
</p><!-- l. 206 --><p class='noindent'>This automatic context management is crucial for building secure, multi-tenant applications.
The same walker code that works for a single user automatically works for millions of
users, with the runtime ensuring that each invocation operates within the correct user
context.

</p>
 <!-- l. 208 --><pre class='listings' id='listing-85'><span class='label'><a id='x1-128001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>load_user_profiles</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-128002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtti-10x-x-70'>   </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>This walker has special permissions to see across user boundaries</span>
</span><span class='label'><a id='x1-128003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>obj</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>__specs__</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-128004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>static</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>auth</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>bool</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>False</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>No authentication required</span>
</span><span class='label'><a id='x1-128005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-128006r6'></a><span class='ec-lmr-5'>6</span></span>
<span class='label'><a id='x1-128007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>load_profiles</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> <span class='ts1-lmtt8-x-x-87'>`</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>root</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-128008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>profiles</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>list</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [];</span>
</span><span class='label'><a id='x1-128009r9'></a><span class='ec-lmr-5'>9</span></span>
<span class='label'><a id='x1-128010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>allroots() provides access to all user root nodes</span>
</span><span class='label'><a id='x1-128011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>(requires special permissions)</span>
</span><span class='label'><a id='x1-128012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>each_root</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>allroots</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-128013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>profile</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>each_root</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>--&gt;(</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>][0];</span></span>
<span class='label'><a id='x1-128014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>profiles</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>append</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>({</span></span>
<span class='label'><a id='x1-128015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>            </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>username</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-128016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>            </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>id</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>jid</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span>
<span class='label'><a id='x1-128017r17'></a><span class='ec-lmr-5'>17</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>})</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-128018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-128019r19'></a><span class='ec-lmr-5'>19</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-128020r20'></a><span class='ec-lmr-5'>20</span></span>
<span class='label'><a id='x1-128021r21'></a><span class='ec-lmr-5'>21</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>report_profiles</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>exit</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-128022r22'></a><span class='ec-lmr-5'>22</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>report</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>profiles</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-128023r23'></a><span class='ec-lmr-5'>23</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-128024r24'></a><span class='ec-lmr-5'>24</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-128025r25'></a><span class='ec-lmr-5'>25</span></span></pre>


<!-- l. 235 --><p class='noindent'>The <span class='ec-lmtt-10'>allroots() </span>function demonstrates how Jac can provide controlled access to cross-user data
when needed (for administrative functions, analytics, etc.) while maintaining the default isolation
model for regular application code.
</p><!-- l. 237 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='scaleagnostic-programming-in-practice'><span class='titlemark'>6.3   </span> <a id='x1-1290006.3'></a>Scale-Agnostic Programming in Practice</h3>
<!-- l. 239 --><p class='noindent'>The combination of persistent root nodes and walker entry points creates a programming model
that naturally adapts to different scales without requiring architectural changes. To understand
how this works in practice, let’s examine how the same Jac code behaves at different
scales.
</p><!-- l. 241 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='development-scale-single-user-local-execution'><span class='titlemark'>6.3.1   </span> <a id='x1-1300006.3.1'></a>Development Scale: Single User, Local Execution</h4>
<!-- l. 243 --><p class='noindent'>During development, your Jac application runs locally with a single user context. The root node
persists to local storage, walker entry points are accessible through a development server or
command-line interface, and the entire application state fits in memory.

</p>
 <!-- l. 245 --><pre class='listings' id='listing-86'><span class='label'><a id='x1-130001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Development: jac run social_app.jac</span>
</span><span class='label'><a id='x1-130002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>- Single root node persisted locally</span>
</span><span class='label'><a id='x1-130003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>- Walker entry points available at http://localhost:8000</span>
</span><span class='label'><a id='x1-130004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>- All data in local files or embedded database</span>
</span><span class='label'><a id='x1-130005r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-130006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>create_tweet</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit_profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-130007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>content</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-130008r8'></a><span class='ec-lmr-5'>8</span></span>
<span class='label'><a id='x1-130009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tweet</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Profile</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-130010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Same code works for development and production</span>
</span><span class='label'><a id='x1-130011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tweet_node</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+&gt;:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Post</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:+&gt;</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Tweet</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>content</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>content</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-130012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>report</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tweet_node</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[0];</span></span>
<span class='label'><a id='x1-130013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-130014r14'></a><span class='ec-lmr-5'>14</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-130015r15'></a><span class='ec-lmr-5'>15</span></span></pre>
<!-- l. 262 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='production-scale-multiuser-distributed-execution'><span class='titlemark'>6.3.2   </span> <a id='x1-1310006.3.2'></a>Production Scale: Multi-User, Distributed Execution</h4>
<!-- l. 264 --><p class='noindent'>In production, the same code automatically adapts to serve multiple users with proper
isolation. The runtime system handles user authentication, distributes root nodes across
database shards, implements caching strategies, and scales walker execution across multiple
servers.

</p>
 <!-- l. 266 --><pre class='listings' id='listing-87'><span class='label'><a id='x1-131001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Production: same code, different runtime configuration</span>
</span><span class='label'><a id='x1-131002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>- Multiple root nodes, one per user</span>
</span><span class='label'><a id='x1-131003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>- Walker entry points become REST API endpoints</span>
</span><span class='label'><a id='x1-131004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>- Data distributed across database clusters</span>
</span><span class='label'><a id='x1-131005r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>- Automatic scaling based on load</span>
</span><span class='label'><a id='x1-131006r6'></a><span class='ec-lmr-5'>6</span></span>
<span class='label'><a id='x1-131007r7'></a><span class='ec-lmr-5'>7</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>The walker code remains identical:</span>
</span><span class='label'><a id='x1-131008r8'></a><span class='ec-lmr-5'>8</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>create_tweet</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit_profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-131009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>content</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-131010r10'></a><span class='ec-lmr-5'>10</span></span>
<span class='label'><a id='x1-131011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tweet</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Profile</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-131012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Runtime handles:</span>
</span><span class='label'><a id='x1-131013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>- User identification and authentication</span>
</span><span class='label'><a id='x1-131014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>- Loading user</span><span class='ts1-lmtti10-x-x-70'>'</span><span class='ec-lmtti-10x-x-70'>s root node from distributed storage</span>
</span><span class='label'><a id='x1-131015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>- Ensuring isolation from other users</span>
</span><span class='label'><a id='x1-131016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>- Persisting changes back to storage</span>
</span><span class='label'><a id='x1-131017r17'></a><span class='ec-lmr-5'>17</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tweet_node</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+&gt;:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Post</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:+&gt;</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Tweet</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>content</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>content</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-131018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>report</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tweet_node</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[0];</span></span>
<span class='label'><a id='x1-131019r19'></a><span class='ec-lmr-5'>19</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-131020r20'></a><span class='ec-lmr-5'>20</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-131021r21'></a><span class='ec-lmr-5'>21</span></span></pre>


<!-- l. 289 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='global-scale-geographic-distribution'><span class='titlemark'>6.3.3   </span> <a id='x1-1320006.3.3'></a>Global Scale: Geographic Distribution</h4>
<!-- l. 291 --><p class='noindent'>At global scale, the runtime can distribute user root nodes geographically, placing data close to
users for optimal performance. Walker executions can be routed to the appropriate geographic
region automatically, while maintaining consistency across the global system.
</p><!-- l. 293 --><p class='noindent'>The key insight is that your application code doesn’t change—the scale-agnostic constructs
provide enough semantic information for the runtime to make appropriate scaling decisions
automatically.
</p><!-- l. 295 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='advanced-patterns-with-scale-constructs'><span class='titlemark'>6.4   </span> <a id='x1-1330006.4'></a>Advanced Patterns with Scale Constructs</h3>
<!-- l. 297 --><p class='noindent'>The root keyword and walker entry points enable sophisticated architectural patterns that would
be difficult or impossible to express cleanly in traditional languages. These patterns leverage the
topological nature of Jac’s programming model to create naturally distributed, resilient
systems.
</p><!-- l. 299 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='crossuser-interactions'><span class='titlemark'>6.4.1   </span> <a id='x1-1340006.4.1'></a>Cross-User Interactions</h4>
<!-- l. 301 --><p class='noindent'>While users are typically isolated through separate root nodes, controlled cross-user interactions
are essential for social applications, collaborative systems, and marketplace platforms. Jac
provides mechanisms for safe cross-user operations while maintaining security and isolation
guarantees.

</p>
 <!-- l. 303 --><pre class='listings' id='listing-88'><span class='label'><a id='x1-134001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>send_message</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-134002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>recipient_username</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-134003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>message_content</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-134004r4'></a><span class='ec-lmr-5'>4</span></span>
<span class='label'><a id='x1-134005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>send</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Profile</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-134006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Find recipient across all users (requires permission)</span>
</span><span class='label'><a id='x1-134007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>recipient</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>find_user_by_username</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>recipient_username</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-134008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>recipient</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-134009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtti-10x-x-70'>         </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Create message in sender</span><span class='ts1-lmtti10-x-x-70'>'</span><span class='ec-lmtti-10x-x-70'>s space</span>
</span><span class='label'><a id='x1-134010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>message</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+&gt;:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Sent</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:+&gt;</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Message</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span>
<span class='label'><a id='x1-134011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>            </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>content</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>message_content</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-134012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>            </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>recipient</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>recipient_username</span></span>
<span class='label'><a id='x1-134013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-134014r14'></a><span class='ec-lmr-5'>14</span></span>
<span class='label'><a id='x1-134015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtti-10x-x-70'>         </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Notify recipient</span><span class='ts1-lmtti10-x-x-70'>'</span><span class='ec-lmtti-10x-x-70'>s space (cross-user operation)</span>
</span><span class='label'><a id='x1-134016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>recipient_root</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_user_root</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>recipient_username</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-134017r17'></a><span class='ec-lmr-5'>17</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>recipient_profile</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>recipient_root</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>--&gt;(</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>][0];</span></span>
<span class='label'><a id='x1-134018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>message</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+&gt;:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Received</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:+&gt;</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>recipient_profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-134019r19'></a><span class='ec-lmr-5'>19</span></span>
<span class='label'><a id='x1-134020r20'></a><span class='ec-lmr-5'>20</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>report</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>status</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>sent</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>message_id</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>jid</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>message</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>};</span></span>
<span class='label'><a id='x1-134021r21'></a><span class='ec-lmr-5'>21</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-134022r22'></a><span class='ec-lmr-5'>22</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-134023r23'></a><span class='ec-lmr-5'>23</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-134024r24'></a><span class='ec-lmr-5'>24</span></span></pre>
<!-- l. 329 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='distributed-computation-patterns'><span class='titlemark'>6.4.2   </span> <a id='x1-1350006.4.2'></a>Distributed Computation Patterns</h4>


<!-- l. 331 --><p class='noindent'>Walker entry points can coordinate distributed computations across multiple user contexts
or system boundaries. This enables patterns like map-reduce operations, distributed
consensus, and cross-shard transactions while maintaining the object-spatial programming
model.

</p>
 <!-- l. 333 --><pre class='listings' id='listing-89'><span class='label'><a id='x1-135001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>compute_network_metrics</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-135002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>metric_type</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-135003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>results</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>dict</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= {};</span>
</span><span class='label'><a id='x1-135004r4'></a><span class='ec-lmr-5'>4</span></span>
<span class='label'><a id='x1-135005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>compute</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> <span class='ts1-lmtt8-x-x-87'>`</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>root</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-135006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtti-10x-x-70'>      </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Coordinate computation across all user graphs</span>
</span><span class='label'><a id='x1-135007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>user_root</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>allroots</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-135008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>user_metrics</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>compute_user_metrics</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>user_root</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-135009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>results</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>user_root</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>user_metrics</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-135010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-135011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-135012r12'></a><span class='ec-lmr-5'>12</span></span>
<span class='label'><a id='x1-135013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>compute_user_metrics</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>user_root</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>dict</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-135014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>profile</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>user_root</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>--&gt;(</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>][0];</span></span>
<span class='label'><a id='x1-135015r15'></a><span class='ec-lmr-5'>15</span></span>
<span class='label'><a id='x1-135016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>metric_type</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>==</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>influence</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-135017r17'></a><span class='ec-lmr-5'>17</span></span><span class='ec-lmtti-10x-x-70'>         </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Calculate user influence based on network topology</span>
</span><span class='label'><a id='x1-135018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>followers</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>len</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>([</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>&lt;-:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Follow</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:&lt;-])</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-135019r19'></a><span class='ec-lmr-5'>19</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>following</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>len</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>([</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>-&gt;:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Follow</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:-&gt;])</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-135020r20'></a><span class='ec-lmr-5'>20</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>posts</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>len</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>([</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>profile</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>--&gt;(</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Tweet</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>])</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-135021r21'></a><span class='ec-lmr-5'>21</span></span>
<span class='label'><a id='x1-135022r22'></a><span class='ec-lmr-5'>22</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-135023r23'></a><span class='ec-lmr-5'>23</span></span><span class='ec-lmtt-8x-x-87'>            </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>followers</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>followers</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-135024r24'></a><span class='ec-lmr-5'>24</span></span><span class='ec-lmtt-8x-x-87'>            </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>following</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>following</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-135025r25'></a><span class='ec-lmr-5'>25</span></span><span class='ec-lmtt-8x-x-87'>            </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>posts</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>posts</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-135026r26'></a><span class='ec-lmr-5'>26</span></span><span class='ec-lmtt-8x-x-87'>            </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>influence_score</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>followers</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>* 0.6 +</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>posts</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>* 0.4</span>
</span><span class='label'><a id='x1-135027r27'></a><span class='ec-lmr-5'>27</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>};</span></span>
<span class='label'><a id='x1-135028r28'></a><span class='ec-lmr-5'>28</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-135029r29'></a><span class='ec-lmr-5'>29</span></span>
<span class='label'><a id='x1-135030r30'></a><span class='ec-lmr-5'>30</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{};</span>
</span><span class='label'><a id='x1-135031r31'></a><span class='ec-lmr-5'>31</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-135032r32'></a><span class='ec-lmr-5'>32</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-135033r33'></a><span class='ec-lmr-5'>33</span></span></pre>
<!-- l. 368 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='eventdriven-architectures'><span class='titlemark'>6.4.3   </span> <a id='x1-1360006.4.3'></a>Event-Driven Architectures</h4>
<!-- l. 370 --><p class='noindent'>Walker entry points naturally support event-driven patterns, where external events trigger walker
executions that propagate through the user’s graph topology. This enables reactive systems that
respond to changes in real-time while maintaining consistency.

</p>
 <!-- l. 372 --><pre class='listings' id='listing-90'><span class='label'><a id='x1-136001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>handle_user_action</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-136002r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>action_type</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-136003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>action_data</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>dict</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-136004r4'></a><span class='ec-lmr-5'>4</span></span>
<span class='label'><a id='x1-136005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>process</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Profile</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-136006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>match</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>action_type</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-136007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>case</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>post_liked</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-136008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtti-10x-x-70'>            </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Propagate like notification</span>
</span><span class='label'><a id='x1-136009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>            </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>post_id</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>action_data</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>post_id</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-136010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>            </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>post</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_node_by_id</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>post_id</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-136011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>            </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>author</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>post</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>&lt;-:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Post</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:&lt;-][0];</span></span>
<span class='label'><a id='x1-136012r12'></a><span class='ec-lmr-5'>12</span></span>
<span class='label'><a id='x1-136013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtti-10x-x-70'>            </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Create notification in author</span><span class='ts1-lmtti10-x-x-70'>'</span><span class='ec-lmtti-10x-x-70'>s space</span>
</span><span class='label'><a id='x1-136014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>            </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>notification</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>author</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+&gt;:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Notified</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:+&gt;</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Notification</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span>
<span class='label'><a id='x1-136015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>               </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>type</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>like</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-136016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>               </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>from_user</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>username</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-136017r17'></a><span class='ec-lmr-5'>17</span></span><span class='ec-lmtt-8x-x-87'>               </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>content</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>f</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>username</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>liked</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>your</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>post</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span>
<span class='label'><a id='x1-136018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtt-8x-x-87'>            </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-136019r19'></a><span class='ec-lmr-5'>19</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-136020r20'></a><span class='ec-lmr-5'>20</span></span>
<span class='label'><a id='x1-136021r21'></a><span class='ec-lmr-5'>21</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>case</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>user_followed</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-136022r22'></a><span class='ec-lmr-5'>22</span></span><span class='ec-lmtti-10x-x-70'>            </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Update recommendation algorithms</span>
</span><span class='label'><a id='x1-136023r23'></a><span class='ec-lmr-5'>23</span></span><span class='ec-lmtt-8x-x-87'>            </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>update_user_recommendations</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-136024r24'></a><span class='ec-lmr-5'>24</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-136025r25'></a><span class='ec-lmr-5'>25</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-136026r26'></a><span class='ec-lmr-5'>26</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-136027r27'></a><span class='ec-lmr-5'>27</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-136028r28'></a><span class='ec-lmr-5'>28</span></span></pre>
<!-- l. 402 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='performance-and-optimization-considerations'><span class='titlemark'>6.5   </span> <a id='x1-1370006.5'></a>Performance and Optimization Considerations</h3>
<!-- l. 404 --><p class='noindent'>Scale-agnostic programming doesn’t mean ignoring performance—it means providing the runtime
system with enough semantic information to make optimal scaling decisions automatically. Jac’s
scale constructs enable sophisticated optimizations that would be difficult to implement
manually.
</p><!-- l. 406 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='automatic-caching-and-preloading'><span class='titlemark'>6.5.1   </span> <a id='x1-1380006.5.1'></a>Automatic Caching and Preloading</h4>
<!-- l. 408 --><p class='noindent'>The runtime system can analyze graph access patterns and automatically implement caching
strategies, preloading frequently accessed nodes and edges to minimize latency. Because the
topological relationships are explicit in the code, the runtime can make intelligent decisions about
what to cache and when.


</p><!-- l. 410 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='distributed-execution-optimization'><span class='titlemark'>6.5.2   </span> <a id='x1-1390006.5.2'></a>Distributed Execution Optimization</h4>
<!-- l. 412 --><p class='noindent'>Walker traversals can be automatically distributed across multiple servers based on the
topology of the data they’re accessing. If a walker needs to traverse a large subgraph,
the runtime can partition the traversal across multiple machines and aggregate the
results.
</p><!-- l. 414 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='storage-optimization'><span class='titlemark'>6.5.3   </span> <a id='x1-1400006.5.3'></a>Storage Optimization</h4>
<!-- l. 416 --><p class='noindent'>The persistence-by-reachability model enables sophisticated storage optimizations. Frequently
accessed subgraphs can be kept in fast storage, while rarely accessed data can be moved to
cheaper, slower storage. The runtime can make these decisions based on actual usage patterns
rather than manual configuration.
</p><!-- l. 418 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='migration-strategies-and-best-practices'><span class='titlemark'>6.6   </span> <a id='x1-1410006.6'></a>Migration Strategies and Best Practices</h3>
<!-- l. 420 --><p class='noindent'>Adopting scale-agnostic programming requires understanding how to migrate existing applications
and design new ones to take full advantage of Jac’s scale constructs. This section provides
practical guidance for both scenarios.
</p><!-- l. 422 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='migrating-existing-applications'><span class='titlemark'>6.6.1   </span> <a id='x1-1420006.6.1'></a>Migrating Existing Applications</h4>
<!-- l. 424 --><p class='noindent'>When migrating an existing application to use Jac’s scale constructs, start by identifying the core
entities and relationships in your current system. These typically map naturally to nodes and
edges in the Jac model.

</p>
 <!-- l. 426 --><pre class='listings' id='listing-91'><span class='label'><a id='x1-142001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Before: Traditional database-backed user system</span>
</span><span class='label'><a id='x1-142002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>class</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>User</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-142003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>__init__</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>username</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-142004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>username</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>username</span></span>
<span class='label'><a id='x1-142005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>id</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>generate_user_id</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span>
<span class='label'><a id='x1-142006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>save_to_database</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span>
<span class='label'><a id='x1-142007r7'></a><span class='ec-lmr-5'>7</span></span>
<span class='label'><a id='x1-142008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>follow</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>other_user</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span>
<span class='label'><a id='x1-142009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>create_follow_relationship</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>id</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>other_user</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>id</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span>
<span class='label'><a id='x1-142010r10'></a><span class='ec-lmr-5'>10</span></span>
<span class='label'><a id='x1-142011r11'></a><span class='ec-lmr-5'>11</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>After: Jac scale-agnostic version</span>
</span><span class='label'><a id='x1-142012r12'></a><span class='ec-lmr-5'>12</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>node</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Profile</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-142013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>username</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-142014r14'></a><span class='ec-lmr-5'>14</span></span>
<span class='label'><a id='x1-142015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>follow</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>follow_request</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-142016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>target</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>find_profile_by_username</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visitor</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>target_username</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-142017r17'></a><span class='ec-lmr-5'>17</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>target</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-142018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+&gt;:</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Follow</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:+&gt;</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>target</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-142019r19'></a><span class='ec-lmr-5'>19</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>report</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>status</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>followed</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>};</span></span>
<span class='label'><a id='x1-142020r20'></a><span class='ec-lmr-5'>20</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-142021r21'></a><span class='ec-lmr-5'>21</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-142022r22'></a><span class='ec-lmr-5'>22</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-142023r23'></a><span class='ec-lmr-5'>23</span></span></pre>


<!-- l. 451 --><p class='noindent'>The migration typically involves: 1. Converting database tables to node types 2. Converting
foreign key relationships to edges 3. Converting API endpoints to walker entry points 4.
Connecting core entities to the root node for persistence
</p><!-- l. 457 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='designing-scaleagnostic-applications'><span class='titlemark'>6.6.2   </span> <a id='x1-1430006.6.2'></a>Designing Scale-Agnostic Applications</h4>
<!-- l. 459 --><p class='noindent'>When designing new applications with scale-agnostic principles, think in terms of user-centric
topologies rather than global data models. Each user should have their own subgraph connected to
their root node, with controlled mechanisms for cross-user interactions.

</p>
 <!-- l. 461 --><pre class='listings' id='listing-92'><span class='label'><a id='x1-143001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Design pattern: User-centric topology</span>
</span><span class='label'><a id='x1-143002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>node</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>UserRoot</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-143003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtti-10x-x-70'>   </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Each user</span><span class='ts1-lmtti10-x-x-70'>'</span><span class='ec-lmtti-10x-x-70'>s personal space</span>
</span><span class='label'><a id='x1-143004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-143005r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-143006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>node</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Profile</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-143007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtti-10x-x-70'>   </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>User</span><span class='ts1-lmtti10-x-x-70'>'</span><span class='ec-lmtti-10x-x-70'>s identity and preferences</span>
</span><span class='label'><a id='x1-143008r8'></a><span class='ec-lmr-5'>8</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-143009r9'></a><span class='ec-lmr-5'>9</span></span>
<span class='label'><a id='x1-143010r10'></a><span class='ec-lmr-5'>10</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>node</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Document</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-143011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtti-10x-x-70'>   </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>User</span><span class='ts1-lmtti10-x-x-70'>'</span><span class='ec-lmtti-10x-x-70'>s private documents</span>
</span><span class='label'><a id='x1-143012r12'></a><span class='ec-lmr-5'>12</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-143013r13'></a><span class='ec-lmr-5'>13</span></span>
<span class='label'><a id='x1-143014r14'></a><span class='ec-lmr-5'>14</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>node</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>SharedSpace</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-143015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtti-10x-x-70'>   </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Controlled sharing between users</span>
</span><span class='label'><a id='x1-143016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>permissions</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>dict</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-143017r17'></a><span class='ec-lmr-5'>17</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-143018r18'></a><span class='ec-lmr-5'>18</span></span>
<span class='label'><a id='x1-143019r19'></a><span class='ec-lmr-5'>19</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>edge</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Owns</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{}</span>
</span><span class='label'><a id='x1-143020r20'></a><span class='ec-lmr-5'>20</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>edge</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Collaborates</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{}</span>
</span><span class='label'><a id='x1-143021r21'></a><span class='ec-lmr-5'>21</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>edge</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Shares</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{}</span>

</span><span class='label'><a id='x1-143022r22'></a><span class='ec-lmr-5'>22</span></span></pre>


<h2 class='chapterHead' id='building-an-agentic-ai-application-with-jac'><span class='titlemark'>Chapter 7</span><br /><a id='x1-1440007'></a>Building an Agentic AI Application with Jac</h2>
<!-- l. 3 --><p class='noindent'>Throughout the previous chapters, you’ve learned about Jac’s foundational concepts: how it
supersets Python while adding powerful abstractions, the shift from object-oriented to
object-spatial programming, native AI integration through meaning-typed programming,
and constructs for infinite scale. This chapter brings all these concepts together in a
comprehensive, step-by-step implementation of a real-world agentic AI application—a
multi-agent task manager that demonstrates every major Jac feature in a cohesive, practical
system.
</p><!-- l. 5 --><p class='noindent'>The application we’ll build showcases the power of combining Jac’s object-spatial programming
model with AI agents. Rather than a monolithic AI system, we’ll create specialized agents that
collaborate through a shared object-spatial environment. Each agent handles specific
domains—task management, email automation, and general conversation—while maintaining
context through persistent sessions and coordinating through a sophisticated routing
system.
</p><!-- l. 7 --><p class='noindent'>What makes this example particularly valuable is how naturally Jac’s features compose. The
object-spatial programming model provides the architectural foundation, with nodes representing
different agent capabilities and walkers orchestrating interactions between them. AI integration
through the <span class='ec-lmtt-10'>by </span>keyword transforms complex natural language processing into simple function
signatures. The root node ensures persistence without explicit database management. Together,
these features enable building sophisticated AI systems with remarkable clarity and
maintainability.
</p><!-- l. 9 --><p class='noindent'>As you work through this implementation, pay attention to how each Jac feature serves a specific
architectural purpose. The object-spatial model isn’t just different syntax—it’s a fundamentally
better way to express the connected, collaborative nature of modern AI systems. The AI
integration isn’t just convenient syntax—it’s a paradigm shift that eliminates the accidental
complexity typically associated with AI programming. The scale constructs aren’t just persistence
helpers—they’re the foundation for building systems that work equally well for one user or
millions.
</p>
<h3 class='sectionHead' id='project-architecture-overview'><span class='titlemark'>7.1   </span> <a id='x1-1450007.1'></a>Project Architecture Overview</h3>
<!-- l. 13 --><p class='noindent'>Before diving into implementation details, it’s crucial to understand the overall architecture
of our agentic task manager. The system demonstrates a sophisticated multi-agent
architecture where specialized AI agents collaborate through a shared object-spatial
environment, each handling specific domains while maintaining context through persistent
sessions.
</p><!-- l. 15 --><p class='noindent'>


</p>
<h4 class='subsectionHead' id='system-design-using-objectspatial-programming'><span class='titlemark'>7.1.1   </span> <a id='x1-1460007.1.1'></a>System Design Using Object-Spatial Programming</h4>
<!-- l. 17 --><p class='noindent'>The architecture leverages Jac’s object-spatial programming model to create a natural
representation of agent collaboration. Rather than thinking in terms of isolated objects
exchanging messages, we model the system as a connected graph where agents navigate
through shared spaces, accessing and modifying persistent state through object-spatial
relationships.
</p><!-- l. 19 --><p class='noindent'>At the foundation level, we have a <span class='ec-lmtt-10'>Memory </span>node connected to the root that serves as the persistent
anchor for all system state. Connected to this memory are <span class='ec-lmtt-10'>Session </span>nodes that maintain
conversation history and context for individual interactions. This object-spatial organization
means that persistence happens automatically—anything connected to the root persists, while
temporary computation happens in disconnected spaces.
</p><!-- l. 21 --><p class='noindent'>The agent architecture builds on this foundation with specialized <span class='ec-lmtt-10'>Toolbox </span>nodes that
encapsulate domain-specific AI capabilities. Rather than monolithic AI systems, we
create focused agents: <span class='ec-lmtt-10'>TaskHandling </span>for schedule management, <span class='ec-lmtt-10'>EmailHandling </span>for
communication automation, and <span class='ec-lmtt-10'>GeneralChat </span>for conversational fallback. Each toolbox
implements the same interface but provides radically different behaviors through AI
delegation.
</p><!-- l. 23 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='agent-orchestration-through-walkers'><span class='titlemark'>7.1.2   </span> <a id='x1-1470007.1.2'></a>Agent Orchestration Through Walkers</h4>
<!-- l. 25 --><p class='noindent'>Walkers in our system serve as the active components that orchestrate agent interactions. The
primary <span class='ec-lmtt-10'>agent </span>walker acts as a sophisticated router, analyzing incoming requests and dynamically
instantiating the appropriate toolbox nodes. This walker demonstrates several advanced Jac
patterns: dynamic node creation, object-spatial navigation for context retrieval, and AI-powered
decision making for routing logic.
</p><!-- l. 27 --><p class='noindent'>Supporting walkers handle auxiliary operations: <span class='ec-lmtt-10'>get_all_sessions </span>provides session management
capabilities, while <span class='ec-lmtt-10'>get_all_tasks </span>enables task retrieval across the system. These walkers
showcase how Jac’s object-spatial model makes complex queries simple—finding all tasks becomes
a straightforward graph traversal rather than complex database operations.
</p><!-- l. 29 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='ai-integration-architecture'><span class='titlemark'>7.1.3   </span> <a id='x1-1480007.1.3'></a>AI Integration Architecture</h4>


<!-- l. 31 --><p class='noindent'>The AI integration demonstrates Jac’s meaning-typed programming in action. Rather than
explicit prompt engineering and response parsing, we use the <span class='ec-lmtt-10'>by </span>keyword to delegate
implementation to AI models based on semantic intent inferred from function signatures and
context. This approach eliminates the boilerplate typically associated with AI programming while
providing sophisticated capabilities.
</p><!-- l. 33 --><p class='noindent'>The system uses multiple AI integration patterns: simple function delegation for tasks like
translation and summarization, method delegation for context-aware operations, and advanced
tool composition using the ReAct methodology. Semantic annotations through the <span class='ec-lmtt-10'>sem </span>keyword
provide additional guidance to AI models, ensuring reliable behavior while maintaining declarative
simplicity.
</p><!-- l. 35 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='codebase-organization'><span class='titlemark'>7.2   </span> <a id='x1-1490007.2'></a>Codebase Organization</h3>
<!-- l. 37 --><p class='noindent'>Before we begin implementing the system, it’s important to understand the file structure and
organization. This multi-agent task manager consists of several Jac modules that work
together to create a cohesive system. Here’s the recommended directory structure and file
organization:
</p><!-- l. 39 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='directory-structure'><span class='titlemark'>7.2.1   </span> <a id='x1-1500007.2.1'></a>Directory Structure</h4>
<!-- l. 41 -->

 <pre class='lstlisting' id='listing-93'><span class='label'><a id='x1-150001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>task_manager</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>/</span></span>
<span class='label'><a id='x1-150002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>|-</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>utils</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>jac</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Utility functions (datetime helpers)</span>
</span><span class='label'><a id='x1-150003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>|-</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>agent_core</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>jac</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Core spatial architecture (Memory, Session, Toolbox, agent walker)</span>
</span><span class='label'><a id='x1-150004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>|-</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>main</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>jac</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Specialized toolbox implementations and routing</span>
</span><span class='label'><a id='x1-150005r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>|-</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>main</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>impl</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>jac</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Implementation blocks and semantic annotations</span>
</span><span class='label'><a id='x1-150006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>|-</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>env</span></span><span style='color:#000000'> </span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Environment configuration (optional)</span></span></pre>

<!-- l. 50 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='file-responsibilities'><span class='titlemark'>7.2.2   </span> <a id='x1-1510007.2.2'></a>File Responsibilities</h4>
<!-- l. 52 --><p class='noindent'>Each file in our system has a specific role in the overall architecture:
</p>


     <ul class='itemize1'>
     <li class='itemize'><span class='ec-lmbx-10'>utils.jac</span>: Contains utility functions that are used across the system. This includes
     datetime helpers and other common functionality that doesn’t belong to any specific
     domain.
     </li>
     <li class='itemize'><span class='ec-lmbx-10'>agent_core.jac</span>:  Defines  the  foundational  spatial  architecture.  This  includes  the
     Memory and Session nodes for state management, the abstract Toolbox node that
     defines the interface for all AI agents, and the base agent walker that handles routing
     and session management.
     </li>
     <li class='itemize'><span class='ec-lmbx-10'>main.jac</span>:  Implements  the  specialized  AI-powered  toolbox  nodes  (TaskHandling,
     EmailHandling, GeneralChat) and defines the routing enum. This file also contains
     the specialized walker implementations and global LLM configuration.
     </li>
     <li class='itemize'><span class='ec-lmbx-10'>main.impl.jac</span>: Contains all implementation blocks (<span class='ec-lmtt-10'>impl</span>) for abstract methods and
     semantic annotations (<span class='ec-lmtt-10'>sem</span>) that provide guidance to AI models. This separation keeps
     the interfaces clean while providing concrete implementations.
     </li>
     <li class='itemize'><span class='ec-lmbx-10'>.env</span>: Optional environment file for configuration variables like email credentials. This
     follows standard practices for managing sensitive configuration data.</li></ul>
<!-- l. 66 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='module-dependencies'><span class='titlemark'>7.2.3   </span> <a id='x1-1520007.2.3'></a>Module Dependencies</h4>
<!-- l. 68 --><p class='noindent'>The modules have a clear dependency hierarchy, as illustrated in the following diagram:
</p>
<div class='center'>
<!-- l. 70 --><p class='noindent'>


</p><!-- l. 71 --><p class='noindent'><img alt='aiiiiiBCMIgmncncmmmaoamueailulupppseriptnmnddleleleenleit_ai.eemmmu ar inmlcnisseeetictes.o.mpntntntlithernjrjlsssieitftaae.ac.secacticjjteoaacurnce
' src='book11704x.svg' /></p></div>
<!-- l. 125 --><p class='noindent'>This dependency structure shows that <span class='ec-lmtt-10'>utils.jac </span>serves as the foundation with no external
dependencies, <span class='ec-lmtt-10'>agent_core.jac </span>builds upon the utilities, <span class='ec-lmtt-10'>main.jac </span>leverages the core architecture,
and <span class='ec-lmtt-10'>main.impl.jac </span>provides concrete implementations for abstract methods across all
modules.
</p><!-- l. 127 --><p class='noindent'>This organization demonstrates several Jac best practices:
</p>
     <ul class='itemize1'>
     <li class='itemize'><span class='ec-lmbx-10'>Separation of Concerns</span>: Each file has a clear, focused responsibility
     </li>
     <li class='itemize'><span class='ec-lmbx-10'>Interface-Implementation Separation</span>: Abstract methods are defined in interface
     files and implemented in separate implementation files
     </li>
     <li class='itemize'><span class='ec-lmbx-10'>Dependency  Management</span>:  The  include  system  creates  a  clear  dependency
     hierarchy
     </li>
     <li class='itemize'><span class='ec-lmbx-10'>Modularity</span>: Components can be developed and tested independently</li></ul>


<!-- l. 136 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='getting-started'><span class='titlemark'>7.2.4   </span> <a id='x1-1530007.2.4'></a>Getting Started</h4>
<!-- l. 138 --><p class='noindent'>To follow along with this implementation:
</p><!-- l. 141 --><p class='noindent'>
     </p><dl class='enumerate-enumitem'><dt class='enumerate-enumitem'>
  1. </dt><dd class='enumerate-enumitem'>Create a new directory called <span class='ec-lmtt-10'>task_manager</span>
     </dd><dt class='enumerate-enumitem'>
  2. </dt><dd class='enumerate-enumitem'>Create the four Jac files listed above (start with empty files)
     </dd><dt class='enumerate-enumitem'>
  3. </dt><dd class='enumerate-enumitem'>Optionally create a <span class='ec-lmtt-10'>.env </span>file for email configuration
     </dd><dt class='enumerate-enumitem'>
  4. </dt><dd class='enumerate-enumitem'>Follow each implementation step, adding code to the appropriate files</dd></dl>
<!-- l. 147 --><p class='noindent'>The modular structure makes it easy to understand how different parts of the system work
together while maintaining clean separation between different concerns. As we progress through
the implementation steps, you’ll see how this organization supports both development workflow
and runtime execution.
</p><!-- l. 149 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='stepbystep-implementation'><span class='titlemark'>7.3   </span> <a id='x1-1540007.3'></a>Step-by-Step Implementation</h3>
<!-- l. 151 --><p class='noindent'>Now we’ll build the complete system step by step, starting with foundational utilities and
progressing through increasingly sophisticated features. Each step demonstrates specific Jac
capabilities while building toward a complete, production-ready application.
</p><!-- l. 153 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='step-setting-up-the-foundation'><span class='titlemark'>7.3.1   </span> <a id='x1-1550007.3.1'></a>Step 1: Setting up the Foundation</h4>
<!-- l. 155 --><p class='noindent'>We begin with the utility functions and global configuration that support the entire
system. This demonstrates Jac’s module system, import syntax, and global variable
management.


</p><!-- l. 157 --><p class='noindent'>First, create the <span class='ec-lmtt-10'>utils.jac </span>file with our datetime utilities:

</p>
 <!-- l. 159 --><pre class='listings' id='listing-94'><span class='label'><a id='x1-155001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>File: utils.jac</span>
</span><span class='label'><a id='x1-155002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>from</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>datetime</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>datetime</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>}</span>
</span><span class='label'><a id='x1-155003r3'></a><span class='ec-lmr-5'>3</span></span>
<span class='label'><a id='x1-155004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_current_datetime</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-155005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>datetime</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>now</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-155006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-155007r7'></a><span class='ec-lmr-5'>7</span></span></pre>
<!-- l. 168 --><p class='noindent'>This simple utility showcases Jac’s import syntax with braces for selective imports. The function
provides current timestamp functionality that we’ll use throughout the system for tracking
creation times and scheduling information.
</p><!-- l. 170 --><p class='noindent'>Next, we establish the core architectural foundation by creating the <span class='ec-lmtt-10'>agent_core.jac</span>
file:

</p>
 <!-- l. 172 --><pre class='listings' id='listing-95'><span class='label'><a id='x1-155008r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>File: agent_core.jac</span>
</span><span class='label'><a id='x1-155009r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>from</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>dotenv</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>load_dotenv</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>}</span>
</span><span class='label'><a id='x1-155010r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>sys</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-155011r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>include</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>utils</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-155012r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-155013r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>node</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Memory</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{}</span>
</span><span class='label'><a id='x1-155014r7'></a><span class='ec-lmr-5'>7</span></span>
<span class='label'><a id='x1-155015r8'></a><span class='ec-lmr-5'>8</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>node</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Session</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-155016r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>history</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>list</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [];</span>
</span><span class='label'><a id='x1-155017r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>created_at</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_current_datetime</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-155018r11'></a><span class='ec-lmr-5'>11</span></span>
<span class='label'><a id='x1-155019r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>add_history</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-155020r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>history</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>history</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+ [</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-155021r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-155022r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_history</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-155023r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>\</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>n</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>join</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>history</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[-10:])</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-155024r17'></a><span class='ec-lmr-5'>17</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-155025r18'></a><span class='ec-lmr-5'>18</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-155026r19'></a><span class='ec-lmr-5'>19</span></span></pre>
<!-- l. 193 --><p class='noindent'>Here we see several key Jac features in action. The <span class='ec-lmtt-10'>include </span>statement brings utility functions into
scope without explicit prefixing. The <span class='ec-lmtt-10'>Memory </span>node serves as a simple anchor point, while <span class='ec-lmtt-10'>Session</span>
demonstrates Jac’s object model with typed fields using <span class='ec-lmtt-10'>has </span>declarations and methods that
operate on instance state.
</p><!-- l. 195 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='step-building-the-objectspatial-foundation'><span class='titlemark'>7.3.2   </span> <a id='x1-1560007.3.2'></a>Step 2: Building the Object-spatial Foundation</h4>
<!-- l. 197 --><p class='noindent'>The session management showcases how Jac’s spatial model naturally handles state persistence
and context management. Notice how the <span class='ec-lmtt-10'>add_history </span>method builds conversation context by
appending entries, while <span class='ec-lmtt-10'>get_history </span>provides the last 10 entries for AI context—a common
pattern in conversational AI systems.
</p><!-- l. 199 --><p class='noindent'>Continue adding to the <span class='ec-lmtt-10'>agent_core.jac </span>file:

</p>
 <!-- l. 201 --><pre class='listings' id='listing-96'><span class='label'><a id='x1-156001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>File: agent_core.jac (continued)</span>
</span><span class='label'><a id='x1-156002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>node</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Toolbox</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-156003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>route_and_run</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>utterance</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>history</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>abs</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-156004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>execute</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>agent</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-156005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>session</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visitor</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>session</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-156006r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>response</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>route_and_run</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visitor</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>utterance</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>session</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_history</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-156007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>session</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>add_history</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span>
<span class='label'><a id='x1-156008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>user</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visitor</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>utterance</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>\</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>nai</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>+</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>response</span></span>
<span class='label'><a id='x1-156009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-156010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>report</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-156011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>session_id</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>jid</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visitor</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>session</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-156012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>response</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>response</span></span>
<span class='label'><a id='x1-156013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>};</span></span>
<span class='label'><a id='x1-156014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-156015r15'></a><span class='ec-lmr-5'>15</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-156016r16'></a><span class='ec-lmr-5'>16</span></span></pre>
<!-- l. 219 --><p class='noindent'>The <span class='ec-lmtt-10'>Toolbox </span>node demonstrates several advanced Jac concepts. The abstract method
<span class='ec-lmtt-10'>route_and_run </span>establishes a contract that all toolbox implementations must fulfill. The <span class='ec-lmtt-10'>can
execute </span>ability shows how nodes respond to walker visits, accessing walker state through <span class='ec-lmtt-10'>visitor</span>
and updating session history automatically. The <span class='ec-lmtt-10'>jid </span>function converts node references to
persistent identifiers.


</p><!-- l. 221 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='step-creating-the-agent-core'><span class='titlemark'>7.3.3   </span> <a id='x1-1570007.3.3'></a>Step 3: Creating the Agent Core</h4>
<!-- l. 223 --><p class='noindent'>The core agent walker demonstrates sophisticated routing logic and dynamic node instantiation.
Continue adding to <span class='ec-lmtt-10'>agent_core.jac</span>:

</p>
 <!-- l. 225 --><pre class='listings' id='listing-97'><span class='label'><a id='x1-157001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>File: agent_core.jac (continued)</span>
</span><span class='label'><a id='x1-157002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>enum</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>RoutingNodes</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-157003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>GENERAL_CHAT</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>GeneralChat</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span>
<span class='label'><a id='x1-157004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-157005r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-157006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>agent</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-157007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>utterance</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-157008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>session_id</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-157009r9'></a><span class='ec-lmr-5'>9</span></span>
<span class='label'><a id='x1-157010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>obj</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>__specs__</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-157011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>static</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>auth</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>bool</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>False</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-157012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-157013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_node_class</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>class_name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-157014r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>main_mod</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>sys</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>modules</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>__main__</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-157015r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>main_mod</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>and</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>hasattr</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>main_mod</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>class_name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-157016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>getattr</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>main_mod</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>class_name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>None</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-157017r17'></a><span class='ec-lmr-5'>17</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-157018r18'></a><span class='ec-lmr-5'>18</span></span>
<span class='label'><a id='x1-157019r19'></a><span class='ec-lmr-5'>19</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>for</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>mod_name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>mod</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>in</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>sys</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>modules</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>items</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-157020r20'></a><span class='ec-lmr-5'>20</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>mod</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>and</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>hasattr</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>mod</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>class_name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-157021r21'></a><span class='ec-lmr-5'>21</span></span><span class='ec-lmtt-8x-x-87'>            </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>getattr</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>mod</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>class_name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-157022r22'></a><span class='ec-lmr-5'>22</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-157023r23'></a><span class='ec-lmr-5'>23</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-157024r24'></a><span class='ec-lmr-5'>24</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>None</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-157025r25'></a><span class='ec-lmr-5'>25</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-157026r26'></a><span class='ec-lmr-5'>26</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>route_to_node</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>utterance</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>history</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>RoutingNodes</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>abs</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>

<span class='label'><a id='x1-157027r27'></a><span class='ec-lmr-5'>27</span></span></pre>
<!-- l. 254 --><p class='noindent'>This walker showcases several sophisticated patterns. The <span class='ec-lmtt-10'>__specs__ </span>object provides metadata
about walker behavior, including authentication requirements. The <span class='ec-lmtt-10'>get_node_class </span>method
demonstrates Python interoperability, dynamically loading classes from the module system. The
abstract <span class='ec-lmtt-10'>route_to_node </span>method will be implemented through AI delegation in specialized walker
variants.
</p><!-- l. 256 --><p class='noindent'>The main execution logic demonstrates the power of Jac’s object-spatial programming:

</p>
 <!-- l. 258 --><pre class='listings' id='listing-98'><span class='label'><a id='x1-157028r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>File: agent_core.jac (continued)</span>
</span><span class='label'><a id='x1-157029r2'></a><span class='ec-lmr-5'>2</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>execute</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> <span class='ts1-lmtt8-x-x-87'>`</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>root</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-157030r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>memory_list</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>root</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>--&gt; (</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Memory</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-157031r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>not</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>memory_list</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-157032r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>memory_list</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>root</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>++&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Memory</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-157033r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-157034r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>memory</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>memory_list</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[0];</span></span>
<span class='label'><a id='x1-157035r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>not</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>session_id</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-157036r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>session_list</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>memory</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>++&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Session</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-157037r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>session</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>session_list</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[0];</span></span>
<span class='label'><a id='x1-157038r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>else</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-157039r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>session</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= &amp;(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>session_id</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-157040r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-157041r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>routed_node</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>route_to_node</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>utterance</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>session</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_history</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-157042r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>node_cls</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_node_class</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>routed_node</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>value</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-157043r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>not</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>node_cls</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-157044r17'></a><span class='ec-lmr-5'>17</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Failed</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>to</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>get</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>node</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>class</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-157045r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-157046r19'></a><span class='ec-lmr-5'>19</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-157047r20'></a><span class='ec-lmr-5'>20</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>node_inst</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>node_cls</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-157048r21'></a><span class='ec-lmr-5'>21</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[--&gt;(</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>node_cls</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>else</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-157049r22'></a><span class='ec-lmr-5'>22</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>attached_routed_node</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>here</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>++&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>node_inst</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-157050r23'></a><span class='ec-lmr-5'>23</span></span><span class='ec-lmtt-8x-x-87'>         </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>visit</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>attached_routed_node</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-157051r24'></a><span class='ec-lmr-5'>24</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-157052r25'></a><span class='ec-lmr-5'>25</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-157053r26'></a><span class='ec-lmr-5'>26</span></span></pre>
<!-- l. 286 --><p class='noindent'>The walker navigates to the root node, ensuring a Memory node exists, then either retrieves an
existing session or creates a new one. The routing logic uses AI to determine which toolbox to
instantiate, then dynamically creates and visits the appropriate node. The <span class='ec-lmtt-10'>visit </span>statement with
fallback logic shows how object-spatial navigation handles both existing and new nodes
gracefully.
</p><!-- l. 288 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='step-implementing-aipowered-toolboxes'><span class='titlemark'>7.3.4   </span> <a id='x1-1580007.3.4'></a>Step 4: Implementing AI-Powered Toolboxes</h4>
<!-- l. 290 --><p class='noindent'>Now we implement the specialized toolbox nodes that demonstrate Jac’s AI integration
capabilities. Create the <span class='ec-lmtt-10'>main.jac </span>file:

</p>
 <!-- l. 292 --><pre class='listings' id='listing-99'><span class='label'><a id='x1-158001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>File: main.jac</span>
</span><span class='label'><a id='x1-158002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>from</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>mtllm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Model</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>}</span>
</span><span class='label'><a id='x1-158003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>from</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>email</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>mime</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>text</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>MIMEText</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>}</span>
</span><span class='label'><a id='x1-158004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>smtplib</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-158005r5'></a><span class='ec-lmr-5'>5</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>import</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>os</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-158006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>include</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>agent_core</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-158007r7'></a><span class='ec-lmr-5'>7</span></span>
<span class='label'><a id='x1-158008r8'></a><span class='ec-lmr-5'>8</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>glob</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Model</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>model_name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>gpt</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>-4</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>o</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>verbose</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>False</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-158009r9'></a><span class='ec-lmr-5'>9</span></span>
<span class='label'><a id='x1-158010r10'></a><span class='ec-lmr-5'>10</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>enum</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>RoutingNodes</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-158011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>GENERAL_CHAT</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>GeneralChat</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-158012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>TASK_HANDLING</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>TaskHandling</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-158013r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>EMAIL_HANDLING</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>EmailHandling</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span>
<span class='label'><a id='x1-158014r14'></a><span class='ec-lmr-5'>14</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-158015r15'></a><span class='ec-lmr-5'>15</span></span>
<span class='label'><a id='x1-158016r16'></a><span class='ec-lmr-5'>16</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>node</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Task</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-158017r17'></a><span class='ec-lmr-5'>17</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>task</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-158018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>date</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-158019r19'></a><span class='ec-lmr-5'>19</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>time</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-158020r20'></a><span class='ec-lmr-5'>20</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>status</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>pending</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-158021r21'></a><span class='ec-lmr-5'>21</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-158022r22'></a><span class='ec-lmr-5'>22</span></span></pre>
<!-- l. 316 --><p class='noindent'>Here we see the global LLM model configuration and the expanded routing enum. The <span class='ec-lmtt-10'>Task </span>node
demonstrates Jac’s approach to data modeling—simple, typed fields that represent domain entities
directly.
</p><!-- l. 318 --><p class='noindent'>The <span class='ec-lmtt-10'>TaskHandling </span>node showcases sophisticated AI integration. Continue in <span class='ec-lmtt-10'>main.jac</span>:

</p>
 <!-- l. 320 --><pre class='listings' id='listing-100'><span class='label'><a id='x1-158023r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>File: main.jac (continued)</span>
</span><span class='label'><a id='x1-158024r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>node</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>TaskHandling</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Toolbox</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-158025r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>add_task</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>task</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Task</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-158026r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>check_scheduled_tasks</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>list</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Task</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-158027r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>extract_task_info</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>utterance</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Task</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span>
<span class='label'><a id='x1-158028r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>method</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>ReAct</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-158029r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tools</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=([</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>add_task</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_current_datetime</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>])</span></span>
<span class='label'><a id='x1-158030r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-158031r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>summarize_tasks</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span>
<span class='label'><a id='x1-158032r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>method</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>ReAct</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-158033r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tools</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=([</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>check_scheduled_tasks</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>])</span></span>
<span class='label'><a id='x1-158034r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-158035r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>route_and_run</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>utterance</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>history</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span>
<span class='label'><a id='x1-158036r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>method</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>ReAct</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-158037r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tools</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=([</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>extract_task_info</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>summarize_tasks</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>])</span></span>
<span class='label'><a id='x1-158038r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-158039r17'></a><span class='ec-lmr-5'>17</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-158040r18'></a><span class='ec-lmr-5'>18</span></span></pre>


<!-- l. 340 --><p class='noindent'>Methods like <span class='ec-lmtt-10'>extract_task_info </span>use the <span class='ec-lmtt-10'>by llm() </span>delegation with ReAct methodology and tool
composition. The AI model can call the <span class='ec-lmtt-10'>add_task </span>method and <span class='ec-lmtt-10'>get_current_datetime </span>function
as tools, enabling complex reasoning about task scheduling.
</p><!-- l. 342 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='step-advanced-ai-integration-with-semantic-annotations'><span class='titlemark'>7.3.5   </span> <a id='x1-1590007.3.5'></a>Step 5: Advanced AI Integration with Semantic Annotations</h4>
<!-- l. 344 --><p class='noindent'>The implementation blocks demonstrate how Jac separates interface from implementation while
providing semantic guidance to AI models. Create the <span class='ec-lmtt-10'>main.impl.jac </span>file:

</p>
 <!-- l. 346 --><pre class='listings' id='listing-101'><span class='label'><a id='x1-159001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>File: main.impl.jac</span>
</span><span class='label'><a id='x1-159002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Implementation of TaskHandling</span>
</span><span class='label'><a id='x1-159003r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>impl</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>TaskHandling</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>add_task</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-159004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>++&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>task</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-159005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Task</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>added</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>successfully</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-159006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-159007r7'></a><span class='ec-lmr-5'>7</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>impl</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>TaskHandling</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>check_scheduled_tasks</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-159008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>return</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>--&gt; (</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Task</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-159009r9'></a><span class='ec-lmr-5'>9</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-159010r10'></a><span class='ec-lmr-5'>10</span></span>
<span class='label'><a id='x1-159011r11'></a><span class='ec-lmr-5'>11</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>sem</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>TaskHandling</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>extract_task_info</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>time</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>and</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>date</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>should</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>be</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>extracted</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>in</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>the</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>format</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>of</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>YYYY</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>-</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>MM</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>-</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>DD</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>HH</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>MM</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>SS</span></span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-159012r12'></a><span class='ec-lmr-5'>12</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>sem</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>TaskHandling</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>route_and_run</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Select</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>and</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Execute</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>only</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>one</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>tool</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>provided</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-159013r13'></a><span class='ec-lmr-5'>13</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>sem</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>TaskHandling</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>summarize_tasks</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Summarize</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>the</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>tasks</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>in</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>a</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>concise</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>manner</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>But</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>all</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>relevant</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>task</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>information</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>should</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>be</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>included</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>

<span class='label'><a id='x1-159014r14'></a><span class='ec-lmr-5'>14</span></span></pre>
<!-- l. 362 --><p class='noindent'>The <span class='ec-lmtt-10'>impl </span>blocks provide concrete implementations for abstract methods. Notice how <span class='ec-lmtt-10'>add_task</span>
uses object-spatial connection (<span class='ec-lmtt-10'>++&gt;</span>) to attach tasks to the toolbox node, automatically making
them persistent. The <span class='ec-lmtt-10'>check_scheduled_tasks </span>method demonstrates object-spatial queries to
retrieve connected tasks.
</p><!-- l. 364 --><p class='noindent'>The <span class='ec-lmtt-10'>sem </span>annotations provide semantic guidance to AI models without cluttering the interface
definitions. This separation of concerns keeps the code clean while ensuring AI models have the
context they need for reliable behavior.
</p><!-- l. 366 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='step-email-automation-with-error-handling'><span class='titlemark'>7.3.6   </span> <a id='x1-1600007.3.6'></a>Step 6: Email Automation with Error Handling</h4>
<!-- l. 368 --><p class='noindent'>The email handling node demonstrates more complex AI integration with external service
interaction. Continue in <span class='ec-lmtt-10'>main.jac</span>:

</p>
 <!-- l. 370 --><pre class='listings' id='listing-102'><span class='label'><a id='x1-160001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>File: main.jac (continued)</span>
</span><span class='label'><a id='x1-160002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>node</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>EmailHandling</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Toolbox</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-160003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>sender_email</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>os</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>getenv</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>SENDER_EMAIL</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-160004r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>sender_password</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>os</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>getenv</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>SENDER_PASSWORD</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-160005r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>sender_name</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>os</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>getenv</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>SENDER_NAME</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-160006r6'></a><span class='ec-lmr-5'>6</span></span>
<span class='label'><a id='x1-160007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>write_email_content</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>utterance</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>history</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-160008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>send_email</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>email_content</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>email_subject</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>email_to</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>None</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-160009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>route_and_run</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>utterance</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>history</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span>
<span class='label'><a id='x1-160010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>method</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>ReAct</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-160011r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tools</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=([</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>write_email_content</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>send_email</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>])</span></span>
<span class='label'><a id='x1-160012r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-160013r13'></a><span class='ec-lmr-5'>13</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-160014r14'></a><span class='ec-lmr-5'>14</span></span>
<span class='label'><a id='x1-160015r15'></a><span class='ec-lmr-5'>15</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>node</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>GeneralChat</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Toolbox</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-160016r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>chat</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>utterance</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>history</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-160017r17'></a><span class='ec-lmr-5'>17</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>route_and_run</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>utterance</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>history</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span>
<span class='label'><a id='x1-160018r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>method</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>ReAct</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span>
<span class='label'><a id='x1-160019r19'></a><span class='ec-lmr-5'>19</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>tools</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>=([</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>chat</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>])</span></span>
<span class='label'><a id='x1-160020r20'></a><span class='ec-lmr-5'>20</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-160021r21'></a><span class='ec-lmr-5'>21</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-160022r22'></a><span class='ec-lmr-5'>22</span></span></pre>
<!-- l. 394 --><p class='noindent'>This node shows how Jac handles configuration through environment variables and combines AI
delegation with traditional programming for external service integration. The implementation
demonstrates robust error handling. Continue in <span class='ec-lmtt-10'>main.impl.jac</span>:

</p>
 <!-- l. 396 --><pre class='listings' id='listing-103'><span class='label'><a id='x1-160023r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>File: main.impl.jac (continued)</span>
</span><span class='label'><a id='x1-160024r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Implementation of EmailHandling</span>
</span><span class='label'><a id='x1-160025r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>impl</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>EmailHandling</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>send_email</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-160026r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>msg</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>MIMEText</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>email_content</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-160027r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>msg</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Subject</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>email_subject</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-160028r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>msg</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>From</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>sender_email</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-160029r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>msg</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>To</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>]</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>email_to</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-160030r8'></a><span class='ec-lmr-5'>8</span></span>
<span class='label'><a id='x1-160031r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>try</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-160032r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>server</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>smtplib</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>SMTP</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>smtp</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>gmail</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>com</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>587);</span>
</span><span class='label'><a id='x1-160033r11'></a><span class='ec-lmr-5'>11</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>server</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>starttls</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-160034r12'></a><span class='ec-lmr-5'>12</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>server</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>login</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>sender_email</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>sender_password</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-160035r13'></a><span class='ec-lmr-5'>13</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>server</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>sendmail</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>self</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>sender_email</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>email_to</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>msg</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>as_string</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-160036r14'></a><span class='ec-lmr-5'>14</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>server</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>quit</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-160037r15'></a><span class='ec-lmr-5'>15</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-160038r16'></a><span class='ec-lmr-5'>16</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>except</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Exception</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>as</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>e</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-160039r17'></a><span class='ec-lmr-5'>17</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>print</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>f</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Failed</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>to</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>send</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>email</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>to</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>email_to</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>with</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>subject</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>email_subject</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span><span class='ts1-lmtt8-x-x-87'>'</span><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>{</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>e</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>}</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-160040r18'></a><span class='ec-lmr-5'>18</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-160041r19'></a><span class='ec-lmr-5'>19</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-160042r20'></a><span class='ec-lmr-5'>20</span></span>
<span class='label'><a id='x1-160043r21'></a><span class='ec-lmr-5'>21</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>sem</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>EmailHandling</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>route_and_run</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span>
<span class='label'><a id='x1-160044r22'></a><span class='ec-lmr-5'>22</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Step</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>1:</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Extract</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>the</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>email</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>content</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>subject</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>and</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>recipient</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>from</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>the</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>user</span></span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>s</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>utterance</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span>
<span class='label'><a id='x1-160045r23'></a><span class='ec-lmr-5'>23</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>-</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Generate</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>a</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>complete</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>draft</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>of</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>the</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>email</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span>
<span class='label'><a id='x1-160046r24'></a><span class='ec-lmr-5'>24</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>-</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Use</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Hi</span></span><span style='color:#FF8000'><span class='ts1-lmtt8-x-x-87'>'</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>as</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>the</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>greeting</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>if</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>the</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>recipient</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>name</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>is</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>not</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>mentioned</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span>
<span class='label'><a id='x1-160047r25'></a><span class='ec-lmr-5'>25</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>-</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Show</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>the</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>draft</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>to</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>the</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>user</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>and</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>ask</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>for</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>confirmation</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span>
<span class='label'><a id='x1-160048r26'></a><span class='ec-lmr-5'>26</span></span>
<span class='label'><a id='x1-160049r27'></a><span class='ec-lmr-5'>27</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Step</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>2:</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>If</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>the</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>user</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>confirms</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>yes</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>send</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>the</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>email</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span>
<span class='label'><a id='x1-160050r28'></a><span class='ec-lmr-5'>28</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>If</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>the</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>user</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>says</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>no</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>either</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>re</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>-</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>draft</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>based</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>on</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>feedback</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>or</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>cancel</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span>
<span class='label'><a id='x1-160051r29'></a><span class='ec-lmr-5'>29</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>Never</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>send</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>without</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>explicit</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>confirmation</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span>
<span class='label'><a id='x1-160052r30'></a><span class='ec-lmr-5'>30</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>

<span class='label'><a id='x1-160053r31'></a><span class='ec-lmr-5'>31</span></span></pre>
<!-- l. 429 --><p class='noindent'>The semantic annotation demonstrates how to provide complex behavioral guidance to AI models.
The multi-step process with confirmation requirements ensures safe email automation while
maintaining natural language interaction.


</p><!-- l. 431 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='step-walker-orchestration-and-system-integration'><span class='titlemark'>7.3.7   </span> <a id='x1-1610007.3.7'></a>Step 7: Walker Orchestration and System Integration</h4>
<!-- l. 433 --><p class='noindent'>The specialized walkers demonstrate different patterns for system interaction. Complete the
<span class='ec-lmtt-10'>main.jac </span>file:

</p>
 <!-- l. 435 --><pre class='listings' id='listing-104'><span class='label'><a id='x1-161001r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>File: main.jac (continued - end of file)</span>
</span><span class='label'><a id='x1-161002r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>task_manager</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>agent</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-161003r3'></a><span class='ec-lmr-5'>3</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>def</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>route_to_node</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>(</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>utterance</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>,</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>history</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>str</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>-&gt;</span> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>RoutingNodes</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>by</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>llm</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>()</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-161004r4'></a><span class='ec-lmr-5'>4</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-161005r5'></a><span class='ec-lmr-5'>5</span></span>
<span class='label'><a id='x1-161006r6'></a><span class='ec-lmr-5'>6</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>walker</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_all_tasks</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-161007r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>obj</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>__specs__</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-161008r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>static</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>has</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>auth</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>:</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>bool</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>=</span> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>False</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-161009r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-161010r10'></a><span class='ec-lmr-5'>10</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>can</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_all_tasks</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>with</span></span><span style='color:#000000'> <span class='ts1-lmtt8-x-x-87'>`</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>root</span></span><span style='color:#000000'> </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>entry</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-161011r11'></a><span class='ec-lmr-5'>11</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-161012r12'></a><span class='ec-lmr-5'>12</span></span></pre>
<!-- l. 449 --><p class='noindent'>The <span class='ec-lmtt-10'>task_manager </span>walker extends the base <span class='ec-lmtt-10'>agent </span>walker, providing AI-powered routing specific
to task management scenarios. Complete the implementation in <span class='ec-lmtt-10'>main.impl.jac</span>:

</p>
 <!-- l. 451 --><pre class='listings' id='listing-105'><span class='label'><a id='x1-161013r1'></a><span class='ec-lmr-5'>1</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>File: main.impl.jac (continued - end of file)</span>
</span><span class='label'><a id='x1-161014r2'></a><span class='ec-lmr-5'>2</span></span><span style='color:#86002D'><span class='ec-lmtti-10x-x-70'>#</span></span><span style='color:#86002D'> <span class='ec-lmtti-10x-x-70'>Implementation of get_all_tasks</span>
</span><span class='label'><a id='x1-161015r3'></a><span class='ec-lmr-5'>3</span></span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>impl</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_all_tasks</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>get_all_tasks</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-161016r4'></a><span class='ec-lmr-5'>4</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>task_handling_node</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>= [</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>root</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>--&gt; (</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>TaskHandling</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-161017r5'></a><span class='ec-lmr-5'>5</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>if</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>not</span></span><span style='color:#000000'> </span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>task_handling_node</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>{</span>
</span><span class='label'><a id='x1-161018r6'></a><span class='ec-lmr-5'>6</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>report</span></span><span style='color:#000000'> </span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>No</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>tasks</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>␣</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>found</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>.</span></span><span style='color:#FF8000'><span class='ec-lmtt-8x-x-87'>"</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-161019r7'></a><span class='ec-lmr-5'>7</span></span><span class='ec-lmtt-8x-x-87'>      </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>disengage</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>;</span></span>
<span class='label'><a id='x1-161020r8'></a><span class='ec-lmr-5'>8</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>
<span class='label'><a id='x1-161021r9'></a><span class='ec-lmr-5'>9</span></span><span class='ec-lmtt-8x-x-87'>   </span><span style='color:#008C00'><span class='ec-lmtk-10x-x-70'>report</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>[</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>task_handling_node</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>[0]</span></span><span style='color:#000000'> <span class='ec-lmtt-8x-x-87'>--&gt; (</span><span class='ts1-lmtt8-x-x-87'>`</span><span class='ec-lmtt-8x-x-87'>?</span></span><span style='color:#000099'><span class='ec-lmtt-8x-x-87'>Task</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>)</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>];</span></span>
<span class='label'><a id='x1-161022r10'></a><span class='ec-lmr-5'>10</span></span><span style='color:#000000'><span class='ec-lmtt-8x-x-87'>}</span></span>

<span class='label'><a id='x1-161023r11'></a><span class='ec-lmr-5'>11</span></span></pre>
<!-- l. 464 --><p class='noindent'>The <span class='ec-lmtt-10'>task_manager </span>walker extends the base <span class='ec-lmtt-10'>agent </span>walker, providing AI-powered routing specific
to task management scenarios. The <span class='ec-lmtt-10'>get_all_tasks </span>walker demonstrates how spatial queries make
complex data retrieval operations simple and readable.
</p><!-- l. 466 --><p class='noindent'>The system is now complete! You should have four files: </p>
     <ul class='itemize1'>
     <li class='itemize'><span class='ec-lmtt-10'>utils.jac </span>- Utility functions
     </li>
     <li class='itemize'><span class='ec-lmtt-10'>agent_core.jac </span>- Core spatial architecture with Memory, Session, Toolbox, and agent
     walker
     </li>
     <li class='itemize'><span class='ec-lmtt-10'>main.jac </span>- Specialized AI-powered toolbox nodes and routing
     </li>
     <li class='itemize'><span class='ec-lmtt-10'>main.impl.jac </span>- Implementation blocks and semantic annotations</li></ul>


<!-- l. 474 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='key-jac-features-demonstrated'><span class='titlemark'>7.4   </span> <a id='x1-1620007.4'></a>Key Jac Features Demonstrated</h3>
<!-- l. 476 --><p class='noindent'>This implementation showcases virtually every major Jac feature in a cohesive, real-world
application:
</p><!-- l. 478 --><p class='noindent'><!-- tex4ht:inline --></p><div class='tabular'> <table class='tabular' id='TBL-3'><colgroup id='TBL-3-1g'><col id='TBL-3-1' /></colgroup><colgroup id='TBL-3-2g'><col id='TBL-3-2' /></colgroup><tr class='hline' style='border-top:1px solid #000'><td></td><td></td></tr><tr id='TBL-3-1-'><td class='td11' id='TBL-3-1-1' style='white-space:normal; text-align:left;'>  <!-- l. 481 --><p class='noindent'><span class='ec-lmbx-7'>Object-Spatial
  Programming</span>                     </p></td><td class='td11' id='TBL-3-1-2' style='white-space:normal; text-align:left;'>  <!-- l. 481 --><p class='noindent'><span class='ec-lmbx-7'>Nodes</span><span class='ec-lmr-7'>: </span><span class='ec-lmtt-8x-x-87'>Memory</span><span class='ec-lmr-7'>, </span><span class='ec-lmtt-8x-x-87'>Session</span><span class='ec-lmr-7'>, </span><span class='ec-lmtt-8x-x-87'>Task</span><span class='ec-lmr-7'>, and toolbox nodes represent persistent entities
  with behavior</span>                                                                                        </p></td>
</tr><tr id='TBL-3-2-'><td class='td11' id='TBL-3-2-1' style='white-space:normal; text-align:left;'>  <!-- l. 482 --><p class='noindent'>
                                  </p></td><td class='td11' id='TBL-3-2-2' style='white-space:normal; text-align:left;'>  <!-- l. 482 --><p class='noindent'><span class='ec-lmbx-7'>Walkers</span><span class='ec-lmr-7'>:   </span><span class='ec-lmtt-8x-x-87'>agent</span><span class='ec-lmr-7'>,   </span><span class='ec-lmtt-8x-x-87'>task_manager</span><span class='ec-lmr-7'>,   and   utility   walkers   orchestrate   system
  interactions</span>                                                                                          </p></td>
</tr><tr id='TBL-3-3-'><td class='td11' id='TBL-3-3-1' style='white-space:normal; text-align:left;'>  <!-- l. 483 --><p class='noindent'>
                                  </p></td><td class='td11' id='TBL-3-3-2' style='white-space:normal; text-align:left;'>  <!-- l. 483 --><p class='noindent'><span class='ec-lmbx-7'>Object-Spatial   Navigation</span><span class='ec-lmr-7'>:   </span><span class='ec-lmtt-8x-x-87'>–&gt;</span><span class='ec-lmr-7'>,   </span><span class='ec-lmtt-8x-x-87'>++&gt;</span><span class='ec-lmr-7'>,   and   </span><span class='ec-lmtt-8x-x-87'>visit  </span><span class='ec-lmr-7'>operations   manage
  relationships and traversal</span>                                                                       </p></td>
</tr><tr id='TBL-3-4-'><td class='td11' id='TBL-3-4-1' style='white-space:normal; text-align:left;'>  <!-- l. 484 --><p class='noindent'>
                                  </p></td><td class='td11' id='TBL-3-4-2' style='white-space:normal; text-align:left;'>  <!-- l. 484 --><p class='noindent'><span class='ec-lmbx-7'>Object-Spatial  Queries</span><span class='ec-lmr-7'>:  List  comprehensions  with  object-spatial  filters
  retrieve connected entities</span>                                                                        </p></td>
</tr><tr class='hline' style='border-top:1px solid #000'><td></td><td></td></tr><tr id='TBL-3-5-'><td class='td11' id='TBL-3-5-1' style='white-space:normal; text-align:left;'>  <!-- l. 486 --><p class='noindent'><span class='ec-lmbx-7'>AI Integration</span>
                                         </p></td><td class='td11' id='TBL-3-5-2' style='white-space:normal; text-align:left;'>  <!-- l. 486 --><p class='noindent'><span class='ec-lmbx-7'>Method Delegation</span><span class='ec-lmr-7'>: </span><span class='ec-lmtt-8x-x-87'>by llm() </span><span class='ec-lmr-7'>transforms function signatures into AI-powered
  implementations</span>                                                                                    </p></td>
</tr><tr id='TBL-3-6-'><td class='td11' id='TBL-3-6-1' style='white-space:normal; text-align:left;'>  <!-- l. 487 --><p class='noindent'>
                                  </p></td><td class='td11' id='TBL-3-6-2' style='white-space:normal; text-align:left;'>  <!-- l. 487 --><p class='noindent'><span class='ec-lmbx-7'>Tool  Composition</span><span class='ec-lmr-7'>:  ReAct  methodology  enables  AI  models  to  use  regular
  methods as tools</span>                                                                                    </p></td>
</tr><tr id='TBL-3-7-'><td class='td11' id='TBL-3-7-1' style='white-space:normal; text-align:left;'>  <!-- l. 488 --><p class='noindent'>
                                  </p></td><td class='td11' id='TBL-3-7-2' style='white-space:normal; text-align:left;'>  <!-- l. 488 --><p class='noindent'><span class='ec-lmbx-7'>Semantic Annotations</span><span class='ec-lmr-7'>: </span><span class='ec-lmtt-8x-x-87'>sem </span><span class='ec-lmr-7'>statements provide behavioral guidance without
  cluttering interfaces</span>                                                                                </p></td>
</tr><tr id='TBL-3-8-'><td class='td11' id='TBL-3-8-1' style='white-space:normal; text-align:left;'>  <!-- l. 489 --><p class='noindent'>                                </p></td><td class='td11' id='TBL-3-8-2' style='white-space:normal; text-align:left;'>  <!-- l. 489 --><p class='noindent'><span class='ec-lmbx-7'>Configuration</span><span class='ec-lmr-7'>: Model parameters and reasoning modes control AI behavior</span>      </p></td>
</tr><tr class='hline' style='border-top:1px solid #000'><td></td><td></td></tr><tr id='TBL-3-9-'><td class='td11' id='TBL-3-9-1' style='white-space:normal; text-align:left;'>  <!-- l. 491 --><p class='noindent'><span class='ec-lmbx-7'>Scale Constructs</span>                  </p></td><td class='td11' id='TBL-3-9-2' style='white-space:normal; text-align:left;'>  <!-- l. 491 --><p class='noindent'><span class='ec-lmbx-7'>Root Node</span><span class='ec-lmr-7'>: Provides persistent anchor for all system state</span>                           </p></td>
</tr><tr id='TBL-3-10-'><td class='td11' id='TBL-3-10-1' style='white-space:normal; text-align:left;'>  <!-- l. 492 --><p class='noindent'>
                                  </p></td><td class='td11' id='TBL-3-10-2' style='white-space:normal; text-align:left;'>  <!-- l. 492 --><p class='noindent'><span class='ec-lmbx-7'>Automatic Persistence</span><span class='ec-lmr-7'>: Spatial connectivity determines what persists across
  program runs</span>                                                                                        </p></td>
</tr><tr id='TBL-3-11-'><td class='td11' id='TBL-3-11-1' style='white-space:normal; text-align:left;'>  <!-- l. 493 --><p class='noindent'>
                                  </p></td><td class='td11' id='TBL-3-11-2' style='white-space:normal; text-align:left;'>  <!-- l. 493 --><p class='noindent'><span class='ec-lmbx-7'>Session  Management</span><span class='ec-lmr-7'>:  User  context  maintained  through  persistent  session
  nodes</span>                                                                                                  </p></td>
</tr><tr id='TBL-3-12-'><td class='td11' id='TBL-3-12-1' style='white-space:normal; text-align:left;'>  <!-- l. 494 --><p class='noindent'>
                                  </p></td><td class='td11' id='TBL-3-12-2' style='white-space:normal; text-align:left;'>  <!-- l. 494 --><p class='noindent'><span class='ec-lmbx-7'>Scalable  Architecture</span><span class='ec-lmr-7'>:  Same  code  works  for  single  user  or  multi-tenant
  scenarios</span>                                                                                              </p></td>
</tr><tr class='hline' style='border-top:1px solid #000'><td></td><td></td></tr><tr id='TBL-3-13-'><td class='td11' id='TBL-3-13-1' style='white-space:normal; text-align:left;'>  <!-- l. 496 --><p class='noindent'><span class='ec-lmbx-7'>Language Features</span>               </p></td><td class='td11' id='TBL-3-13-2' style='white-space:normal; text-align:left;'>  <!-- l. 496 --><p class='noindent'><span class='ec-lmbx-7'>Module System</span><span class='ec-lmr-7'>: Import and include statements with enhanced syntax</span>            </p></td>
</tr><tr id='TBL-3-14-'><td class='td11' id='TBL-3-14-1' style='white-space:normal; text-align:left;'>  <!-- l. 497 --><p class='noindent'>                                </p></td><td class='td11' id='TBL-3-14-2' style='white-space:normal; text-align:left;'>  <!-- l. 497 --><p class='noindent'><span class='ec-lmbx-7'>Type System</span><span class='ec-lmr-7'>: Mandatory typing for node fields and function parameters</span>         </p></td>
</tr><tr id='TBL-3-15-'><td class='td11' id='TBL-3-15-1' style='white-space:normal; text-align:left;'>  <!-- l. 498 --><p class='noindent'>                                </p></td><td class='td11' id='TBL-3-15-2' style='white-space:normal; text-align:left;'>  <!-- l. 498 --><p class='noindent'><span class='ec-lmbx-7'>Abstract Methods</span><span class='ec-lmr-7'>: Interface definitions with </span><span class='ec-lmtt-8x-x-87'>abs </span><span class='ec-lmr-7'>keyword</span>                            </p></td>
</tr><tr id='TBL-3-16-'><td class='td11' id='TBL-3-16-1' style='white-space:normal; text-align:left;'>  <!-- l. 499 --><p class='noindent'>                                </p></td><td class='td11' id='TBL-3-16-2' style='white-space:normal; text-align:left;'>  <!-- l. 499 --><p class='noindent'><span class='ec-lmbx-7'>Implementation Blocks</span><span class='ec-lmr-7'>: Separation of interface from implementation</span>            </p></td>
</tr><tr id='TBL-3-17-'><td class='td11' id='TBL-3-17-1' style='white-space:normal; text-align:left;'>  <!-- l. 500 --><p class='noindent'>                                </p></td><td class='td11' id='TBL-3-17-2' style='white-space:normal; text-align:left;'>  <!-- l. 500 --><p class='noindent'><span class='ec-lmbx-7'>Entry Blocks</span><span class='ec-lmr-7'>: Explicit module initialization with </span><span class='ec-lmtt-8x-x-87'>with entry</span>                  </p></td>
</tr><tr id='TBL-3-18-'><td class='td11' id='TBL-3-18-1' style='white-space:normal; text-align:left;'>  <!-- l. 501 --><p class='noindent'>                                </p></td><td class='td11' id='TBL-3-18-2' style='white-space:normal; text-align:left;'>  <!-- l. 501 --><p class='noindent'><span class='ec-lmbx-7'>Global Variables</span><span class='ec-lmr-7'>: </span><span class='ec-lmtt-8x-x-87'>glob </span><span class='ec-lmr-7'>declarations for shared state</span>                                    </p></td>
</tr><tr id='TBL-3-19-'><td class='td11' id='TBL-3-19-1' style='white-space:normal; text-align:left;'>  <!-- l. 502 --><p class='noindent'>                                </p></td><td class='td11' id='TBL-3-19-2' style='white-space:normal; text-align:left;'>  <!-- l. 502 --><p class='noindent'><span class='ec-lmbx-7'>Enums</span><span class='ec-lmr-7'>: Type-safe enumeration with string values</span>                                        </p></td>
</tr><tr class='hline' style='border-top:1px solid #000'><td></td><td></td></tr></table>                                                                                  </div>
<!-- l. 507 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='understanding-the-architecture-choices'><span class='titlemark'>7.5   </span> <a id='x1-1630007.5'></a>Understanding the Architecture Choices</h3>
<!-- l. 509 --><p class='noindent'>Each architectural decision in this implementation serves specific purposes that demonstrate Jac’s
strengths:
</p><!-- l. 511 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='why-objectspatial-programming'><span class='titlemark'>7.5.1   </span> <a id='x1-1640007.5.1'></a>Why Object-Spatial Programming?</h4>
<!-- l. 513 --><p class='noindent'>Traditional object-oriented approaches would model this system as isolated classes with complex
interaction protocols. The object-spatial model makes the collaborative nature of AI agents
explicit—they share spaces, navigate between contexts, and maintain relationships through
object-spatial connectivity rather than fragile object references.


</p><!-- l. 515 --><p class='noindent'>The persistence model emerges naturally from object-spatial relationships. Rather than explicit
save/load operations, entities persist by being connected to the root. This eliminates entire classes
of bugs while making the persistence boundaries of the system explicit in the code
structure.
</p><!-- l. 517 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='why-ai-delegation'><span class='titlemark'>7.5.2   </span> <a id='x1-1650007.5.2'></a>Why AI Delegation?</h4>
<!-- l. 519 --><p class='noindent'>The <span class='ec-lmtt-10'>by llm() </span>approach eliminates the boilerplate typically associated with AI programming while
providing more reliable behavior than manual prompt engineering. By inferring intent from
function signatures and type annotations, Jac enables AI integration that feels like natural
programming rather than external service calls.
</p><!-- l. 521 --><p class='noindent'>The tool composition pattern through ReAct methodology enables sophisticated AI
reasoning while maintaining the benefits of typed interfaces. AI models can call regular
methods as tools, creating a seamless boundary between AI-powered and traditional
code.
</p><!-- l. 523 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='why-semantic-annotations'><span class='titlemark'>7.5.3   </span> <a id='x1-1660007.5.3'></a>Why Semantic Annotations?</h4>
<!-- l. 525 --><p class='noindent'>The <span class='ec-lmtt-10'>sem </span>keyword provides a clean separation between interface definitions and behavioral
guidance. This keeps the code readable while ensuring AI models have the context they need for
reliable operation. The semantic annotations serve as documentation for both human developers
and AI models.
</p><!-- l. 527 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='production-considerations-and-extensions'><span class='titlemark'>7.6   </span> <a id='x1-1670007.6'></a>Production Considerations and Extensions</h3>
<!-- l. 529 --><p class='noindent'>While this implementation demonstrates Jac’s capabilities, production deployments would benefit
from additional considerations:


</p><!-- l. 531 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='security-and-authentication'><span class='titlemark'>7.6.1   </span> <a id='x1-1680007.6.1'></a>Security and Authentication</h4>
<!-- l. 533 --><p class='noindent'>The <span class='ec-lmtt-10'>__specs__ </span>objects provide hooks for authentication and authorization. Production systems
should implement proper user authentication, session validation, and access control for sensitive
operations like email sending.
</p><!-- l. 535 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='error-handling-and-monitoring'><span class='titlemark'>7.6.2   </span> <a id='x1-1690007.6.2'></a>Error Handling and Monitoring</h4>
<!-- l. 537 --><p class='noindent'>The object-spatial model enables sophisticated error handling patterns. Failed operations can leave
trace nodes that enable debugging and recovery. The persistent nature of the system makes it
possible to implement comprehensive audit trails and monitoring.
</p><!-- l. 539 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='extension-possibilities'><span class='titlemark'>7.6.3   </span> <a id='x1-1700007.6.3'></a>Extension Possibilities</h4>
<!-- l. 541 --><p class='noindent'>This foundation enables numerous extensions: adding new agent types by inheriting from
<span class='ec-lmtt-10'>Toolbox</span>, supporting multi-user scenarios through root node architecture, integrating external
services through additional toolbox nodes, and implementing advanced AI capabilities like
multi-agent collaboration and adaptive behavior.
</p><!-- l. 543 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='conclusion'><span class='titlemark'>7.7   </span> <a id='x1-1710007.7'></a>Conclusion</h3>
<!-- l. 545 --><p class='noindent'>This comprehensive example demonstrates how Jac’s features compose to enable building
sophisticated AI systems with remarkable clarity and maintainability. The object-spatial
programming model provides the architectural foundation, AI integration eliminates accidental
complexity, and scale constructs ensure the system works across different deployment
scenarios.
</p><!-- l. 547 --><p class='noindent'>What makes this example particularly powerful is how naturally the features work together. The
object-spatial model isn’t just different syntax—it’s a fundamentally better way to express
collaborative AI systems. The AI integration isn’t just convenient—it’s a paradigm shift that


makes AI programming feel like natural programming. The scale constructs aren’t just
persistence helpers—they’re the foundation for building systems that adapt to any
scale.
</p><!-- l. 549 --><p class='noindent'>As you build your own Jac applications, remember that these patterns compose and
extend. The architectural principles demonstrated here—object-spatial organization, AI
delegation, semantic clarity—apply to systems far beyond task management. Whether you’re
building recommendation engines, content management systems, or complex multi-agent
simulations, Jac provides the abstractions needed to express your ideas clearly and scale them
effectively.
</p><!-- l. 551 --><p class='noindent'>The future of software development lies not in managing complexity but in choosing the right
abstractions that make complexity disappear. Jac represents one path toward that future—a
language designed for the problems we face today and the opportunities we’ll discover
tomorrow.


</p>
<h1 class='partHead' id='the-jaseci-stack'><span class='titlemark'>Part II<br /></span><a id='x1-172000II'></a>The Jaseci Stack</h1>
<!-- l. 25 --><p class='noindent'>


</p><!-- l. 26 --><p class='noindent'>Coming soon...


</p>
<h2 class='likechapterHead' id='bibliography'><a id='x1-173000'></a>Bibliography</h2>

</body>
</html>